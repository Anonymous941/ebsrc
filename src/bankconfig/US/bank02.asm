.SEGMENT "BANK02"
.INCLUDE "movementmacros.asm"
.INCLUDE "common.asm"
.INCLUDE "config.asm"
.INCLUDE "structs.asm"

.INCLUDE "overworld/inflict_sunstroke_check.asm"

.INCLUDE "data/unknown/C200B9.asm"

.INCLUDE "unknown/C200D9.asm"

.INCLUDE "unknown/C20266.asm"

.INCLUDE "unknown/C20293.asm"

.INCLUDE "unknown/C202AC.asm"

.INCLUDE "text/read_name.asm"

.INCLUDE "unknown/C2038B.asm"

.INCLUDE "unknown/C203C3.asm"

UNKNOWN_C2077D: ;$C2077D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDY .LOWORD(UNKNOWN_7E9647)
	STY $10
	LDX #$0000
	STX $0E
	BRA UNKNOWN_C2077D_UNKNOWN2
UNKNOWN_C2077D_UNKNOWN0:
	TYA
	AND #$0001
	BEQ UNKNOWN_C2077D_UNKNOWN1
	TXA
	JSR a:.LOWORD(UNKNOWN_C203C3)
UNKNOWN_C2077D_UNKNOWN1:
	LDY $10
	TYA
	LSR
	TAY
	STY $10
	LDX $0E
	INX
	STX $0E
UNKNOWN_C2077D_UNKNOWN2:
	LDA .LOWORD(GAME_STATE)+game_state::player_controlled_party_count
	AND #$00FF
	STA $02
	TXA
	CMP $02
	BNE UNKNOWN_C2077D_UNKNOWN0
	PLD
	RTS

UNKNOWN_C207B6: ;$C207B6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $0E
	SEP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8
	TAY
	REP #PROC_FLAGS::ACCUM8
	LDA #$0001
	JSL ASL16_ENTRY2
	ORA .LOWORD(UNKNOWN_7E9647)
	STA .LOWORD(UNKNOWN_7E9647)
	LDA $0E
	JSR a:.LOWORD(UNKNOWN_C203C3)
	LDA #$0001
	STA .LOWORD(UNKNOWN_7E9649)
	PLD
	RTL

UNKNOWN_C207E1: ;$C207E1
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	TAX
	STX $10
	LDA #$0001
	STA .LOWORD(UNKNOWN_7E9649)
	SEP #PROC_FLAGS::INDEX8
	TXY
	JSL ASL16_ENTRY2
	EOR #$FFFF
	AND .LOWORD(UNKNOWN_7E9647)
	STA .LOWORD(UNKNOWN_7E9647)
	REP #PROC_FLAGS::INDEX8
	LDX $10
	CPX .LOWORD(PSI_WINDOW_CHARACTER)
	BNE UNKNOWN_C207E1_UNKNOWN0
	LDA #$0012
	STA $0E
	BRA UNKNOWN_C207E1_UNKNOWN1
UNKNOWN_C207E1_UNKNOWN0:
	LDA #$0013
	STA $0E
UNKNOWN_C207E1_UNKNOWN1:
	TXA
	STA $04
	ASL
	ADC $04
	ASL
	ADC $04
	PHA
	LDA .LOWORD(GAME_STATE)+game_state::player_controlled_party_count
	AND #$00FF
	STA $04
	ASL
	ADC $04
	ASL
	ADC $04
	PHA
	ASL
	PLA
	ROR
	STA $02
	LDA #$0010
	SEC
	SBC $02
	PLY
	STY $04
	CLC
	ADC $04
	ASL
	STA $02
	LDA $0E
	ASL
	ASL
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC $02
	CLC
	ADC #$7DFE
	TAX
	LDY #$0008
	BRA UNKNOWN_C207E1_UNKNOWN5
UNKNOWN_C207E1_UNKNOWN2:
	LDA #$0007
	STA $0E
	BRA UNKNOWN_C207E1_UNKNOWN4
UNKNOWN_C207E1_UNKNOWN3:
	LDA #$0000
	STA a:.LOWORD(RAM),X
	INX
	INX
	LDA $0E
	DEC
	STA $0E
UNKNOWN_C207E1_UNKNOWN4:
	BNE UNKNOWN_C207E1_UNKNOWN3
	TXA
	CLC
	ADC #$0032
	TAX
	DEY
UNKNOWN_C207E1_UNKNOWN5:
	BNE UNKNOWN_C207E1_UNKNOWN2
	PLD
	RTL

UNKNOWN_C2087C: ;$C2087C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA $89C9
	AND #$00FF
	BEQ UNKNOWN_C2087C_UNKNOWN0
	JSR a:.LOWORD(UNKNOWN_C2077D)
UNKNOWN_C2087C_UNKNOWN0:
	LDA .LOWORD(UNKNOWN_7E88E0)
	CMP #$FFFF
	BEQ UNKNOWN_C2087C_UNKNOWN2
	LDY .LOWORD(UNKNOWN_7E88E0)
	STY $0E
UNKNOWN_C2087C_UNKNOWN1:
	TYA
	JSL UNKNOWN_C107AF
	LDY $0E
	TYA
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	LDY .LOWORD(WINDOW_STATS_TABLE)+2,X
	STY $0E
	CPY #$FFFF
	BNE UNKNOWN_C2087C_UNKNOWN1
UNKNOWN_C2087C_UNKNOWN2:
	PLD
	RTL

UNKNOWN_C208B8: ;$C208B8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEC
	TCD
	PLA
	STX $12
	STA $10
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	CLC
	ADC #.LOWORD(WINDOW_STATS_TABLE)
	TAY
	STY $0E
	LDA $10
	ASL
	STA $02
	LDA a:.LOWORD(RAM)+10,Y
	TAY
	LDX $12
	TXA
	JSL MULT16
	ASL
	ASL
	LDY $0E
	CLC
	ADC a:.LOWORD(RAM)+53,Y
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$03FF
	CMP #$004F
	BEQ UNKNOWN_C208B8_UNKNOWN0
	CMP #$0041
	BNE UNKNOWN_C208B8_UNKNOWN1
UNKNOWN_C208B8_UNKNOWN0:
	LDA #$002F
	BRA UNKNOWN_C208B8_UNKNOWN2
UNKNOWN_C208B8_UNKNOWN1:
	LDA #$0040
UNKNOWN_C208B8_UNKNOWN2:
	PLD
	RTL

NAME_ENTRY_GRID_CHARACTER_OFFSET_TABLE: ;$C20912
	.BYTE $05, $07, $09, $0B, $0D, $0F, $11, $13, $15, $FF, $FF, $1B, $1D, $FF
	.BYTE $23, $25, $27, $29, $2B, $2D, $2F, $31, $33, $FF, $FF, $39, $3B, $FF
	.BYTE $41, $43, $45, $47, $49, $4B, $4D, $4F, $51, $FF, $FF, $57, $59, $FF
	.BYTE $5F, $61, $63, $65, $67, $69, $6B, $6D, $6F, $71, $FF, $77, $79, $FF
	.BYTE $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $7F, $81, $FF

UNKNOWN_C20958: ;$C20958
	.BYTE $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $FF, $8F, $1F, $80, $FF, $03, $FF, $03, $01, $00, $01, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00

THETHE: ;$C20998
	EBTEXT "The "
	EBTEXT "the "

UNKNOWN_C209A0: ;$C209A0
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	CMP #$FFFF
	BNE UNKNOWN_C209A0_UNKNOWN4
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	CLC
	ADC #.LOWORD(WINDOW_STATS_TABLE)
	TAX
	STX $10
	LDY a:.LOWORD(RAM)+53,X
	STY $0E
	LDY a:.LOWORD(RAM)+12,X
	LDA a:.LOWORD(RAM)+10,X
	JSL MULT16
	STA $02
	BRA UNKNOWN_C209A0_UNKNOWN2
UNKNOWN_C209A0_UNKNOWN0:
	LDY $0E
	LDA a:.LOWORD(RAM),Y
	BEQ UNKNOWN_C209A0_UNKNOWN1
	JSL UNKNOWN_C44E4D
UNKNOWN_C209A0_UNKNOWN1:
	LDA #$0040
	LDY $0E
	STA a:.LOWORD(RAM),Y
	INY
	INY
	STY $0E
	LDA $02
	DEC
	STA $02
UNKNOWN_C209A0_UNKNOWN2:
	LDA $02
	BNE UNKNOWN_C209A0_UNKNOWN0
	LDX $10
	LDA a:.LOWORD(RAM)+59,X
	AND #$00FF
	BEQ UNKNOWN_C209A0_UNKNOWN3
	AND #$00FF
	DEC
	ASL
	TAX
	LDA #$FFFF
	STA .LOWORD(WINDOW_EXISTENCE_TABLE)+106,X
UNKNOWN_C209A0_UNKNOWN3:
	LDX $10
	SEP #PROC_FLAGS::ACCUM8
	STZ a:.LOWORD(RAM)+60,X
	STZ a:.LOWORD(RAM)+59,X
	LDA #$0001
	STA .LOWORD(UNKNOWN_7E9623)
	JSL UNKNOWN_C07C5B
UNKNOWN_C209A0_UNKNOWN4:
	PLD
	RTL

UNKNOWN_C20A20: ;$C20A20
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	STX $0E
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	STA a:.LOWORD(RAM),X
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	CMP #$FFFF
	BNE UNKNOWN_C20A20_UNKNOWN0
	JMP a:.LOWORD(UNKNOWN_C20A20_UNKNOWN1)
UNKNOWN_C20A20_UNKNOWN0:
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	LDA .LOWORD(WINDOW_STATS_TABLE)+window_stats::text_x,X
	LDX $0E
	STA a:.LOWORD(RAM)+2,X
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	LDA .LOWORD(WINDOW_STATS_TABLE)+window_stats::text_y,X
	LDX $0E
	STA a:.LOWORD(RAM)+4,X
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(WINDOW_STATS_TABLE)+window_stats::text_width,X
	LDX $0E
	STA a:.LOWORD(RAM)+6,X
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	LDA .LOWORD(WINDOW_STATS_TABLE)+19,X
	LDX $0E
	STA a:.LOWORD(RAM)+7,X
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	LDA .LOWORD(WINDOW_STATS_TABLE)+21,X
	LDX $0E
	STA a:.LOWORD(RAM)+9,X
UNKNOWN_C20A20_UNKNOWN1:
	PLD
	RTL

UNKNOWN_C20ABC: ;$C20ABC
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	TAY
	STY $10
	LDA a:.LOWORD(RAM),Y
	STA $0E
	CMP #$FFFF
	BNE UNKNOWN_C20ABC_UNKNOWN0
	JMP a:.LOWORD(UNKNOWN_C20ABC_UNKNOWN2)
UNKNOWN_C20ABC_UNKNOWN0:
	ASL
	CLC
	ADC #$88E4
	TAX
	LDA a:.LOWORD(RAM),X
	CMP #$FFFF
	BNE UNKNOWN_C20ABC_UNKNOWN1
	JMP a:.LOWORD(UNKNOWN_C20ABC_UNKNOWN2)
UNKNOWN_C20ABC_UNKNOWN1:
	LDA $0E
	STA .LOWORD(CURRENT_FOCUS_WINDOW)
	LDA a:.LOWORD(RAM),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	LDY $10
	LDA a:.LOWORD(RAM)+2,Y
	STA .LOWORD(WINDOW_STATS_TABLE)+window_stats::text_x,X
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	LDY $10
	LDA a:.LOWORD(RAM)+4,Y
	STA .LOWORD(WINDOW_STATS_TABLE)+window_stats::text_y,X
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	LDY $10
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+6,Y
	STA .LOWORD(WINDOW_STATS_TABLE)+window_stats::text_width,X
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	LDY $10
	LDA a:.LOWORD(RAM)+7,Y
	STA .LOWORD(WINDOW_STATS_TABLE)+19,X
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	TAX
	LDY $10
	LDA a:.LOWORD(RAM)+9,Y
	STA .LOWORD(WINDOW_STATS_TABLE)+21,X
UNKNOWN_C20ABC_UNKNOWN2:
	PLD
	RTL

UNKNOWN_C20B65: ;$C20B65
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE4
	TCD
	PLA
	STY $04
	STX $1A
	STA $18
	LDX $2C
	STX $16
	LDY $2A
	STY $14
	LDA .LOWORD(CURRENT_FOCUS_WINDOW)
	ASL
	TAX
	LDA .LOWORD(WINDOW_EXISTENCE_TABLE),X
	LDY #.SIZEOF(window_stats)
	JSL MULT168
	CLC
	ADC #.LOWORD(WINDOW_STATS_TABLE)
	STA $12
	LDA $18
	STA $02
	STA $10
	LDY $1A
	STY $0E
	LDA $04
	BNE UNKNOWN_C20B65_UNKNOWN0
	JMP a:.LOWORD(UNKNOWN_C20B65_UNKNOWN14)
UNKNOWN_C20B65_UNKNOWN0:
	TYA
	CLC
	ADC $04
	TAY
	STY $0E
	BRA UNKNOWN_C20B65_UNKNOWN3
UNKNOWN_C20B65_UNKNOWN1:
	TYX
	LDA $10
	STA $02
	JSL UNKNOWN_C208B8
	CMP #$002F
	BNE UNKNOWN_C20B65_UNKNOWN2
	JMP a:.LOWORD(UNKNOWN_C20B65_UNKNOWN27)
UNKNOWN_C20B65_UNKNOWN2:
	LDY $0E
	TYA
	CLC
	ADC $04
	TAY
	STY $0E
UNKNOWN_C20B65_UNKNOWN3:
	LDY #$000C
	LDA ($12),Y
	LSR
	STA $02
	LDY $0E
	TYA
	CMP $02
	BCC UNKNOWN_C20B65_UNKNOWN1
	LDA $04
	CLC
	ADC $1A
	TAY
	STY $0E
	BRA UNKNOWN_C20B65_UNKNOWN8
UNKNOWN_C20B65_UNKNOWN4:
	LDA $10
	STA $02
	DEC
	STA $02
	BRA UNKNOWN_C20B65_UNKNOWN7
UNKNOWN_C20B65_UNKNOWN5:
	LDY $0E
	TYX
	LDA $02
	JSL UNKNOWN_C208B8
	CMP #$002F
	BNE UNKNOWN_C20B65_UNKNOWN6
	JMP a:.LOWORD(UNKNOWN_C20B65_UNKNOWN27)
UNKNOWN_C20B65_UNKNOWN6:
	LDA $02
	DEC
	STA $02
UNKNOWN_C20B65_UNKNOWN7:
	LDY #$000A
	LDA $02
	CMP ($12),Y
	BCC UNKNOWN_C20B65_UNKNOWN5
	LDA $18
	STA $02
	STA $10
	LDY $0E
	TYA
	CLC
	ADC $04
	TAY
	STY $0E
UNKNOWN_C20B65_UNKNOWN8:
	LDY #$000C
	LDA ($12),Y
	LSR
	STA $02
	LDY $0E
	TYA
	CMP $02
	BCC UNKNOWN_C20B65_UNKNOWN4
	LDX $18
	LDA $04
	CLC
	ADC $1A
	TAY
	STY $0E
	BRA UNKNOWN_C20B65_UNKNOWN13
UNKNOWN_C20B65_UNKNOWN9:
	STX $02
	INC $02
	BRA UNKNOWN_C20B65_UNKNOWN12
UNKNOWN_C20B65_UNKNOWN10:
	LDY $0E
	TYX
	LDA $02
	JSL UNKNOWN_C208B8
	CMP #$002F
	BNE UNKNOWN_C20B65_UNKNOWN11
	JMP a:.LOWORD(UNKNOWN_C20B65_UNKNOWN27)
UNKNOWN_C20B65_UNKNOWN11:
	INC $02
UNKNOWN_C20B65_UNKNOWN12:
	LDY #$000A
	LDA $02
	CMP ($12),Y
	BCC UNKNOWN_C20B65_UNKNOWN10
	LDX $18
	LDY $0E
	TYA
	CLC
	ADC $04
	TAY
	STY $0E
UNKNOWN_C20B65_UNKNOWN13:
	LDY #$000C
	LDA ($12),Y
	LSR
	STA $02
	LDY $0E
	TYA
	CMP $02
	BCC UNKNOWN_C20B65_UNKNOWN9
	JMP a:.LOWORD(UNKNOWN_C20B65_UNKNOWN26)
UNKNOWN_C20B65_UNKNOWN14:
	LDA $02
	CLC
	ADC $14
	STA $02
	BRA UNKNOWN_C20B65_UNKNOWN17
UNKNOWN_C20B65_UNKNOWN15:
	LDY $0E
	TYX
	LDA $02
	JSL UNKNOWN_C208B8
	CMP #$002F
	BNE UNKNOWN_C20B65_UNKNOWN16
	JMP a:.LOWORD(UNKNOWN_C20B65_UNKNOWN27)
UNKNOWN_C20B65_UNKNOWN16:
	LDA $02
	CLC
	ADC $14
	STA $02
UNKNOWN_C20B65_UNKNOWN17:
	LDY #$000A
	LDA $02
	CMP ($12),Y
	BCC UNKNOWN_C20B65_UNKNOWN15
	LDA $18
	CLC
	ADC $14
	STA $02
	BRA UNKNOWN_C20B65_UNKNOWN21
UNKNOWN_C20B65_UNKNOWN18:
	LDY $0E
	DEY
	STY $0E
	BRA UNKNOWN_C20B65_UNKNOWN20
UNKNOWN_C20B65_UNKNOWN19:
	TYX
	LDA $02
	JSL UNKNOWN_C208B8
	CMP #$002F
	BEQ UNKNOWN_C20B65_UNKNOWN27
	LDY $0E
	DEY
	STY $0E
UNKNOWN_C20B65_UNKNOWN20:
	LDY #$000C
	LDA ($12),Y
	LSR
	STA $04
	LDY $0E
	TYA
	CMP $04
	BCC UNKNOWN_C20B65_UNKNOWN19
	LDY $1A
	STY $0E
	LDA $02
	CLC
	ADC $14
	STA $02
UNKNOWN_C20B65_UNKNOWN21:
	LDY #$000A
	LDA $02
	CMP ($12),Y
	BCC UNKNOWN_C20B65_UNKNOWN18
	LDX $1A
	LDA $18
	CLC
	ADC $14
	STA $02
	BRA UNKNOWN_C20B65_UNKNOWN25
UNKNOWN_C20B65_UNKNOWN22:
	TXY
	INY
	STY $0E
	BRA UNKNOWN_C20B65_UNKNOWN24
UNKNOWN_C20B65_UNKNOWN23:
	TYX
	LDA $02
	JSL UNKNOWN_C208B8
	CMP #$002F
	BEQ UNKNOWN_C20B65_UNKNOWN27
	LDY $0E
	INY
	STY $0E
UNKNOWN_C20B65_UNKNOWN24:
	LDY #$000C
	LDA ($12),Y
	LSR
	STA $04
	LDY $0E
	TYA
	CMP $04
	BCC UNKNOWN_C20B65_UNKNOWN23
	LDX $1A
	LDA $02
	CLC
	ADC $14
	STA $02
UNKNOWN_C20B65_UNKNOWN25:
	LDY #$000A
	LDA $02
	CMP ($12),Y
	BCC UNKNOWN_C20B65_UNKNOWN22
UNKNOWN_C20B65_UNKNOWN26:
	LDA #$FFFF
	BRA UNKNOWN_C20B65_UNKNOWN29
UNKNOWN_C20B65_UNKNOWN27:
	LDA $16
	CMP #$FFFF
	BEQ UNKNOWN_C20B65_UNKNOWN28
	LDA $16
	JSL PLAY_SOUND
UNKNOWN_C20B65_UNKNOWN28:
	LDY $0E
	TYA
	XBA
	AND #$FF00
	CLC
	ADC $02
UNKNOWN_C20B65_UNKNOWN29:
	PLD
	RTL

UNKNOWN_C20D3F: ;$C20D3F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $0E
	LDX #$8968
	LDY #$000A
	JSL MODULUS16
	SEP #PROC_FLAGS::ACCUM8
	STA a:.LOWORD(RAM),X
	DEX
	LDY #$000A
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	JSL DIVISION16S_DIVISOR_POSITIVE
	STA $0E
	LDY #$000A
	JSL MODULUS16
	SEP #PROC_FLAGS::ACCUM8
	STA a:.LOWORD(RAM),X
	DEX
	LDY #$000A
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	JSL DIVISION16S_DIVISOR_POSITIVE
	SEP #PROC_FLAGS::ACCUM8
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTS

UNKNOWN_C20D89: ;$C20D89
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	ASL
	CLC
	ADC #$8975
	TAX
	LDA #$0000
	STA $0E
	BRA UNKNOWN_C20D89_UNKNOWN1
UNKNOWN_C20D89_UNKNOWN0:
	CLC
	ADC #$264C
	STA a:.LOWORD(RAM),X
	LDA $0E
	CLC
	ADC #$265C
	STA a:.LOWORD(RAM)+6,X
	LDA $0E
	INC
	STA $0E
	INX
	INX
UNKNOWN_C20D89_UNKNOWN1:
	CMP #$0003
	BCC UNKNOWN_C20D89_UNKNOWN0
	PLD
	RTS

UNKNOWN_C20DC5: ;$C20DC5
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE8
	TCD
	PLA
	STX $02
	TAX
	CPY #$3000
	BCS UNKNOWN_C20DC5_UNKNOWN0
	LDA #$0000
	STA $16
	BRA UNKNOWN_C20DC5_UNKNOWN1
UNKNOWN_C20DC5_UNKNOWN0:
	TYA
	SEC
	SBC #$3000
	STA $16
UNKNOWN_C20DC5_UNKNOWN1:
	LDA #$3400
	STA $0A
	LDA #$0000
	STA $0C
	LDA $16
	STA $06
	STZ $08
	JSL DIVISION32
	LDA $06
	TAY
	LDA $02
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	STA $02
	TXA
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	ASL
	CLC
	ADC $02
	CLC
	ADC #$896D
	TAX
	LDA $8968
	AND #$00FF
	STA $14
	LDA $8967
	AND #$00FF
	STA $04
	LDA $8966
	AND #$00FF
	STA $12
	LDA $14
	LSR
	LSR
	ASL
	ASL
	ASL
	ASL
	STA $02
	LDA $14
	ASL
	ASL
	CLC
	ADC $02
	STY $02
	CLC
	ADC $02
	CLC
	ADC #$2600
	STA $02
	STA a:.LOWORD(RAM),X
	LDA $02
	CLC
	ADC #$0010
	STA a:.LOWORD(RAM)+6,X
	TXA
	DEC
	DEC
	STA $02
	STA $10
	LDA $04
	BNE UNKNOWN_C20DC5_UNKNOWN2
	LDA $12
	BNE UNKNOWN_C20DC5_UNKNOWN2
	LDX #$0248
	BRA UNKNOWN_C20DC5_UNKNOWN3
UNKNOWN_C20DC5_UNKNOWN2:
	LDX #$0200
UNKNOWN_C20DC5_UNKNOWN3:
	LDA $14
	CMP #$0009
	BNE UNKNOWN_C20DC5_UNKNOWN4
	CPY #$0000
	BNE UNKNOWN_C20DC5_UNKNOWN5
UNKNOWN_C20DC5_UNKNOWN4:
	LDY #$0000
UNKNOWN_C20DC5_UNKNOWN5:
	LDA $04
	LSR
	LSR
	ASL
	ASL
	ASL
	ASL
	STA $02
	LDA $04
	ASL
	ASL
	CLC
	ADC $02
	STY $02
	CLC
	ADC $02
	STX $02
	CLC
	ADC $02
	CLC
	ADC #.LOWORD(UNKNOWN_7E2400)
	LDX $10
	STX $02
	STA a:.LOWORD(RAM),X
	CLC
	ADC #$0010
	LDX $02
	STA a:.LOWORD(RAM)+6,X
	LDA $02
	DEC
	DEC
	STA $0E
	LDA $12
	BNE UNKNOWN_C20DC5_UNKNOWN6
	LDX #$0248
	BRA UNKNOWN_C20DC5_UNKNOWN7
UNKNOWN_C20DC5_UNKNOWN6:
	LDX #$0200
UNKNOWN_C20DC5_UNKNOWN7:
	LDA $04
	CMP #$0009
	BNE UNKNOWN_C20DC5_UNKNOWN8
	CPY #$0000
	BNE UNKNOWN_C20DC5_UNKNOWN9
UNKNOWN_C20DC5_UNKNOWN8:
	LDY #$0000
UNKNOWN_C20DC5_UNKNOWN9:
	STY $04
	LDA $12
	LSR
	LSR
	ASL
	ASL
	ASL
	ASL
	STA $02
	LDA $12
	ASL
	ASL
	CLC
	ADC $02
	CLC
	ADC $04
	STX $02
	CLC
	ADC $02
	CLC
	ADC #.LOWORD(UNKNOWN_7E2400)
	TAX
	STX $12
	PHX
	LDA $0E
	TAX
	PLA
	STA a:.LOWORD(RAM),X
	LDA $0E
	PHA
	LDX $12
	TXA
	CLC
	ADC #$0010
	PLX
	STA a:.LOWORD(RAM)+6,X
	PLD
	RTS

UNKNOWN_C20F08: ;$C20F08
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STY $0E
	STA $02
	TXA
	JSR a:.LOWORD(UNKNOWN_C20D3F)
	LDY $0E
	LDX #$0000
	LDA $02
	JSR a:.LOWORD(UNKNOWN_C20DC5)
	PLD
	RTS

UNKNOWN_C20F26: ;$C20F26
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STY $04
	STA $02
	LDY $1E
	STY $0E
	LDA a:.LOWORD(RAM)+4,X
	AND #$00FF
	BEQ UNKNOWN_C20F26_UNKNOWN0
	LDA $02
	JSR a:.LOWORD(UNKNOWN_C20D89)
	BRA UNKNOWN_C20F26_UNKNOWN1
UNKNOWN_C20F26_UNKNOWN0:
	LDA $04
	JSR a:.LOWORD(UNKNOWN_C20D3F)
	LDY $0E
	LDX #$0001
	LDA $02
	JSR a:.LOWORD(UNKNOWN_C20DC5)
UNKNOWN_C20F26_UNKNOWN1:
	PLD
	RTS

UNKNOWN_C20F58: ;$C20F58
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF2
	TCD
	LDA .LOWORD(UNKNOWN_7E9695)
	AND #$00FF
	BEQ UNKNOWN_C20F58_UNKNOWN0
	SEP #PROC_FLAGS::INDEX8
	LDY #$0001
	LDA .LOWORD(UNKNOWN_7E9627)
	STA $06
	LDA .LOWORD(UNKNOWN_7E9629)
	STA $08
	JSL ASR32
	LDA $06
	STA $14
	LDA $08
	STA $16
	BRA UNKNOWN_C20F58_UNKNOWN1
UNKNOWN_C20F58_UNKNOWN0:
	LDA .LOWORD(UNKNOWN_7E9627)
	STA $06
	LDA .LOWORD(UNKNOWN_7E9629)
	STA $08
	LDA $06
	STA $14
	LDA $08
	STA $16
UNKNOWN_C20F58_UNKNOWN1:
	REP #PROC_FLAGS::INDEX8
	PLD
	RTS

UNKNOWN_C20F9A: ;$C20F9A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA #$0000
	STA $02
	BRA UNKNOWN_C20F9A_UNKNOWN4
UNKNOWN_C20F9A_UNKNOWN0:
	LDX $02
	LDA .LOWORD(GAME_STATE)+122,X
	AND #$00FF
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	TAY
	LDA a:.LOWORD(RAM)+14,Y
	AND #$00FF
	CMP #$0001
	BEQ UNKNOWN_C20F9A_UNKNOWN1
	LDA a:.LOWORD(RAM)+69,Y
	BNE UNKNOWN_C20F9A_UNKNOWN1
	LDA #$0001
	STA a:.LOWORD(RAM)+71,Y
UNKNOWN_C20F9A_UNKNOWN1:
	LDA a:.LOWORD(RAM)+67,Y
	BEQ UNKNOWN_C20F9A_UNKNOWN2
	LDA a:.LOWORD(RAM)+69,Y
	STA $0E
	TYA
	CLC
	ADC #$0047
	TAX
	LDA a:.LOWORD(RAM),X
	STA $04
	LDA $0E
	CMP $04
	BCC UNKNOWN_C20F9A_UNKNOWN2
	BEQ UNKNOWN_C20F9A_UNKNOWN2
	STA a:.LOWORD(RAM),X
UNKNOWN_C20F9A_UNKNOWN2:
	LDA a:.LOWORD(RAM)+73,Y
	BEQ UNKNOWN_C20F9A_UNKNOWN3
	LDA a:.LOWORD(RAM)+75,Y
	STA $0E
	TYA
	CLC
	ADC #$004D
	TAX
	LDA a:.LOWORD(RAM),X
	STA $04
	LDA $0E
	CMP $04
	BCC UNKNOWN_C20F9A_UNKNOWN3
	BEQ UNKNOWN_C20F9A_UNKNOWN3
	STA a:.LOWORD(RAM),X
UNKNOWN_C20F9A_UNKNOWN3:
	INC $02
UNKNOWN_C20F9A_UNKNOWN4:
	LDA .LOWORD(GAME_STATE)+game_state::player_controlled_party_count
	AND #$00FF
	STA $04
	LDA $02
	CMP $04
	BCS UNKNOWN_C20F9A_UNKNOWN5
	BEQ UNKNOWN_C20F9A_UNKNOWN5
	JMP a:.LOWORD(UNKNOWN_C20F9A_UNKNOWN0)
UNKNOWN_C20F9A_UNKNOWN5:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA $9696
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

UNKNOWN_C21034: ;$C21034
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDY #$0000
	STY $0E
	BRA UNKNOWN_C21034_UNKNOWN3
UNKNOWN_C21034_UNKNOWN0:
	LDA .LOWORD(GAME_STATE)+122,Y
	AND #$00FF
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	TAX
	LDA a:.LOWORD(RAM)+67,X
	BNE UNKNOWN_C21034_UNKNOWN1
	LDA a:.LOWORD(RAM)+73,X
	BNE UNKNOWN_C21034_UNKNOWN1
	LDA a:.LOWORD(RAM)+69,X
	CMP a:.LOWORD(RAM)+71,X
	BNE UNKNOWN_C21034_UNKNOWN1
	LDA a:.LOWORD(RAM)+75,X
	CMP a:.LOWORD(RAM)+77,X
	BEQ UNKNOWN_C21034_UNKNOWN2
UNKNOWN_C21034_UNKNOWN1:
	LDA #$0000
	BRA UNKNOWN_C21034_UNKNOWN4
UNKNOWN_C21034_UNKNOWN2:
	LDY $0E
	INY
	STY $0E
UNKNOWN_C21034_UNKNOWN3:
	LDA .LOWORD(GAME_STATE)+game_state::player_controlled_party_count
	AND #$00FF
	STA $02
	TYA
	CMP $02
	BCC UNKNOWN_C21034_UNKNOWN0
	LDA #$0001
UNKNOWN_C21034_UNKNOWN4:
	PLD
	RTL

UNKNOWN_C2108C: ;$C2108C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL UNKNOWN_C21034
	CMP #$0000
	BEQ UNKNOWN_C2108C_UNKNOWN0
	SEP #PROC_FLAGS::ACCUM8
	STZ $9696
UNKNOWN_C2108C_UNKNOWN0:
	REP #PROC_FLAGS::ACCUM8
	RTL

HP_PP_ROLLER: ;$C2109F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEC
	TCD
	LDA .LOWORD(UNKNOWN_7E9697)
	AND #$00FF
	BEQ HP_PP_ROLLER_UNKNOWN0
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN30)
HP_PP_ROLLER_UNKNOWN0:
	LDA a:.LOWORD(UNKNOWN_7E0002)
	AND #$00FF
	AND #$0003
	TAX
	LDA .LOWORD(GAME_STATE)+122,X
	AND #$00FF
	BNE HP_PP_ROLLER_UNKNOWN1
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN30)
HP_PP_ROLLER_UNKNOWN1:
	AND #$00FF
	STA $12
	CLC
	SBC #$0004
	BVS HP_PP_ROLLER_UNKNOWN2
	BMI HP_PP_ROLLER_UNKNOWN3
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN30)
HP_PP_ROLLER_UNKNOWN2:
	BPL HP_PP_ROLLER_UNKNOWN3
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN30)
HP_PP_ROLLER_UNKNOWN3:
	LDA $12
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	STA $10
	LDA $9698
	BNE HP_PP_ROLLER_UNKNOWN4
	LDA $10
	CLC
	ADC #$0043
	TAX
	STX $0E
	LDA a:.LOWORD(RAM),X
	AND #$0001
	BNE HP_PP_ROLLER_UNKNOWN4
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN14)
HP_PP_ROLLER_UNKNOWN4:
	LDA $10
	TAX
	LDY a:.LOWORD(RAM)+69,X
	TAX
	LDA a:.LOWORD(RAM)+71,X
	STA $02
	TYA
	CMP $02
	BCS HP_PP_ROLLER_UNKNOWN9
	LDA $10
	CLC
	ADC #$0043
	TAX
	TXY
	STY $0E
	LDA $9696
	AND #$00FF
	BNE HP_PP_ROLLER_UNKNOWN5
	LDA $9698
	BEQ HP_PP_ROLLER_UNKNOWN6
HP_PP_ROLLER_UNKNOWN5:
	LDA #$4000
	STA $06
	LDA #$0006
	STA $08
	BRA HP_PP_ROLLER_UNKNOWN7
HP_PP_ROLLER_UNKNOWN6:
	JSR a:.LOWORD(UNKNOWN_C20F58)
HP_PP_ROLLER_UNKNOWN7:
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	LDY $0E
	LDA a:.LOWORD(RAM),Y
	STA $06
	LDA a:.LOWORD(RAM)+2,Y
	STA $08
	CLC
	LDA $06
	ADC $0A
	STA $06
	LDA $08
	ADC $0C
	STA $08
	LDA $06
	STA a:.LOWORD(RAM),Y
	LDA $08
	STA a:.LOWORD(RAM)+2,Y
	LDA $10
	CLC
	ADC #$0045
	TAX
	LDA a:.LOWORD(RAM),X
	CMP $02
	BCS HP_PP_ROLLER_UNKNOWN8
	BEQ HP_PP_ROLLER_UNKNOWN8
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN15)
HP_PP_ROLLER_UNKNOWN8:
	LDA $02
	STA a:.LOWORD(RAM),X
	LDA $10
	TAX
	LDA #$0001
	STA a:.LOWORD(RAM)+67,X
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN15)
HP_PP_ROLLER_UNKNOWN9:
	TYA
	CMP $02
	BNE HP_PP_ROLLER_UNKNOWN10
	LDA $10
	CLC
	ADC #$0043
	TAX
	LDA a:.LOWORD(RAM),X
	CMP #$0001
	BNE HP_PP_ROLLER_UNKNOWN10
	LDA #$0000
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN15)
HP_PP_ROLLER_UNKNOWN10:
	LDA $10
	CLC
	ADC #$0043
	TAX
	TXY
	STY $0E
	LDA $9698
	BEQ HP_PP_ROLLER_UNKNOWN11
	LDA #$4000
	STA $06
	LDA #$0006
	STA $08
	BRA HP_PP_ROLLER_UNKNOWN12
HP_PP_ROLLER_UNKNOWN11:
	JSR a:.LOWORD(UNKNOWN_C20F58)
HP_PP_ROLLER_UNKNOWN12:
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	LDY $0E
	LDA a:.LOWORD(RAM),Y
	STA $06
	LDA a:.LOWORD(RAM)+2,Y
	STA $08
	SEC
	LDA $06
	SBC $0A
	STA $06
	LDA $08
	SBC $0C
	STA $08
	LDA $06
	STA a:.LOWORD(RAM),Y
	LDA $08
	STA a:.LOWORD(RAM)+2,Y
	LDA $10
	TAX
	LDY a:.LOWORD(RAM)+69,X
	TYA
	CMP $02
	BCC HP_PP_ROLLER_UNKNOWN13
	CPY #$03E8
	BCC HP_PP_ROLLER_UNKNOWN15
	BEQ HP_PP_ROLLER_UNKNOWN15
HP_PP_ROLLER_UNKNOWN13:
	LDA $10
	TAX
	LDA $02
	STA a:.LOWORD(RAM)+69,X
	LDA $10
	TAX
	LDA #$0001
	STA a:.LOWORD(RAM)+67,X
	BRA HP_PP_ROLLER_UNKNOWN15
HP_PP_ROLLER_UNKNOWN14:
	LDA $10
	PHA
	TAX
	LDA a:.LOWORD(RAM)+69,X
	PLX
	CMP a:.LOWORD(RAM)+71,X
	BEQ HP_PP_ROLLER_UNKNOWN15
	LDA #$0001
	LDX $0E
	STA a:.LOWORD(RAM),X
HP_PP_ROLLER_UNKNOWN15:
	LDA $9698
	BNE HP_PP_ROLLER_UNKNOWN16
	LDA $10
	CLC
	ADC #$0049
	TAX
	STX $0E
	LDA a:.LOWORD(RAM),X
	AND #$0001
	BNE HP_PP_ROLLER_UNKNOWN16
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN25)
HP_PP_ROLLER_UNKNOWN16:
	LDA $10
	TAX
	LDY a:.LOWORD(RAM)+75,X
	TAX
	LDA a:.LOWORD(RAM)+77,X
	STA $02
	TYA
	CMP $02
	BCS HP_PP_ROLLER_UNKNOWN20
	LDA $10
	CLC
	ADC #$0049
	TAX
	TXY
	LDA $9698
	BEQ HP_PP_ROLLER_UNKNOWN17
	LDA #$4000
	STA $06
	LDA #$0006
	STA $08
	BRA HP_PP_ROLLER_UNKNOWN18
HP_PP_ROLLER_UNKNOWN17:
	LDA #$9000
	STA $06
	LDA #$0001
	STA $08
HP_PP_ROLLER_UNKNOWN18:
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	LDA a:.LOWORD(RAM),Y
	STA $06
	LDA a:.LOWORD(RAM)+2,Y
	STA $08
	CLC
	LDA $06
	ADC $0A
	STA $06
	LDA $08
	ADC $0C
	STA $08
	LDA $06
	STA a:.LOWORD(RAM),Y
	LDA $08
	STA a:.LOWORD(RAM)+2,Y
	LDA $10
	CLC
	ADC #$004B
	TAX
	LDA a:.LOWORD(RAM),X
	CMP $02
	BCS HP_PP_ROLLER_UNKNOWN19
	BEQ HP_PP_ROLLER_UNKNOWN19
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN26)
HP_PP_ROLLER_UNKNOWN19:
	LDA $02
	STA a:.LOWORD(RAM),X
	LDA $10
	TAX
	LDA #$0001
	STA a:.LOWORD(RAM)+73,X
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN26)
HP_PP_ROLLER_UNKNOWN20:
	TYA
	CMP $02
	BNE HP_PP_ROLLER_UNKNOWN21
	LDA $10
	CLC
	ADC #$0049
	TAX
	LDA a:.LOWORD(RAM),X
	CMP #$0001
	BNE HP_PP_ROLLER_UNKNOWN21
	LDA #$0000
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(HP_PP_ROLLER_UNKNOWN26)
HP_PP_ROLLER_UNKNOWN21:
	LDA $10
	CLC
	ADC #$0049
	TAX
	TXY
	LDA $9698
	BEQ HP_PP_ROLLER_UNKNOWN22
	LDA #$4000
	STA $06
	LDA #$0006
	STA $08
	BRA HP_PP_ROLLER_UNKNOWN23
HP_PP_ROLLER_UNKNOWN22:
	LDA #$9000
	STA $06
	LDA #$0001
	STA $08
HP_PP_ROLLER_UNKNOWN23:
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	LDA a:.LOWORD(RAM),Y
	STA $06
	LDA a:.LOWORD(RAM)+2,Y
	STA $08
	SEC
	LDA $06
	SBC $0A
	STA $06
	LDA $08
	SBC $0C
	STA $08
	LDA $06
	STA a:.LOWORD(RAM),Y
	LDA $08
	STA a:.LOWORD(RAM)+2,Y
	LDA $10
	TAX
	LDY a:.LOWORD(RAM)+75,X
	TYA
	CMP $02
	BCC HP_PP_ROLLER_UNKNOWN24
	CPY #$03E8
	BCC HP_PP_ROLLER_UNKNOWN26
	BEQ HP_PP_ROLLER_UNKNOWN26
HP_PP_ROLLER_UNKNOWN24:
	LDA $10
	TAX
	LDA $02
	STA a:.LOWORD(RAM)+75,X
	LDA $10
	TAX
	LDA #$0001
	STA a:.LOWORD(RAM)+73,X
	BRA HP_PP_ROLLER_UNKNOWN26
HP_PP_ROLLER_UNKNOWN25:
	LDA $10
	PHA
	TAX
	LDA a:.LOWORD(RAM)+75,X
	PLX
	CMP a:.LOWORD(RAM)+77,X
	BEQ HP_PP_ROLLER_UNKNOWN26
	LDA #$0001
	LDX $0E
	STA a:.LOWORD(RAM),X
HP_PP_ROLLER_UNKNOWN26:
	LDA $9698
	BEQ HP_PP_ROLLER_UNKNOWN30
	LDA $10
	TAX
	LDY a:.LOWORD(RAM)+69,X
	CPY #$03E7
	BNE HP_PP_ROLLER_UNKNOWN27
	TAX
	LDA #$0001
	STA a:.LOWORD(RAM)+71,X
	BRA HP_PP_ROLLER_UNKNOWN28
HP_PP_ROLLER_UNKNOWN27:
	CPY #$0001
	BNE HP_PP_ROLLER_UNKNOWN28
	TAX
	LDA #$03E7
	STA a:.LOWORD(RAM)+71,X
HP_PP_ROLLER_UNKNOWN28:
	LDA $10
	TAX
	LDY a:.LOWORD(RAM)+75,X
	CPY #$03E7
	BNE HP_PP_ROLLER_UNKNOWN29
	TAX
	STZ a:.LOWORD(RAM)+77,X
	BRA HP_PP_ROLLER_UNKNOWN30
HP_PP_ROLLER_UNKNOWN29:
	CPY #$0000
	BNE HP_PP_ROLLER_UNKNOWN30
	TAX
	LDA #$03E7
	STA a:.LOWORD(RAM)+77,X
HP_PP_ROLLER_UNKNOWN30:
	PLD
	RTL

UNKNOWN_C213AC: ;$C213AC
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFDE
	TCD
	LDA $89C9
	AND #$00FF
	BNE UNKNOWN_C213AC_UNKNOWN0
	JMP a:.LOWORD(UNKNOWN_C213AC_UNKNOWN22)
UNKNOWN_C213AC_UNKNOWN0:
	LDA a:.LOWORD(UNKNOWN_7E0002)
	AND #$00FF
	AND #$0003
	STA $20
	LDY #$986F
	LDA ($20),Y
	AND #$00FF
	BNE UNKNOWN_C213AC_UNKNOWN1
	JMP a:.LOWORD(UNKNOWN_C213AC_UNKNOWN22)
UNKNOWN_C213AC_UNKNOWN1:
	AND #$00FF
	CLC
	SBC #$0004
	BVS UNKNOWN_C213AC_UNKNOWN2
	BMI UNKNOWN_C213AC_UNKNOWN3
	JMP a:.LOWORD(UNKNOWN_C213AC_UNKNOWN22)
UNKNOWN_C213AC_UNKNOWN2:
	BPL UNKNOWN_C213AC_UNKNOWN3
	JMP a:.LOWORD(UNKNOWN_C213AC_UNKNOWN22)
UNKNOWN_C213AC_UNKNOWN3:
	LDY $20
	SEP #PROC_FLAGS::INDEX8
	LDA .LOWORD(UNKNOWN_7E9647)
	JSL ASR8_UNKNOWN1
	AND #$0001
	BNE UNKNOWN_C213AC_UNKNOWN4
	JMP a:.LOWORD(UNKNOWN_C213AC_UNKNOWN22)
UNKNOWN_C213AC_UNKNOWN4:
	LDA .LOWORD(PSI_WINDOW_CHARACTER)
	CMP $20
	BNE UNKNOWN_C213AC_UNKNOWN5
	LDA #$0012
	BRA UNKNOWN_C213AC_UNKNOWN6
UNKNOWN_C213AC_UNKNOWN5:
	LDA #$0013
UNKNOWN_C213AC_UNKNOWN6:
	ASL
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC #$0060
	STA $02
	LDA .LOWORD(GAME_STATE)+game_state::player_controlled_party_count
	AND #$00FF
	STA $04
	ASL
	ADC $04
	ASL
	ADC $04
	PHA
	ASL
	PLA
	ROR
	STA $04
	LDA #$0010
	SEC
	SBC $04
	CLC
	ADC $02
	INC
	INC
	INC
	STA $1E
	LDA $20
	STA $04
	ASL
	ADC $04
	ASL
	ADC $04
	STA $02
	LDA $1E
	CLC
	ADC $02
	STA $1C
	ASL
	CLC
	ADC #$7DFE
	STA $04
	STA $1A
	LDA $1C
	CLC
	ADC #$7C00
	STA $1C
	REP #PROC_FLAGS::INDEX8
	LDY #$986F
	LDA ($20),Y
	AND #$00FF
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	STA $18
	LDY #$0043
	LDA ($18),Y
	STA $16
	AND #$0001
	BNE UNKNOWN_C213AC_UNKNOWN7
	JMP a:.LOWORD(UNKNOWN_C213AC_UNKNOWN13)
UNKNOWN_C213AC_UNKNOWN7:
	LDA $16
	TAY
	STY $14
	LDY #$0045
	LDA ($18),Y
	TAX
	LDA $20
	LDY $14
	JSR a:.LOWORD(UNKNOWN_C20F08)
	LDA $20
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	ASL
	CLC
	ADC #$8969
	STA $02
	LDA .LOWORD(UNKNOWN_7E9624)
	AND #$00FF
	BNE UNKNOWN_C213AC_UNKNOWN8
	LDA #$007E
	STA $0E
	LDA $1C
	STA $10
	LDY $02
	LDX #$0006
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616_ENTRY_B
	.A16
	LDA #$007E
	STA $0E
	LDA $1C
	CLC
	ADC #$0020
	STA $10
	LDA $02
	CLC
	ADC #$0006
	TAY
	LDX #$0006
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616_ENTRY_B
	.A16
UNKNOWN_C213AC_UNKNOWN8:
	LDY $02
	LDX #$0000
	STX $1E
	BRA UNKNOWN_C213AC_UNKNOWN10
UNKNOWN_C213AC_UNKNOWN9:
	LDA a:.LOWORD(RAM),Y
	LDX $1A
	STX $04
	STA a:.LOWORD(RAM),X
	INY
	INY
	INC $04
	INC $04
	LDA $04
	STA $1A
	LDX $1E
	INX
	STX $1E
UNKNOWN_C213AC_UNKNOWN10:
	CPX #$0003
	BNE UNKNOWN_C213AC_UNKNOWN9
	LDA $1A
	STA $04
	CLC
	ADC #$003A
	STA $1E
	LDX #$0000
	STX $14
	BRA UNKNOWN_C213AC_UNKNOWN12
UNKNOWN_C213AC_UNKNOWN11:
	TAX
	LDA a:.LOWORD(RAM),Y
	STA a:.LOWORD(RAM),X
	INY
	INY
	LDA $1E
	INC
	INC
	STA $1E
	LDX $14
	INX
	STX $14
UNKNOWN_C213AC_UNKNOWN12:
	CPX #$0003
	BNE UNKNOWN_C213AC_UNKNOWN11
	CLC
	ADC #$003A
	STA $04
	STA $1A
	BRA UNKNOWN_C213AC_UNKNOWN14
UNKNOWN_C213AC_UNKNOWN13:
	LDA $04
	CLC
	ADC #$0080
	STA $04
	STA $1A
UNKNOWN_C213AC_UNKNOWN14:
	LDY #$0049
	LDA ($18),Y
	STA $16
	AND #$0001
	BNE UNKNOWN_C213AC_UNKNOWN15
	JMP a:.LOWORD(UNKNOWN_C213AC_UNKNOWN21)
UNKNOWN_C213AC_UNKNOWN15:
	.A16
	LDA $16
	STA $0E
	LDY #$004B
	LDA ($18),Y
	TAY
	LDA $18
	CLC
	ADC #$000E
	TAX
	LDA $20
	JSR a:.LOWORD(UNKNOWN_C20F26)
	LDA $20
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	ASL
	CLC
	ADC #$8975
	STA $02
	LDA .LOWORD(UNKNOWN_7E9624)
	AND #$00FF
	BNE UNKNOWN_C213AC_UNKNOWN16
	LDA #$007E
	STA $0E
	LDA $1C
	CLC
	ADC #$0040
	STA $10
	LDY $02
	LDX #$0006
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616_ENTRY_B
	.A16
	LDA #$007E
	STA $0E
	LDA $1C
	CLC
	ADC #$0060
	STA $10
	LDA $02
	CLC
	ADC #$0006
	TAY
	LDX #$0006
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616_ENTRY_B
	.A16
UNKNOWN_C213AC_UNKNOWN16:
	LDA $02
	STA $12
	LDX #$0000
	STX $1E
	BRA UNKNOWN_C213AC_UNKNOWN18
UNKNOWN_C213AC_UNKNOWN17:
	TAX
	LDA a:.LOWORD(RAM),X
	LDX $1A
	STX $04
	STA a:.LOWORD(RAM),X
	LDA $12
	INC
	INC
	STA $12
	INC $04
	INC $04
	LDX $04
	STX $1A
	LDX $1E
	INX
	STX $1E
UNKNOWN_C213AC_UNKNOWN18:
	CPX #$0003
	BNE UNKNOWN_C213AC_UNKNOWN17
	LDA $1A
	STA $04
	CLC
	ADC #$003A
	TAY
	LDX #$0000
	STX $1E
	BRA UNKNOWN_C213AC_UNKNOWN20
UNKNOWN_C213AC_UNKNOWN19:
	LDA $12
	TAX
	LDA a:.LOWORD(RAM),X
	STA a:.LOWORD(RAM),Y
	LDA $12
	INC
	INC
	STA $12
	INY
	INY
	LDX $1E
	INX
	STX $1E
UNKNOWN_C213AC_UNKNOWN20:
	CPX #$0003
	BNE UNKNOWN_C213AC_UNKNOWN19
UNKNOWN_C213AC_UNKNOWN21:
	LDA .LOWORD(UNKNOWN_7E9624)
	AND #$00FF
	BEQ UNKNOWN_C213AC_UNKNOWN22
	SEP #PROC_FLAGS::ACCUM8
	STZ .LOWORD(UNKNOWN_7E9624)
UNKNOWN_C213AC_UNKNOWN22:
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8
	PLD
	RTL

GET_EVENT_FLAG: ;$C21628
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	DEC
	STA $0E
	LSR
	LSR
	LSR
	PHA
	LDY #$0008
	LDA $0E
	JSL MODULUS16
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:POWERS_OF_TWO_8BIT,X
	PLX
	AND .LOWORD(EVENT_FLAG),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BEQ UNKNOWN0
	LDA #$0001
	BRA UNKNOWN1
UNKNOWN0:
	LDA #$0000
UNKNOWN1:
	PLD
	RTL

SET_EVENT_FLAG: ;$C2165E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEC
	TCD
	PLA
	TXY
	STY $12
	TAX
	DEC
	STA $10
	LSR
	LSR
	LSR
	CLC
	ADC #$9C08
	TAX
	STX $0E
	LDY #$0008
	LDA $10
	JSL MODULUS16
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:POWERS_OF_TWO_8BIT,X
	LDY $12
	BEQ SET_EVENT_FLAG_UNKNOWN0
	STA $00
	LDX $0E
	LDA a:.LOWORD(RAM),X
	ORA $00
	BRA SET_EVENT_FLAG_UNKNOWN1
SET_EVENT_FLAG_UNKNOWN0:
	EOR #$00FF
	STA $00
	LDX $0E
	LDA a:.LOWORD(RAM),X
	AND $00
SET_EVENT_FLAG_UNKNOWN1:
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	PLD
	RTL

UNKNOWN_C216AD: ;$C216AD
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	STX $0E
	TXA
	JSL CHANGE_MUSIC
	LDX $0E
	STX .LOWORD(UNKNOWN_7E5DD4)
	STX .LOWORD(UNKNOWN_7E5DD6)
	PLD
	RTL

REDIRECT_STOP_MUSIC: ;$C216C9
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL STOP_MUSIC
	RTL

PLAY_SOUND_AND_UNKNOWN: ;$C216D0
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL PLAY_SOUND
	JSL UNKNOWN_C12E42
	RTL

UNKNOWN_C216DB: ;$C216DB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE7
	TCD
	SEP #PROC_FLAGS::ACCUM8
	STZ $18
	STZ $17
	JMP a:.LOWORD(UNKNOWN_C216DB_UNKNOWN9)
UNKNOWN_C216DB_UNKNOWN0:
	REP #PROC_FLAGS::ACCUM8
	LDA $17
	AND #$00FF
	TAX
	LDA .LOWORD(GAME_STATE)+122,X
	AND #$00FF
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	TAX
	STX $15
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA $01
	JMP a:.LOWORD(UNKNOWN_C216DB_UNKNOWN5)
UNKNOWN_C216DB_UNKNOWN1:
	.A16
	LOADPTR ITEM_CONFIGURATION_TABLE, $06
	LDA $06
	STA $11
	LDA $08
	STA $13
	LDA $00
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	STA $0F
	CLC
	ADC #item::type
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	AND #$00FF
	CMP #$0004
	BNE UNKNOWN_C216DB_UNKNOWN4
	LDA $18
	AND #$00FF
	BEQ UNKNOWN_C216DB_UNKNOWN3
	LDA $0F
	CLC
	ADC #$0021
	CLC
	ADC $06
	STA $06
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	STA $00
	REP #PROC_FLAGS::ACCUM8
	LDA $18
	AND #$00FF
	LDY #$0027
	JSL MULT168
	CLC
	ADC #$0021
	LDX $11
	STX $06
	LDX $13
	STX $08
	CLC
	ADC $06
	STA $06
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	CLC
	SBC $00
	BVC UNKNOWN_C216DB_UNKNOWN2
	BPL UNKNOWN_C216DB_UNKNOWN4
	BRA UNKNOWN_C216DB_UNKNOWN3
UNKNOWN_C216DB_UNKNOWN2:
	BMI UNKNOWN_C216DB_UNKNOWN4
UNKNOWN_C216DB_UNKNOWN3:
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA $00
	STA $18
UNKNOWN_C216DB_UNKNOWN4:
	SEP #PROC_FLAGS::ACCUM8
	INC $01
UNKNOWN_C216DB_UNKNOWN5:
	REP #PROC_FLAGS::ACCUM8
	LDA $01
	AND #$00FF
	STA $02
	LDA #$000E
	CLC
	SBC $02
	BVC UNKNOWN_C216DB_UNKNOWN6
	BPL UNKNOWN_C216DB_UNKNOWN8
	BRA UNKNOWN_C216DB_UNKNOWN7
UNKNOWN_C216DB_UNKNOWN6:
	BMI UNKNOWN_C216DB_UNKNOWN8
UNKNOWN_C216DB_UNKNOWN7:
	LDX $15
	TXA
	CLC
	ADC $02
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+35,X
	STA $00
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	LDA $00
	AND #$00FF
	BEQ UNKNOWN_C216DB_UNKNOWN8
	JMP a:.LOWORD(UNKNOWN_C216DB_UNKNOWN1)
UNKNOWN_C216DB_UNKNOWN8:
	SEP #PROC_FLAGS::ACCUM8
	INC $17
UNKNOWN_C216DB_UNKNOWN9:
	LDA .LOWORD(GAME_STATE)+game_state::player_controlled_party_count
	CMP $17
	BEQ UNKNOWN_C216DB_UNKNOWN10
	BCC UNKNOWN_C216DB_UNKNOWN10
	JMP a:.LOWORD(UNKNOWN_C216DB_UNKNOWN0)
UNKNOWN_C216DB_UNKNOWN10:
	REP #PROC_FLAGS::ACCUM8
	LDA $18
	AND #$00FF
	BEQ UNKNOWN_C216DB_UNKNOWN11
	LOADPTR ITEM_CONFIGURATION_TABLE, $06
	LDA $18
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	CLC
	ADC #item::strength
	CLC
	ADC $06
	STA $06
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	JSL UNKNOWN_C2239D
	CMP #$0000
	BNE UNKNOWN_C216DB_UNKNOWN12
	LDA #PARTY_MEMBER::TEDDY_BEAR
	JSL REMOVE_CHAR_FROM_PARTY
	LDA #PARTY_MEMBER::PLUSH_TEDDY_BEAR
	JSL REMOVE_CHAR_FROM_PARTY
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	JSL ADD_CHAR_TO_PARTY
	BRA UNKNOWN_C216DB_UNKNOWN12
UNKNOWN_C216DB_UNKNOWN11:
	LDA #PARTY_MEMBER::TEDDY_BEAR
	JSL REMOVE_CHAR_FROM_PARTY
	LDA #PARTY_MEMBER::PLUSH_TEDDY_BEAR
	JSL REMOVE_CHAR_FROM_PARTY
UNKNOWN_C216DB_UNKNOWN12:
	PLD
	RTL

RECALC_CHARACTER_POSTMATH_OFFENSE: ;$C21857
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE9
	TCD
	PLA
	TAX
	DEC
	STA $02
	STA $15
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::base_offense,X
	AND #$00FF
	TAY
	STY $13
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::WEAPON,X
	AND #$00FF
	STA $11
	BEQ RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN1
	LDX #$0000
	STX $0F
	LDA $02
	CMP #$0003
	BNE RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN0
	LDX #$0001
	STX $0F
RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN0:
	LDA $11
	DEC
	PHA
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::items
	PLY
	STY $02
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	LDX $0F
	STX $02
	CLC
	ADC $02
	CLC
	ADC #item::strength
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:ITEM_CONFIGURATION_TABLE,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	STA $04
	LDY $13
	TYA
	CLC
	ADC $04
	TAY
RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN1:
	STY $04
	LDA #$0000
	CLC
	SBC $04
	BVC RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN2
	BPL RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN4
	BRA RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN3
RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN2:
	BMI RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN4
RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN3:
	LDX #$0000
	BRA RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN8
RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN4:
	TYA
	CLC
	SBC #$00FF
	BVC RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN5
	BPL RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN7
	BRA RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN6
RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN5:
	BMI RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN7
RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN6:
	LDX #$00FF
	BRA RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN8
RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN7:
	TYA
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	TAX
RECALC_CHARACTER_POSTMATH_OFFENSE_UNKNOWN8:
	TXA
	SEP #PROC_FLAGS::ACCUM8
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	LDA $15
	STA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA .LOWORD(CHAR_STRUCT)+char_struct::offense,X
	PLD
	RTL

RECALC_CHARACTER_POSTMATH_DEFENSE: ;$C2192B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEB
	TCD
	PLA
	TAX
	DEC
	STA $02
	STA $13
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::base_defense,X
	AND #$00FF
	TAY
	STY $11
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::BODY,X
	AND #$00FF
	TAX
	BEQ RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN1
	LDA #$0000
	STA $0F
	LDA $02
	CMP #$0003
	BNE RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN0
	LDA #$0001
	STA $0F
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN0:
	LDA $0F
	PHA
	TXA
	DEC
	PHA
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::items
	PLY
	STY $02
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	PLY
	STY $02
	CLC
	ADC $02
	CLC
	ADC #item::strength
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:ITEM_CONFIGURATION_TABLE,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	STA $04
	LDY $11
	TYA
	CLC
	ADC $04
	TAY
	STY $11
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN1:
	LDA $13
	STA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS,X
	AND #$00FF
	TAX
	BEQ RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN3
	LDA #$0000
	STA $0F
	LDA $02
	CMP #$0003
	BNE RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN2
	LDA #$0001
	STA $0F
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN2:
	LDA $0F
	PHA
	TXA
	DEC
	PHA
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::items
	PLY
	STY $02
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	PLY
	STY $02
	CLC
	ADC $02
	CLC
	ADC #item::strength
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:ITEM_CONFIGURATION_TABLE,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	STA $04
	LDY $11
	TYA
	CLC
	ADC $04
	TAY
	STY $11
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN3:
	LDA $13
	STA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER,X
	AND #$00FF
	TAX
	BEQ RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN5
	LDA #$0000
	STA $0F
	LDA $02
	CMP #$0003
	BNE RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN4
	LDA #$0001
	STA $0F
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN4:
	LDA $0F
	PHA
	TXA
	DEC
	PHA
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::items
	PLY
	STY $02
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	PLY
	STY $02
	CLC
	ADC $02
	CLC
	ADC #item::strength
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:ITEM_CONFIGURATION_TABLE,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	STA $04
	LDY $11
	TYA
	CLC
	ADC $04
	TAY
	STY $11
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN5:
	LDY $11
	STY $04
	LDA #$0000
	CLC
	SBC $04
	BVC RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN6
	BPL RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN8
	BRA RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN7
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN6:
	BMI RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN8
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN7:
	LDA #$0000
	BRA RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN12
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN8:
	TYA
	CLC
	SBC #$00FF
	BVC RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN9
	BPL RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN11
	BRA RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN10
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN9:
	BMI RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN11
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN10:
	LDA #$00FF
	BRA RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN12
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN11:
	TYA
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
RECALC_CHARACTER_POSTMATH_DEFENSE_UNKNOWN12:
	SEP #PROC_FLAGS::ACCUM8
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	LDA $13
	STA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA .LOWORD(CHAR_STRUCT)+char_struct::defense,X
	PLD
	RTL

RECALC_CHARACTER_POSTMATH_SPEED: ;$C21AEB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEB
	TCD
	PLA
	TAX
	DEC
	STA $02
	STA $13
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::base_speed,X
	AND #$00FF
	TAY
	STY $11
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::BODY,X
	AND #$00FF
	BEQ RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN0
	DEC
	STA $02
	TXA
	CLC
	ADC #.LOWORD(CHAR_STRUCT) + char_struct::items
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	CLC
	ADC #item::ep
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:ITEM_CONFIGURATION_TABLE,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	STA $04
	LDY $11
	TYA
	CLC
	ADC $04
	TAY
	STY $11
RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN0:
	LDA $13
	STA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::boosted_speed,X
	AND #$00FF
	STA $04
	LDY $11
	TYA
	CLC
	ADC $04
	STA $0F
	STA $04
	LDA #$0000
	CLC
	SBC $04
	BVC RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN1
	BPL RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN3
	BRA RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN2
RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN1:
	BMI RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN3
RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN2:
	LDX #$0000
	BRA RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN4
RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN3:
	LDA $0F
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	TAX
RECALC_CHARACTER_POSTMATH_SPEED_UNKNOWN4:
	TXA
	SEP #PROC_FLAGS::ACCUM8
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA .LOWORD(CHAR_STRUCT)+char_struct::speed,X
	PLD
	RTL

RECALC_CHARACTER_POSTMATH_GUTS: ;$C21BA4
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEB
	TCD
	PLA
	TAX
	DEC
	STA $02
	STA $13
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::base_guts,X
	AND #$00FF
	TAY
	STY $11
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::WEAPON,X
	AND #$00FF
	BEQ RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN0
	DEC
	STA $02
	TXA
	CLC
	ADC #.LOWORD(CHAR_STRUCT) + char_struct::items
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	CLC
	ADC #item::ep
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:ITEM_CONFIGURATION_TABLE,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	STA $04
	LDY $11
	TYA
	CLC
	ADC $04
	TAY
	STY $11
RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN0:
	LDA $13
	STA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::boosted_guts,X
	AND #$00FF
	STA $04
	LDY $11
	TYA
	CLC
	ADC $04
	STA $0F
	STA $04
	LDA #$0000
	CLC
	SBC $04
	BVC RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN1
	BPL RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN3
	BRA RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN2
RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN1:
	BMI RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN3
RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN2:
	LDX #$0000
	BRA RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN4
RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN3:
	LDA $0F
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	TAX
RECALC_CHARACTER_POSTMATH_GUTS_UNKNOWN4:
	TXA
	SEP #PROC_FLAGS::ACCUM8
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA .LOWORD(CHAR_STRUCT)+char_struct::guts,X
	PLD
	RTL

RECALC_CHARACTER_POSTMATH_LUCK: ;$C21C5D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEB
	TCD
	PLA
	TAX
	DEC
	STA $02
	STA $13
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::base_luck,X
	AND #$00FF
	TAY
	STY $11
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS,X
	AND #$00FF
	BEQ RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN0
	DEC
	STA $02
	TXA
	CLC
	ADC #.LOWORD(CHAR_STRUCT) + char_struct::items
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	CLC
	ADC #item::ep
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:ITEM_CONFIGURATION_TABLE,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	STA $04
	LDY $11
	TYA
	CLC
	ADC $04
	TAY
	STY $11
RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN0:
	LDA $13
	STA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER,X
	AND #$00FF
	BEQ RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN1
	DEC
	STA $02
	TXA
	CLC
	ADC #.LOWORD(CHAR_STRUCT) + char_struct::items
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	CLC
	ADC #item::ep
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:ITEM_CONFIGURATION_TABLE,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	STA $04
	LDY $11
	TYA
	CLC
	ADC $04
	TAY
	STY $11
RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN1:
	LDA $13
	STA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::boosted_luck,X
	AND #$00FF
	STA $04
	LDY $11
	TYA
	CLC
	ADC $04
	STA $0F
	STA $04
	LDA #$0000
	CLC
	SBC $04
	BVC RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN2
	BPL RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN4
	BRA RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN3
RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN2:
	BMI RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN4
RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN3:
	LDX #$0000
	BRA RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN5
RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN4:
	LDA $0F
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	TAX
RECALC_CHARACTER_POSTMATH_LUCK_UNKNOWN5:
	TXA
	SEP #PROC_FLAGS::ACCUM8
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	LDA $02
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA .LOWORD(CHAR_STRUCT)+char_struct::luck,X
	PLD
	RTL

RECALC_CHARACTER_POSTMATH_VITALITY: ;$C21D65
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CHAR_STRUCT)+char_struct::base_vitality,X
	CLC
	ADC .LOWORD(CHAR_STRUCT)+char_struct::boosted_vitality,X
	STA .LOWORD(CHAR_STRUCT)+char_struct::vitality,X
	RTL

RECALC_CHARACTER_POSTMATH_IQ: ;$C21D7D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CHAR_STRUCT)+char_struct::base_iq,X
	CLC
	ADC .LOWORD(CHAR_STRUCT)+char_struct::boosted_iq,X
	STA .LOWORD(CHAR_STRUCT)+char_struct::iq,X
	RTL

.INCLUDE "battle/recalc_character_miss_rate.asm"

.INCLUDE "battle/calc_resistances.asm"

INCREASE_WALLET_BALANCE: ;$C22214
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF2
	TCD
	LDA $1C
	STA $06
	LDA $1E
	STA $08
	LDA .LOWORD(GAME_STATE)+game_state::money_carried
	STA $0A
	LDA .LOWORD(GAME_STATE)+game_state::money_carried+2
	STA $0C
	CLC
	LDA $0A
	ADC $06
	STA $0A
	LDA $0C
	ADC $08
	STA $0C
	LDA #$869F
	STA $06
	LDA #$0001
	STA $08
	CLC
	LDA $0A
	SBC $06
	LDA $0C
	SBC $08
	BVS INCREASE_WALLET_BALANCE_UNKNOWN0
	BPL INCREASE_WALLET_BALANCE_UNKNOWN2
	BRA INCREASE_WALLET_BALANCE_UNKNOWN1
INCREASE_WALLET_BALANCE_UNKNOWN0:
	BMI INCREASE_WALLET_BALANCE_UNKNOWN2
INCREASE_WALLET_BALANCE_UNKNOWN1:
	LDA $0A
	STA $06
	LDA $0C
	STA $08
INCREASE_WALLET_BALANCE_UNKNOWN2:
	LDA $06
	STA .LOWORD(GAME_STATE)+game_state::money_carried
	LDA $08
	STA .LOWORD(GAME_STATE)+game_state::money_carried+2
	LDA $06
	STA $14
	LDA $08
	STA $16
	PLD
	RTL

DECREASE_WALLET_BALANCE: ;$C22272
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF2
	TCD
	LDA $1C
	STA $06
	LDA $1E
	STA $08
	LDY #.LOWORD(GAME_STATE)+game_state::money_carried
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	LDA a:.LOWORD(RAM),Y
	STA $06
	LDA a:.LOWORD(RAM)+2,Y
	STA $08
	SEC
	LDA $06
	SBC $0A
	STA $06
	LDA $08
	SBC $0C
	STA $08
	LDA #$0000
	STA $0A
	LDA #$0000
	STA $0C
	CLC
	LDA $0A
	SBC $06
	LDA $0C
	SBC $08
	BVC DECREASE_WALLET_BALANCE_UNKNOWN0
	BPL DECREASE_WALLET_BALANCE_UNKNOWN2
	BRA DECREASE_WALLET_BALANCE_UNKNOWN1
DECREASE_WALLET_BALANCE_UNKNOWN0:
	BMI DECREASE_WALLET_BALANCE_UNKNOWN2
DECREASE_WALLET_BALANCE_UNKNOWN1:
	LDA #$0001
	BRA DECREASE_WALLET_BALANCE_UNKNOWN3
DECREASE_WALLET_BALANCE_UNKNOWN2:
	LDA $06
	STA a:.LOWORD(RAM),Y
	LDA $08
	STA a:.LOWORD(RAM)+2,Y
	LDA #$0000
DECREASE_WALLET_BALANCE_UNKNOWN3:
	PLD
	RTL

UNKNOWN_C222D3: ;$C222D3
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $0E
	CMP #$0004
	BCC UNKNOWN_C222D3_UNKNOWN1
	BEQ UNKNOWN_C222D3_UNKNOWN1
	CMP #$0007
	BNE UNKNOWN_C222D3_UNKNOWN0
	LDA #.LOWORD(GAME_STATE)+game_state::pet_name
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $16
	LDA $08
	STA $18
	BRA UNKNOWN_C222D3_UNKNOWN2
UNKNOWN_C222D3_UNKNOWN0:
	LOADPTR ENEMY_CONFIGURATION_TABLE, $06
	LDA $0E
	ASL
	TAX
	INX
	LDA f:NPC_AI_TABLE,X
	AND #$00FF
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	INC
	CLC
	ADC $06
	STA $06
	STA $16
	LDA $08
	STA $18
	BRA UNKNOWN_C222D3_UNKNOWN2
UNKNOWN_C222D3_UNKNOWN1:
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $16
	LDA $08
	STA $18
UNKNOWN_C222D3_UNKNOWN2:
	PLD
	RTL

UNKNOWN_C22351: ;$C22351
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	TAX
	DEX
	STX $10
	LDA #$0000
	STA $0E
	BRA UNKNOWN_C22351_UNKNOWN1
UNKNOWN_C22351_UNKNOWN0:
	LDA $0E
	INC
	STA $0E
UNKNOWN_C22351_UNKNOWN1:
	STA $02
	LDA #$000E
	CLC
	SBC $02
	BVC UNKNOWN_C22351_UNKNOWN2
	BPL UNKNOWN_C22351_UNKNOWN4
	BRA UNKNOWN_C22351_UNKNOWN3
UNKNOWN_C22351_UNKNOWN2:
	BMI UNKNOWN_C22351_UNKNOWN4
UNKNOWN_C22351_UNKNOWN3:
	LDA $0E
	STA $02
	LDX $10
	TXA
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::items
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BNE UNKNOWN_C22351_UNKNOWN0
UNKNOWN_C22351_UNKNOWN4:
	LDA $0E
	PLD
	RTL

UNKNOWN_C2239D: ;$C2239D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $0E
	LDX #$0000
	BRA UNKNOWN_C2239D_UNKNOWN2
UNKNOWN_C2239D_UNKNOWN0:
	LDA $0E
	STA $02
	LDA .LOWORD(GAME_STATE)+122,X
	AND #$00FF
	CMP $02
	BNE UNKNOWN_C2239D_UNKNOWN1
	LDA $0E
	BRA UNKNOWN_C2239D_UNKNOWN5
UNKNOWN_C2239D_UNKNOWN1:
	INX
UNKNOWN_C2239D_UNKNOWN2:
	STX $02
	LDA .LOWORD(GAME_STATE)+game_state::party_count
	AND #$00FF
	CLC
	SBC $02
	BVS UNKNOWN_C2239D_UNKNOWN3
	BPL UNKNOWN_C2239D_UNKNOWN0
	BRA UNKNOWN_C2239D_UNKNOWN4
UNKNOWN_C2239D_UNKNOWN3:
	BMI UNKNOWN_C2239D_UNKNOWN0
UNKNOWN_C2239D_UNKNOWN4:
	LDA #$0000
UNKNOWN_C2239D_UNKNOWN5:
	PLD
	RTL

UNKNOWN_C223D9: ;$C223D9
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STX $02
	TAY
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	BEQ UNKNOWN_C223D9_UNKNOWN0
	LDA #$0000
	STA $0E
	BRA UNKNOWN_C223D9_UNKNOWN5
UNKNOWN_C223D9_UNKNOWN0:
	TYX
	INX
	INX
	INX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BEQ UNKNOWN_C223D9_UNKNOWN1
	TXY
	LDA #$0003
	STA $0E
	BRA UNKNOWN_C223D9_UNKNOWN5
UNKNOWN_C223D9_UNKNOWN1:
	INY
	LDA #$0001
	STA $0E
	BRA UNKNOWN_C223D9_UNKNOWN3
UNKNOWN_C223D9_UNKNOWN2:
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	BNE UNKNOWN_C223D9_UNKNOWN5
	LDA $0E
	INC
	STA $0E
	INY
UNKNOWN_C223D9_UNKNOWN3:
	CMP #$0007
	BCC UNKNOWN_C223D9_UNKNOWN2
	LDA $02
	BEQ UNKNOWN_C223D9_UNKNOWN4
	LDA #$0007
	BRA UNKNOWN_C223D9_UNKNOWN7
UNKNOWN_C223D9_UNKNOWN4:
	LDA #$0020
	BRA UNKNOWN_C223D9_UNKNOWN7
UNKNOWN_C223D9_UNKNOWN5:
	LDA $02
	BEQ UNKNOWN_C223D9_UNKNOWN6
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	DEC
	ASL
	STA $02
	LDA $0E
	STA $04
	ASL
	ADC $04
	ASL
	ADC $04
	ASL
	CLC
	ADC $02
	TAX
	LDA f:STATUS_EQUIP_WINDOW_TEXT,X
	BRA UNKNOWN_C223D9_UNKNOWN7
UNKNOWN_C223D9_UNKNOWN6:
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	DEC
	ASL
	STA $02
	LDA $0E
	STA $04
	ASL
	ADC $04
	ASL
	ADC $04
	ASL
	CLC
	ADC $02
	TAX
	LDA f:STATUS_EQUIP_WINDOW_TEXT_2,X
UNKNOWN_C223D9_UNKNOWN7:
	PLD
	RTL

UNKNOWN_C22474: ;$C22474
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAY
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	BEQ UNKNOWN_C22474_UNKNOWN0
	LDA #$0000
	STA $0E
	BRA UNKNOWN_C22474_UNKNOWN4
UNKNOWN_C22474_UNKNOWN0:
	TYX
	INX
	INX
	INX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BEQ UNKNOWN_C22474_UNKNOWN1
	TXY
	LDA #$0003
	STA $0E
	BRA UNKNOWN_C22474_UNKNOWN4
UNKNOWN_C22474_UNKNOWN1:
	INY
	LDA #$0001
	STA $0E
	BRA UNKNOWN_C22474_UNKNOWN3
UNKNOWN_C22474_UNKNOWN2:
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	BNE UNKNOWN_C22474_UNKNOWN4
	LDA $0E
	INC
	STA $0E
	INY
UNKNOWN_C22474_UNKNOWN3:
	CMP #$0007
	BCC UNKNOWN_C22474_UNKNOWN2
	LDA #$0004
	BRA UNKNOWN_C22474_UNKNOWN5
UNKNOWN_C22474_UNKNOWN4:
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	DEC
	ASL
	STA $02
	LDA $0E
	STA $04
	ASL
	ADC $04
	ASL
	ADC $04
	ASL
	CLC
	ADC $02
	TAX
	LDA f:STATUS_EQUIP_WINDOW_TEXT_3,X
UNKNOWN_C22474_UNKNOWN5:
	PLD
	RTL

.INCLUDE "inventory/get_item_subtype.asm"

.INCLUDE "inventory/get_item_subtype2.asm"

UNKNOWN_C22562: ;$C22562
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	CPX #$FFFF
	BNE UNKNOWN_C22562_UNKNOWN0
	LDX #$0000
UNKNOWN_C22562_UNKNOWN0:
	TXA
	SEP #PROC_FLAGS::ACCUM8
	STA .LOWORD(UNKNOWN_7E9CD0)
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7E9CD6)
	AND #$00FF
	STA $0E
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::BODY,X
	STA .LOWORD(UNKNOWN_7E9CD1)
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS,X
	STA .LOWORD(UNKNOWN_7E9CD2)
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER,X
	STA .LOWORD(UNKNOWN_7E9CD3)
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	JSL UNKNOWN_C1A1D8
	PLD
	RTL

UNKNOWN_C225AC: ;$C225AC
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	STX $0E
	LDA .LOWORD(UNKNOWN_7E9CD6)
	AND #$00FF
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::WEAPON,X
	STA .LOWORD(UNKNOWN_7E9CD0)
	LDX $0E
	CPX #$FFFF
	BNE UNKNOWN_C225AC_UNKNOWN0
	LDX #$0000
UNKNOWN_C225AC_UNKNOWN0:
	REP #PROC_FLAGS::ACCUM8
	TXA
	SEP #PROC_FLAGS::ACCUM8
	STA .LOWORD(UNKNOWN_7E9CD1)
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7E9CD6)
	AND #$00FF
	STA $0E
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS,X
	STA .LOWORD(UNKNOWN_7E9CD2)
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER,X
	STA .LOWORD(UNKNOWN_7E9CD3)
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	JSL UNKNOWN_C1A1D8
	PLD
	RTL

UNKNOWN_C2260D: ;$C2260D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	STA $10
	LDA .LOWORD(UNKNOWN_7E9CD6)
	AND #$00FF
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::WEAPON,X
	STA .LOWORD(UNKNOWN_7E9CD0)
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::BODY,X
	STA .LOWORD(UNKNOWN_7E9CD1)
	REP #PROC_FLAGS::ACCUM8
	LDA $10
	CMP #$FFFF
	BNE UNKNOWN_C2260D_UNKNOWN0
	LDX #$0000
	BRA UNKNOWN_C2260D_UNKNOWN1
UNKNOWN_C2260D_UNKNOWN0:
	TAX
UNKNOWN_C2260D_UNKNOWN1:
	TXA
	SEP #PROC_FLAGS::ACCUM8
	STA .LOWORD(UNKNOWN_7E9CD2)
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7E9CD6)
	AND #$00FF
	TAX
	STX $0E
	TXA
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER,X
	STA .LOWORD(UNKNOWN_7E9CD3)
	LDX $0E
	REP #PROC_FLAGS::ACCUM8
	TXA
	JSL UNKNOWN_C1A1D8
	PLD
	RTL

UNKNOWN_C22673: ;$C22673
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $0E
	LDA .LOWORD(UNKNOWN_7E9CD6)
	AND #$00FF
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::WEAPON,X
	STA .LOWORD(UNKNOWN_7E9CD0)
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::BODY,X
	STA .LOWORD(UNKNOWN_7E9CD1)
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS,X
	STA .LOWORD(UNKNOWN_7E9CD2)
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	CMP #$FFFF
	BNE UNKNOWN_C22673_UNKNOWN0
	LDX #$0000
	BRA UNKNOWN_C22673_UNKNOWN1
UNKNOWN_C22673_UNKNOWN0:
	TAX
UNKNOWN_C22673_UNKNOWN1:
	TXA
	SEP #PROC_FLAGS::ACCUM8
	STA .LOWORD(UNKNOWN_7E9CD3)
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7E9CD6)
	AND #$00FF
	JSL UNKNOWN_C1A1D8
	PLD
	RTL

UNKNOWN_C226C5: ;$C226C5
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	LDA .LOWORD(CURRENT_INTERACTING_EVENT_FLAG)
	JSL SET_EVENT_FLAG
	TAX
	STX $0E
	LDA .LOWORD(UNKNOWN_7E5D64)
	JSL UNKNOWN_C0C30C
	LDX $0E
	TXA
	PLD
	RTL

UNKNOWN_C226E6: ;$C226E6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA .LOWORD(CURRENT_INTERACTING_EVENT_FLAG)
	JSL GET_EVENT_FLAG
	RTL

UNKNOWN_C226F0: ;$C226F0
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA #$0000
	STA $0E
	BRA UNKNOWN_C226F0_UNKNOWN1
UNKNOWN_C226F0_UNKNOWN0:
	INC
	STA $0E
UNKNOWN_C226F0_UNKNOWN1:
	TAX
	LDA .LOWORD(GAME_STATE)+150,X
	AND #$00FF
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::afflictions,X
	AND #$00FF
	CMP #$0001
	BEQ UNKNOWN_C226F0_UNKNOWN2
	LDA .LOWORD(GAME_STATE)+game_state::player_controlled_party_count
	AND #$00FF
	STA $02
	LDA $0E
	CMP $02
	BCC UNKNOWN_C226F0_UNKNOWN0
UNKNOWN_C226F0_UNKNOWN2:
	LDA $0E
	PLD
	RTL

UNKNOWN_C2272F: ;$C2272F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA #$0000
	STA $10
	TAY
	STY $0E
	BRA UNKNOWN_C2272F_UNKNOWN2
UNKNOWN_C2272F_UNKNOWN0:
	LDA .LOWORD(GAME_STATE)+150,Y
	AND #$00FF
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::afflictions,X
	AND #$00FF
	TAX
	CPX #$0001
	BEQ UNKNOWN_C2272F_UNKNOWN1
	CPX #$0002
	BEQ UNKNOWN_C2272F_UNKNOWN1
	LDA $10
	INC
	STA $10
UNKNOWN_C2272F_UNKNOWN1:
	LDY $0E
	INY
	STY $0E
UNKNOWN_C2272F_UNKNOWN2:
	LDA .LOWORD(GAME_STATE)+game_state::player_controlled_party_count
	AND #$00FF
	STA $02
	TYA
	CMP $02
	BCC UNKNOWN_C2272F_UNKNOWN0
	LDA $10
	PLD
	RTL

UNKNOWN_C2277C: ;$C2277C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDY #$0000
	STY $10
	BRA UNKNOWN_C2277C_UNKNOWN2
UNKNOWN_C2277C_UNKNOWN0:
	LDA .LOWORD(GAME_STATE)+150,Y
	AND #$00FF
	STA $0E
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::afflictions,X
	AND #$00FF
	TAX
	CPX #$0001
	BEQ UNKNOWN_C2277C_UNKNOWN1
	CPX #$0002
	BEQ UNKNOWN_C2277C_UNKNOWN1
	LDA $0E
	BRA UNKNOWN_C2277C_UNKNOWN3
UNKNOWN_C2277C_UNKNOWN1:
	LDY $10
	INY
	STY $10
UNKNOWN_C2277C_UNKNOWN2:
	LDA .LOWORD(GAME_STATE)+game_state::player_controlled_party_count
	AND #$00FF
	STA $02
	TYA
	CMP $02
	BCC UNKNOWN_C2277C_UNKNOWN0
	LDA #$0000
UNKNOWN_C2277C_UNKNOWN3:
	PLD
	RTL

LEARN_SPECIAL_PSI: ;$C227C8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	CMP #$0001
	BEQ @LEARN_TELEPORT_ALPHA
	CMP #$0002
	BEQ @LEARN_TELEPORT_BETA
	CMP #$0003
	BEQ @LEARN_STARSTORM_ALPHA
	CMP #$0004
	BEQ @LEARN_STARSTORM_BETA
	BRA @RETURN
@LEARN_TELEPORT_ALPHA:
	LDX #.LOWORD(GAME_STATE) + game_state::party_psi
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	ORA #PARTY_PSI_FLAGS::TELEPORT_ALPHA
	STA a:.LOWORD(RAM),X
	BRA @RETURN
@LEARN_TELEPORT_BETA:
	LDX #.LOWORD(GAME_STATE) + game_state::party_psi
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	ORA #PARTY_PSI_FLAGS::TELEPORT_BETA
	STA a:.LOWORD(RAM),X
	BRA @RETURN
@LEARN_STARSTORM_ALPHA:
	LDX #.LOWORD(GAME_STATE) + game_state::party_psi
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	ORA #PARTY_PSI_FLAGS::STARSTORM_ALPHA
	STA a:.LOWORD(RAM),X
	BRA @RETURN
@LEARN_STARSTORM_BETA:
	LDX #.LOWORD(GAME_STATE) + game_state::party_psi
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	ORA #PARTY_PSI_FLAGS::STARSTORM_BETA
	STA a:.LOWORD(RAM),X
@RETURN:
	REP #PROC_FLAGS::ACCUM8
	RTL

DEPOSIT_INTO_ATM: ;$C2281D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA $20
	STA $06
	LDA $22
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $0E
	STA $06
	LDA $10
	STA $08
	LDA .LOWORD(GAME_STATE)+game_state::bank_balance
	STA $0A
	LDA .LOWORD(GAME_STATE)+game_state::bank_balance+2
	STA $0C
	CLC
	LDA $0A
	ADC $06
	STA $0A
	LDA $0C
	ADC $08
	STA $0C
	LDA #.LOWORD(ATM_ACCOUNT_LIMIT)
	STA $06
	LDA #.HIWORD(ATM_ACCOUNT_LIMIT)
	STA $08
	CLC
	LDA $0A
	SBC $06
	LDA $0C
	SBC $08
	BVS DEPOSIT_INTO_ATM_UNKNOWN0
	BPL DEPOSIT_INTO_ATM_UNKNOWN2
	BRA DEPOSIT_INTO_ATM_UNKNOWN1
DEPOSIT_INTO_ATM_UNKNOWN0:
	BMI DEPOSIT_INTO_ATM_UNKNOWN2
DEPOSIT_INTO_ATM_UNKNOWN1:
	LDA $0A
	STA $06
	LDA $0C
	STA $08
DEPOSIT_INTO_ATM_UNKNOWN2:
	LDA $06
	STA .LOWORD(GAME_STATE)+game_state::bank_balance
	LDA $08
	STA .LOWORD(GAME_STATE)+game_state::bank_balance+2
	LDA .LOWORD(GAME_STATE)+game_state::bank_balance
	STA $06
	LDA .LOWORD(GAME_STATE)+game_state::bank_balance+2
	STA $08
	SEC
	LDA $0A
	SBC $06
	STA $0A
	LDA $0C
	SBC $08
	STA $0C
	LDA $0E
	STA $06
	LDA $10
	STA $08
	SEC
	LDA $06
	SBC $0A
	STA $06
	LDA $08
	SBC $0C
	STA $08
	LDA $06
	STA $18
	LDA $08
	STA $1A
	PLD
	RTL

WITHDRAW_FROM_ATM: ;$C228B7
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF2
	TCD
	LDA $1C
	STA $0A
	LDA $1E
	STA $0C
	LDY #.LOWORD(GAME_STATE) + game_state::bank_balance
	LDA a:.LOWORD(RAM),Y
	STA $06
	LDA a:.LOWORD(RAM)+2,Y
	STA $08
	CLC
	LDA $0A
	SBC $06
	LDA $0C
	SBC $08
	BCS WITHDRAW_FROM_ATM_INSUFFICIENT_FUNDS
	SEC
	LDA $06
	SBC $0A
	STA $06
	LDA $08
	SBC $0C
	STA $08
	LDA $06
	STA a:.LOWORD(RAM),Y
	LDA $08
	STA a:.LOWORD(RAM)+2,Y
WITHDRAW_FROM_ATM_INSUFFICIENT_FUNDS:
	PLD
	RTL

ADD_CHAR_TO_PARTY: ;$C228F8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $04
	LDA #$0000
	STA $02
	STA $0E
	JMP a:.LOWORD(ADD_CHAR_TO_PARTY_UNKNOWN14)
ADD_CHAR_TO_PARTY_UNKNOWN0:
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(GAME_STATE)+122,X
	STA $00
	REP #PROC_FLAGS::ACCUM8
	LDA $00
	AND #$00FF
	CMP $04
	BNE ADD_CHAR_TO_PARTY_UNKNOWN1
	JMP a:.LOWORD(ADD_CHAR_TO_PARTY_UNKNOWN16)
ADD_CHAR_TO_PARTY_UNKNOWN1:
	CMP $04
	BEQ ADD_CHAR_TO_PARTY_UNKNOWN2
	BCS ADD_CHAR_TO_PARTY_UNKNOWN3
ADD_CHAR_TO_PARTY_UNKNOWN2:
	LDA $00
	AND #$00FF
	BNE ADD_CHAR_TO_PARTY_UNKNOWN13
ADD_CHAR_TO_PARTY_UNKNOWN3:
	LDY $02
	BRA ADD_CHAR_TO_PARTY_UNKNOWN7
ADD_CHAR_TO_PARTY_UNKNOWN4:
	STY $02
	LDA #$0006
	CLC
	SBC $02
	BVC ADD_CHAR_TO_PARTY_UNKNOWN5
	BPL ADD_CHAR_TO_PARTY_UNKNOWN16
	BRA ADD_CHAR_TO_PARTY_UNKNOWN6
ADD_CHAR_TO_PARTY_UNKNOWN5:
	BMI ADD_CHAR_TO_PARTY_UNKNOWN16
ADD_CHAR_TO_PARTY_UNKNOWN6:
	INY
ADD_CHAR_TO_PARTY_UNKNOWN7:
	LDA .LOWORD(GAME_STATE)+122,Y
	AND #$00FF
	BNE ADD_CHAR_TO_PARTY_UNKNOWN4
	BRA ADD_CHAR_TO_PARTY_UNKNOWN9
ADD_CHAR_TO_PARTY_UNKNOWN8:
	TYX
	DEX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(GAME_STATE)+122,X
	STA .LOWORD(GAME_STATE)+122,Y
	TXY
ADD_CHAR_TO_PARTY_UNKNOWN9:
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA $02
	TYA
	CLC
	SBC $02
	BVS ADD_CHAR_TO_PARTY_UNKNOWN10
	BPL ADD_CHAR_TO_PARTY_UNKNOWN8
	BRA ADD_CHAR_TO_PARTY_UNKNOWN11
ADD_CHAR_TO_PARTY_UNKNOWN10:
	BMI ADD_CHAR_TO_PARTY_UNKNOWN8
ADD_CHAR_TO_PARTY_UNKNOWN11:
	LDA $04
	SEP #PROC_FLAGS::ACCUM8
	LDX $02
	STA .LOWORD(GAME_STATE)+122,X
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	JSL UNKNOWN_C0369B
	ASL
	CLC
	ADC #$10B6
	TAX
	LDA a:.LOWORD(RAM),X
	ORA #$C000
	STA a:.LOWORD(RAM),X
	LDA $04
	CMP #$0004
	BEQ ADD_CHAR_TO_PARTY_UNKNOWN12
	BCS ADD_CHAR_TO_PARTY_UNKNOWN16
ADD_CHAR_TO_PARTY_UNKNOWN12:
	JSL UNKNOWN_C216DB
	JSL UNKNOWN_C3EBCA
	BRA ADD_CHAR_TO_PARTY_UNKNOWN16
ADD_CHAR_TO_PARTY_UNKNOWN13:
	INC $02
	LDA $02
	STA $0E
ADD_CHAR_TO_PARTY_UNKNOWN14:
	LDA #$0006
	CLC
	SBC $02
	BVS ADD_CHAR_TO_PARTY_UNKNOWN15
	BMI ADD_CHAR_TO_PARTY_UNKNOWN16
	JMP a:.LOWORD(ADD_CHAR_TO_PARTY_UNKNOWN0)
ADD_CHAR_TO_PARTY_UNKNOWN15:
	BPL ADD_CHAR_TO_PARTY_UNKNOWN16
	JMP a:.LOWORD(ADD_CHAR_TO_PARTY_UNKNOWN0)
ADD_CHAR_TO_PARTY_UNKNOWN16:
	PLD
	RTL

REMOVE_CHAR_FROM_PARTY: ;$C229BB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAY
	STY $0E
	LDX #$0000
	BRA @UNKNOWN7
@UNKNOWN0:
	STY $02
	LDA .LOWORD(GAME_STATE)+122,X
	AND #$00FF
	CMP $02
	BNE @UNKNOWN6
	BRA @UNKNOWN2
@UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(GAME_STATE)+123,X
	STA .LOWORD(GAME_STATE)+122,X
	INX
@UNKNOWN2:
	STX $02
	REP #PROC_FLAGS::ACCUM8
	LDA #$0006
	CLC
	SBC $02
	BVS @UNKNOWN3
	BPL @UNKNOWN1
	BRA @UNKNOWN4
@UNKNOWN3:
	BMI @UNKNOWN1
@UNKNOWN4:
	DEX
	SEP #PROC_FLAGS::ACCUM8
	STZ .LOWORD(GAME_STATE)+122,X
	REP #PROC_FLAGS::ACCUM8
	TYA
	JSL UNKNOWN_C03903
	LDY $0E
	CPY #$0004
	BEQ @UNKNOWN5
	BCS @UNKNOWN9
@UNKNOWN5:
	JSL UNKNOWN_C216DB
	JSL UNKNOWN_C3EBCA
	BRA @UNKNOWN9
@UNKNOWN6:
	INX
@UNKNOWN7:
	STX $02
	LDA .LOWORD(GAME_STATE)+game_state::party_count
	AND #$00FF
	CLC
	SBC $02
	BVS @UNKNOWN8
	BPL @UNKNOWN0
	BRA @UNKNOWN9
@UNKNOWN8:
	BMI @UNKNOWN0
@UNKNOWN9:
	PLD
	RTL

SAVE_CURRENT_GAME: ;$C22A2C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA .LOWORD(CURRENT_SAVE_SLOT)
	AND #$00FF
	DEC
	JSL SAVE_GAME_SLOT
	RTL

UNKNOWN_C22A3A: ;$C22A3A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE3
	TCD
	PLA
	STY $1B
	STA $02
	STA $19
	TXA
	DEC
	STA $04
	TYA
	DEC
	STA $02
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::items
	CLC
	ADC $02
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	TAX
	STX $17
	LDY $1B
	TYA
	STA $15
	BRA UNKNOWN_C22A3A_UNKNOWN1
UNKNOWN_C22A3A_UNKNOWN0:
	LDA $15
	TAY
	DEY
	SEP #PROC_FLAGS::ACCUM8
	LDA $00
	STA ($13),Y
	REP #PROC_FLAGS::ACCUM8
	LDA $15
	INC
	STA $15
UNKNOWN_C22A3A_UNKNOWN1:
	CMP #$000E
	BCS UNKNOWN_C22A3A_UNKNOWN2
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::items
	STA $13
	LDA $15
	TAY
	SEP #PROC_FLAGS::ACCUM8
	LDA ($13),Y
	STA $00
	REP #PROC_FLAGS::ACCUM8
	LDA $00
	AND #$00FF
	BNE UNKNOWN_C22A3A_UNKNOWN0
UNKNOWN_C22A3A_UNKNOWN2:
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	STA $11
	LDA $15
	DEC
	STA $02
	LDA $11
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::items
	CLC
	ADC $02
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	LDX $17
	REP #PROC_FLAGS::ACCUM8
	LDA $19
	STA $02
	JSL GIVE_ITEM_TO_CHARACTER
	LDA $04
	INC
	STA $13
	PHA
	LDA $02
	PLY
	STY $02
	CMP $02
	BEQ UNKNOWN_C22A3A_UNKNOWN3
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN28)
UNKNOWN_C22A3A_UNKNOWN3:
	LDA $11
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::WEAPON
	STA $0F
	SEP #PROC_FLAGS::ACCUM8
	LDA ($0F)
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $17
	LDY $1B
	CPY $17
	BEQ UNKNOWN_C22A3A_UNKNOWN4
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN8)
UNKNOWN_C22A3A_UNKNOWN4:
	LDA $19
	STA $02
	JSL UNKNOWN_C22351
	SEP #PROC_FLAGS::ACCUM8
	STA ($0F)
	REP #PROC_FLAGS::ACCUM8
	LDA $11
	CLC
	ADC #$9A00
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN5
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN5:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN6
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN6:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCC UNKNOWN_C22A3A_UNKNOWN7
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN36)
UNKNOWN_C22A3A_UNKNOWN7:
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN36)
UNKNOWN_C22A3A_UNKNOWN8:
	.A16
	LDA $11
	CLC
	ADC #$9A00
	TAX
	STX $13
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	STA $02
	TYA
	CMP $02
	BEQ UNKNOWN_C22A3A_UNKNOWN9
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN13)
UNKNOWN_C22A3A_UNKNOWN9:
	LDA $19
	STA $02
	JSL UNKNOWN_C22351
	SEP #PROC_FLAGS::ACCUM8
	LDX $13
	STA a:.LOWORD(RAM),X
	LDA ($0F)
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN10
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA ($0F)
UNKNOWN_C22A3A_UNKNOWN10:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN11
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN11:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCC UNKNOWN_C22A3A_UNKNOWN12
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN36)
UNKNOWN_C22A3A_UNKNOWN12:
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN36)
UNKNOWN_C22A3A_UNKNOWN13:
	.A16
	LDA $11
	CLC
	ADC #$9A01
	TAX
	STX $13
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	STA $02
	TYA
	CMP $02
	BEQ UNKNOWN_C22A3A_UNKNOWN14
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN18)
UNKNOWN_C22A3A_UNKNOWN14:
	LDA $19
	STA $02
	JSL UNKNOWN_C22351
	SEP #PROC_FLAGS::ACCUM8
	LDX $13
	STA a:.LOWORD(RAM),X
	LDA ($0F)
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN15
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA ($0F)
UNKNOWN_C22A3A_UNKNOWN15:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::BODY
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN16
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN16:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCC UNKNOWN_C22A3A_UNKNOWN17
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN36)
UNKNOWN_C22A3A_UNKNOWN17:
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN36)
UNKNOWN_C22A3A_UNKNOWN18:
	.A16
	LDA $11
	CLC
	ADC #$9A02
	TAX
	STX $13
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	STA $02
	TYA
	CMP $02
	BEQ UNKNOWN_C22A3A_UNKNOWN19
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN23)
UNKNOWN_C22A3A_UNKNOWN19:
	LDA $19
	STA $02
	JSL UNKNOWN_C22351
	SEP #PROC_FLAGS::ACCUM8
	LDX $13
	STA a:.LOWORD(RAM),X
	LDA ($0F)
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN20
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA ($0F)
UNKNOWN_C22A3A_UNKNOWN20:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::BODY
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN21
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN21:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCC UNKNOWN_C22A3A_UNKNOWN22
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN36)
UNKNOWN_C22A3A_UNKNOWN22:
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN36)
UNKNOWN_C22A3A_UNKNOWN23:
	CPY $17
	BCS UNKNOWN_C22A3A_UNKNOWN24
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA ($0F)
UNKNOWN_C22A3A_UNKNOWN24:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::BODY
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN25
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN25:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN26
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN26:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCC UNKNOWN_C22A3A_UNKNOWN27
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN36)
UNKNOWN_C22A3A_UNKNOWN27:
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(UNKNOWN_C22A3A_UNKNOWN36)
UNKNOWN_C22A3A_UNKNOWN28:
	.A16
	LDY #$99FF
	LDA ($11),Y
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BNE UNKNOWN_C22A3A_UNKNOWN29
	LDX #$0000
	LDA $13
	JSL CHANGE_EQUIPPED_WEAPON
	BRA UNKNOWN_C22A3A_UNKNOWN32
UNKNOWN_C22A3A_UNKNOWN29:
	.A16
	LDY #$9A00
	LDA ($11),Y
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BNE UNKNOWN_C22A3A_UNKNOWN30
	LDX #$0000
	LDA $13
	JSL CHANGE_EQUIPPED_BODY
	BRA UNKNOWN_C22A3A_UNKNOWN32
UNKNOWN_C22A3A_UNKNOWN30:
	LDY #$9A01
	LDA ($11),Y
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BNE UNKNOWN_C22A3A_UNKNOWN31
	LDX #$0000
	LDA $13
	JSL CHANGE_EQUIPPED_ARMS
	BRA UNKNOWN_C22A3A_UNKNOWN32
UNKNOWN_C22A3A_UNKNOWN31:
	LDY #$9A02
	LDA ($11),Y
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BNE UNKNOWN_C22A3A_UNKNOWN32
	LDX #$0000
	LDA $13
	JSL CHANGE_EQUIPPED_OTHER
UNKNOWN_C22A3A_UNKNOWN32:
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	.A16
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::WEAPON
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN33
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN33:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::BODY
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN34
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN34:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN35
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN35:
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	LDY $1B
	TYA
	CMP $02
	BCS UNKNOWN_C22A3A_UNKNOWN36
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	DEC
	STA a:.LOWORD(RAM),X
UNKNOWN_C22A3A_UNKNOWN36:
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

.INCLUDE "battle/init_scripted.asm"

UNKNOWN_C23008: ;$C23008
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDX #.LOWORD(GAME_STATE) + game_state::party_npc_1
	STX $0E
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA .LOWORD(GAME_STATE)+game_state::party_status
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(GAME_STATE)+game_state::party_npc_1_hp
	STA .LOWORD(GAME_STATE)+78
	LDY #.LOWORD(GAME_STATE) + game_state::party_npc_2
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),Y
	STA .LOWORD(GAME_STATE)+77
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(GAME_STATE)+game_state::party_npc_2_hp
	STA .LOWORD(GAME_STATE)+80
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	JSL REMOVE_CHAR_FROM_PARTY
	LDX $0E
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	JSL REMOVE_CHAR_FROM_PARTY
	LDY #.LOWORD(GAME_STATE) + game_state::money_carried
	LDA a:.LOWORD(RAM),Y
	STA $06
	LDA a:.LOWORD(RAM)+2,Y
	STA $08
	LDA $06
	STA .LOWORD(GAME_STATE)+game_state::wallet_backup
	LDA $08
	STA .LOWORD(GAME_STATE)+game_state::wallet_backup+2
	LDA #$0000
	STA $06
	LDA #$0000
	STA $08
	LDA $06
	STA a:.LOWORD(RAM),Y
	LDA $08
	STA a:.LOWORD(RAM)+2,Y
	PLD
	RTL

UNKNOWN_C2307B: ;$C2307B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX #.LOWORD(GAME_STATE) + game_state::party_npc_1
	STX $10
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	JSL REMOVE_CHAR_FROM_PARTY
	LDY #.LOWORD(GAME_STATE) + game_state::party_npc_2
	STY $0E
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	JSL REMOVE_CHAR_FROM_PARTY
	LDA .LOWORD(GAME_STATE)+game_state::party_status
	AND #$00FF
	BEQ UNKNOWN_C2307B_UNKNOWN0
	LDX $10
	SEP #PROC_FLAGS::ACCUM8
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	JSL ADD_CHAR_TO_PARTY
	LDA .LOWORD(GAME_STATE)+78
	STA .LOWORD(GAME_STATE)+game_state::party_npc_1_hp
	LDA .LOWORD(GAME_STATE)+77
	AND #$00FF
	BEQ UNKNOWN_C2307B_UNKNOWN0
	LDY $0E
	SEP #PROC_FLAGS::ACCUM8
	STA a:.LOWORD(RAM),Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	JSL ADD_CHAR_TO_PARTY
	LDA .LOWORD(GAME_STATE)+80
	STA .LOWORD(GAME_STATE)+game_state::party_npc_2_hp
UNKNOWN_C2307B_UNKNOWN0:
	LDA .LOWORD(GAME_STATE)+game_state::wallet_backup
	STA $06
	LDA .LOWORD(GAME_STATE)+game_state::wallet_backup+2
	STA $08
	LDA $06
	STA .LOWORD(GAME_STATE)+game_state::money_carried
	LDA $08
	STA .LOWORD(GAME_STATE)+game_state::money_carried+2
	PLD
	RTL

SET_TELEPORT_BOX_DESTINATION: ;$C230F3
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	SEP #PROC_FLAGS::ACCUM8
	STA .LOWORD(GAME_STATE)+195
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(GAME_STATE)+game_state::leader_x_coord
	STA .LOWORD(RESPAWN_X)
	LDA .LOWORD(GAME_STATE)+game_state::leader_y_coord
	STA .LOWORD(RESPAWN_Y)
	RTL

.INCLUDE "data/battle/consolation_item_table.asm"

.INCLUDE "battle/menu_handler.asm"

COPY_ENEMY_NAME: ;$C23B66
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF1
	TCD
	PLA
	STX $02
	TAY
	LDA $1D
	STA $06
	LDA $1F
	STA $08
	BRA COPY_ENEMY_NAME_UNKNOWN5
COPY_ENEMY_NAME_UNKNOWN0:
	LDA [$06]
	AND #$00FF
	TAX
	BEQ COPY_ENEMY_NAME_UNKNOWN6
	CPX #$00AC
	BNE COPY_ENEMY_NAME_UNKNOWN3
	LDX #$0000
	BRA COPY_ENEMY_NAME_UNKNOWN2
COPY_ENEMY_NAME_UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CHAR_STRUCT)+char_struct::name,X
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BEQ COPY_ENEMY_NAME_UNKNOWN4
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA a:.LOWORD(RAM),Y
	INY
	INX
COPY_ENEMY_NAME_UNKNOWN2:
	CPX #$0005
	BCC COPY_ENEMY_NAME_UNKNOWN1
	BRA COPY_ENEMY_NAME_UNKNOWN4
COPY_ENEMY_NAME_UNKNOWN3:
	SEP #PROC_FLAGS::ACCUM8
	STA a:.LOWORD(RAM),Y
	INY
COPY_ENEMY_NAME_UNKNOWN4:
	REP #PROC_FLAGS::ACCUM8
	INC $06
COPY_ENEMY_NAME_UNKNOWN5:
	LDX $02
	LDA $02
	DEC
	STA $02
	CPX #$0000
	BNE COPY_ENEMY_NAME_UNKNOWN0
COPY_ENEMY_NAME_UNKNOWN6:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),Y
	REP #PROC_FLAGS::ACCUM8
	TYA
	PLD
	RTS

FIX_ATTACKER_NAME: ;$C23BCF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE8
	TCD
	PLA
	TAY
	STY $16
	SEP #PROC_FLAGS::ACCUM8
	STZ .LOWORD(UNKNOWN_7E5E77)
	STZ $0E
	LDX #$001C
	REP #PROC_FLAGS::ACCUM8
	LDA #$A983
	JSL MEMSET16
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BEQ @UNKNOWN0
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+battler::npc_id,X
	AND #$00FF
	BNE @UNKNOWN0
	JMP a:.LOWORD(@UNKNOWN4)
@UNKNOWN0:
	LOADPTR ENEMY_CONFIGURATION_TABLE, $06
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM),X
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	INC
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0019
	LDA #$A983
	JSR a:.LOWORD(COPY_ENEMY_NAME)
	TAX
	STX $14
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BNE @UNKNOWN2
	LDY $16
	BNE @UNKNOWN2
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+battler::the_flag,X
	AND #$00FF
	CMP #$0001
	BNE @UNKNOWN1
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+76,X
	JSL UNKNOWN_C2B66A
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP #$0002
	BEQ @UNKNOWN2
@UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0050
	LDX $14
	STA a:.LOWORD(RAM),X
	INX
	STX $16
	LDA #$0001
	STA .LOWORD(UNKNOWN_7E5E77)
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+battler::the_flag,X
	CLC
	ADC #$0070
	LDX $16
	STA a:.LOWORD(RAM),X
@UNKNOWN2:
	LDX .LOWORD(CURRENT_ATTACKER)
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CMP #$00A0
	BNE @UNKNOWN3
	LDA #$9819
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0006
	LDA #$A983
	JSL MEMCPY16
	SEP #PROC_FLAGS::ACCUM8
	STZ .LOWORD(ATTACKER_NAME_ADJUST_SCRATCH)+6
@UNKNOWN3:
	LDX #$001B
	REP #PROC_FLAGS::ACCUM8
	LDA #$A983
	JSL REDIRECT_C1AC4A
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM),X
	STA .LOWORD(UNKNOWN_7E9658)
	BRA @UNKNOWN6
@UNKNOWN4:
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM),X
	CMP #$0004
	BEQ @UNKNOWN5
	BCS @UNKNOWN6
@UNKNOWN5:
	LDX #$0005
	STX $12
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	LDX $12
	JSL REDIRECT_C1AC4A
@UNKNOWN6:
	PLD
	RTL

FIX_TARGET_NAME: ;$C23D05
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEA
	TCD
	SEP #PROC_FLAGS::ACCUM8
	STZ .LOWORD(UNKNOWN_7E5E78)
	STZ $0E
	LDX #$001B
	REP #PROC_FLAGS::ACCUM8
	LDA #$A99E
	JSL MEMSET16
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BEQ @UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+battler::npc_id,X
	AND #$00FF
	BNE @UNKNOWN0
	JMP a:.LOWORD(@UNKNOWN4)
@UNKNOWN0:
	LOADPTR ENEMY_CONFIGURATION_TABLE, $06
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM),X
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	INC
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0019
	LDA #$A99E
	JSR a:.LOWORD(COPY_ENEMY_NAME)
	TAX
	STX $14
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BNE @UNKNOWN2
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+battler::the_flag,X
	AND #$00FF
	CMP #$0001
	BNE @UNKNOWN1
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+76,X
	JSL UNKNOWN_C2B66A
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP #$0002
	BEQ @UNKNOWN2
@UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0050
	LDX $14
	STA a:.LOWORD(RAM),X
	INX
	STX $12
	LDA #$0001
	STA .LOWORD(UNKNOWN_7E5E78)
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+battler::the_flag,X
	CLC
	ADC #$0070
	LDX $12
	STA a:.LOWORD(RAM),X
@UNKNOWN2:
	LDX .LOWORD(CURRENT_TARGET)
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CMP #$00A0
	BNE @UNKNOWN3
	LDA #$9819
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0006
	LDA #$A99E
	JSL MEMCPY16
	SEP #PROC_FLAGS::ACCUM8
	STZ .LOWORD(TARGET_NAME_ADJUST_SCRATCH)+6
@UNKNOWN3:
	LDX #$001B
	REP #PROC_FLAGS::ACCUM8
	LDA #$A99E
	JSL REDIRECT_C1ACA1
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM),X
	STA .LOWORD(UNKNOWN_7E965A)
	BRA @UNKNOWN6
@UNKNOWN4:
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM),X
	CMP #$0004
	BEQ @UNKNOWN5
	BCS @UNKNOWN6
@UNKNOWN5:
	LDX #$0005
	STX $14
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	LDX $14
	JSL REDIRECT_C1ACA1
@UNKNOWN6:
	PLD
	RTL

UNKNOWN_C23E32: ;$C23E32
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA #$0000
	STA $0A
	LDA #$0000
	STA $0C
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	CMP $0C
	BNE UNKNOWN_C23E32_UNKNOWN0
	LDA $06
	CMP $0A
UNKNOWN_C23E32_UNKNOWN0:
	BEQ UNKNOWN_C23E32_UNKNOWN4
	LDX #$0000
	STX $0E
	BRA UNKNOWN_C23E32_UNKNOWN2
UNKNOWN_C23E32_UNKNOWN1:
	TXA
	JSL IS_CHAR_TARGETTED
	CMP #$0000
	BNE UNKNOWN_C23E32_UNKNOWN3
	LDX $0E
	INX
	STX $0E
UNKNOWN_C23E32_UNKNOWN2:
	CPX #$0020
	BCC UNKNOWN_C23E32_UNKNOWN1
UNKNOWN_C23E32_UNKNOWN3:
	LDX $0E
	TXA
	LDY #$004E
	JSL MULT168
	CLC
	ADC #$9FAC
	STA .LOWORD(CURRENT_TARGET)
	JSL FIX_TARGET_NAME
UNKNOWN_C23E32_UNKNOWN4:
	PLD
	RTL

UNKNOWN_C23E8A: ;$C23E8A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEA
	TCD
	PLA
	TAY
	STY $14
	SEP #PROC_FLAGS::ACCUM8
	STZ .LOWORD(UNKNOWN_7E5E77)
	STZ $0E
	LDX #$001B
	REP #PROC_FLAGS::ACCUM8
	LDA #$A9B9
	JSL MEMSET16
	LDY $14
	CPY .LOWORD(UNKNOWN_7EAD56)
	BCC UNKNOWN_C23E8A_UNKNOWN0
	BEQ UNKNOWN_C23E8A_UNKNOWN0
	TYA
	SEC
	SBC .LOWORD(UNKNOWN_7EAD56)
	TAX
	DEX
	LDA .LOWORD(UNKNOWN_7EAD82),X
	AND #$00FF
	STA $02
	BRA UNKNOWN_C23E8A_UNKNOWN1
UNKNOWN_C23E8A_UNKNOWN0:
	TYX
	DEX
	LDA .LOWORD(UNKNOWN_7EAD7A),X
	AND #$00FF
	STA $02
UNKNOWN_C23E8A_UNKNOWN1:
	LDA $02
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAY
	STY $14
	LOADPTR ENEMY_CONFIGURATION_TABLE, $06
	LDA .LOWORD(BATTLERS_TABLE) + battler::id,Y
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	INC
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0019
	LDA #$A9B9
	JSR a:.LOWORD(COPY_ENEMY_NAME)
	TAX
	STX $12
	LDY $14
	LDA .LOWORD(BATTLERS_TABLE)+battler::the_flag,Y
	AND #$00FF
	CMP #$0001
	BNE UNKNOWN_C23E8A_UNKNOWN2
	LDA .LOWORD(BATTLERS_TABLE)+76,Y
	JSL UNKNOWN_C2B66A
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP #$0002
	BEQ UNKNOWN_C23E8A_UNKNOWN3
UNKNOWN_C23E8A_UNKNOWN2:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0050
	LDX $12
	STA a:.LOWORD(RAM),X
	INX
	STX $14
	REP #PROC_FLAGS::ACCUM8
	LDA $02
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(BATTLERS_TABLE)+battler::the_flag,X
	CLC
	ADC #$0070
	LDX $14
	STA a:.LOWORD(RAM),X
	LDA #$0001
	STA .LOWORD(UNKNOWN_7E5E77)
UNKNOWN_C23E8A_UNKNOWN3:
	LDX #$001A
	REP #PROC_FLAGS::ACCUM8
	LDA #$A9B9
	JSL REDIRECT_C1AC4A
	LDA $02
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE) + battler::id,X
	STA .LOWORD(UNKNOWN_7E9658)
	PLD
	RTL

FIND_TARGETTABLE_NPC: ;$C23F6C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSL RAND
	AND #$0003
	BNE FIND_TARGETTABLE_NPC_UNKNOWN0
	LDA #$0000
	BRA FIND_TARGETTABLE_NPC_UNKNOWN7
FIND_TARGETTABLE_NPC_UNKNOWN0:
	LDA #$0000
	STA $10
	BRA FIND_TARGETTABLE_NPC_UNKNOWN6
FIND_TARGETTABLE_NPC_UNKNOWN1:
	TAX
	LDA .LOWORD(GAME_STATE)+122,X
	AND #$00FF
	TAY
	STY $0E
	CPY #$0005
	BCC FIND_TARGETTABLE_NPC_UNKNOWN5
	TYA
	ASL
	TAX
	LDA f:NPC_AI_TABLE,X
	AND #$00FF
	AND #$0002
	BEQ FIND_TARGETTABLE_NPC_UNKNOWN5
	LDA #$0000
	STA $10
	BRA FIND_TARGETTABLE_NPC_UNKNOWN4
FIND_TARGETTABLE_NPC_UNKNOWN2:
	LDY #$004E
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ FIND_TARGETTABLE_NPC_UNKNOWN3
	LDY $0E
	STY $02
	LDA .LOWORD(BATTLERS_TABLE)+battler::npc_id,X
	AND #$00FF
	CMP $02
	BNE FIND_TARGETTABLE_NPC_UNKNOWN3
	LDA $10
	INC
	BRA FIND_TARGETTABLE_NPC_UNKNOWN7
FIND_TARGETTABLE_NPC_UNKNOWN3:
	LDA $10
	INC
	STA $10
FIND_TARGETTABLE_NPC_UNKNOWN4:
	CMP #$0006
	BCC FIND_TARGETTABLE_NPC_UNKNOWN2
FIND_TARGETTABLE_NPC_UNKNOWN5:
	LDA $10
	INC
	STA $10
FIND_TARGETTABLE_NPC_UNKNOWN6:
	CMP #$0006
	BCC FIND_TARGETTABLE_NPC_UNKNOWN1
	LDA #$0000
FIND_TARGETTABLE_NPC_UNKNOWN7:
	PLD
	RTL

GET_SHIELD_TARGETTING: ;$C23FEA
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	CMP #$002A
	BEQ GET_SHIELD_TARGETTING_SINGLETARGET
	CMP #$002B
	BEQ GET_SHIELD_TARGETTING_SINGLETARGET
	CMP #$002E
	BEQ GET_SHIELD_TARGETTING_SINGLETARGET
	CMP #$002F
	BNE GET_SHIELD_TARGETTING_MULTITARGET
GET_SHIELD_TARGETTING_SINGLETARGET:
	LDA #$0001
	BRA GET_SHIELD_TARGETTING_RETURN
GET_SHIELD_TARGETTING_MULTITARGET:
	LDA #$0000
GET_SHIELD_TARGETTING_RETURN:
	RTL

FEELING_STRANGE_RETARGETTING: ;$C24009
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+9,X
	AND #$00FF
	AND #$0007
	CMP #$0001
	BEQ FEELING_STRANGE_RETARGETTING_UNKNOWN0
	CMP #$0002
	BEQ FEELING_STRANGE_RETARGETTING_UNKNOWN1
	CMP #$0004
	BEQ FEELING_STRANGE_RETARGETTING_UNKNOWN2
	BRA FEELING_STRANGE_RETARGETTING_UNKNOWN5
FEELING_STRANGE_RETARGETTING_UNKNOWN0:
	JSL TARGET_ALL
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	JSL RANDOM_TARGETTING
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	BRA FEELING_STRANGE_RETARGETTING_UNKNOWN5
FEELING_STRANGE_RETARGETTING_UNKNOWN1:
	JSL RAND
	LDY #$0003
	JSL MODULUS16
	JSL TARGET_ROW
	BRA FEELING_STRANGE_RETARGETTING_UNKNOWN5
FEELING_STRANGE_RETARGETTING_UNKNOWN2:
	JSL RAND
	AND #$0001
	BEQ FEELING_STRANGE_RETARGETTING_UNKNOWN3
	JSL TARGET_ALLIES
	BRA FEELING_STRANGE_RETARGETTING_UNKNOWN4
FEELING_STRANGE_RETARGETTING_UNKNOWN3:
	JSL TARGET_ALL_ENEMIES
FEELING_STRANGE_RETARGETTING_UNKNOWN4:
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+4,X
	JSL GET_SHIELD_TARGETTING
	CMP #$0000
	BNE FEELING_STRANGE_RETARGETTING_UNKNOWN5
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BNE FEELING_STRANGE_RETARGETTING_UNKNOWN5
	JSL REMOVE_NPC_TARGETTING
FEELING_STRANGE_RETARGETTING_UNKNOWN5:
	PLD
	RTS

UNKNOWN_C240A4: ;$C240A4
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA $1E
	STA $06
	LDA $20
	STA $08
	BRA UNKNOWN_C240A4_UNKNOWN1
UNKNOWN_C240A4_UNKNOWN0:
	JSL UNKNOWN_C12DD5
UNKNOWN_C240A4_UNKNOWN1:
	JSL UNKNOWN_C2EACF
	CMP #$0000
	BNE UNKNOWN_C240A4_UNKNOWN0
	LDA #$A21C
	STA .LOWORD(CURRENT_TARGET)
	LDX #$0008
	STX $0E
	BRA UNKNOWN_C240A4_UNKNOWN5
UNKNOWN_C240A4_UNKNOWN2:
	TXA
	JSL IS_CHAR_TARGETTED
	CMP #$0000
	BEQ UNKNOWN_C240A4_UNKNOWN4
	JSL FIX_TARGET_NAME
	LDA #$0000
	STA $0A
	LDA #$0000
	STA $0C
	LDA $08
	CMP $0C
	BNE UNKNOWN_C240A4_UNKNOWN3
	LDA $06
	CMP $0A
UNKNOWN_C240A4_UNKNOWN3:
	BEQ UNKNOWN_C240A4_UNKNOWN4
	PHA
	LDA $06
	STA a:.LOWORD(UNKNOWN_7E00BC)
	LDA $08
	STA a:.LOWORD(UNKNOWN_7E00BE)
	PLA
	JSL UNKNOWN_C09279
UNKNOWN_C240A4_UNKNOWN4:
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$004E
	STA .LOWORD(CURRENT_TARGET)
	LDX $0E
	INX
	STX $0E
UNKNOWN_C240A4_UNKNOWN5:
	CPX #$0020
	BCC UNKNOWN_C240A4_UNKNOWN2
	LDA #$9FAC
	STA .LOWORD(CURRENT_TARGET)
	LDX #$0000
	STX $0E
	BRA UNKNOWN_C240A4_UNKNOWN9
UNKNOWN_C240A4_UNKNOWN6:
	TXA
	JSL IS_CHAR_TARGETTED
	CMP #$0000
	BEQ UNKNOWN_C240A4_UNKNOWN8
	JSL FIX_TARGET_NAME
	LDA #$0000
	STA $0A
	LDA #$0000
	STA $0C
	LDA $08
	CMP $0C
	BNE UNKNOWN_C240A4_UNKNOWN7
	LDA $06
	CMP $0A
UNKNOWN_C240A4_UNKNOWN7:
	BEQ UNKNOWN_C240A4_UNKNOWN8
	PHA
	LDA $06
	STA a:.LOWORD(UNKNOWN_7E00BC)
	LDA $08
	STA a:.LOWORD(UNKNOWN_7E00BE)
	PLA
	JSL UNKNOWN_C09279
UNKNOWN_C240A4_UNKNOWN8:
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$004E
	STA .LOWORD(CURRENT_TARGET)
	LDX $0E
	INX
	STX $0E
UNKNOWN_C240A4_UNKNOWN9:
	CPX #$0008
	BCC UNKNOWN_C240A4_UNKNOWN6
	PLD
	RTL

UNKNOWN_C2416F: ;$C2416F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDX #$0000
	STX $0E
	BRA UNKNOWN_C2416F_UNKNOWN1
UNKNOWN_C2416F_UNKNOWN0:
	LDX .LOWORD(CURRENT_ATTACKER)
	CMP a:.LOWORD(RAM)+4,X
	BEQ UNKNOWN_C2416F_UNKNOWN6
	LDX $0E
	INX
	STX $0E
UNKNOWN_C2416F_UNKNOWN1:
	TXA
	ASL
	TAX
	LDA f:DEAD_TARGETTABLE_ACTIONS,X
	BNE UNKNOWN_C2416F_UNKNOWN0
	LDY #$0000
	STY $0E
	BRA UNKNOWN_C2416F_UNKNOWN5
UNKNOWN_C2416F_UNKNOWN2:
	TYA
	JSL IS_CHAR_TARGETTED
	CMP #$0000
	BEQ UNKNOWN_C2416F_UNKNOWN4
	LDY $0E
	TYA
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ UNKNOWN_C2416F_UNKNOWN3
	LDA .LOWORD(BATTLERS_TABLE)+battler::afflictions,X
	AND #$00FF
	TAX
	CPX #STATUS_0::UNCONSCIOUS
	BEQ UNKNOWN_C2416F_UNKNOWN3
	CPX #STATUS_0::DIAMONDIZED
	BNE UNKNOWN_C2416F_UNKNOWN4
UNKNOWN_C2416F_UNKNOWN3:
	LDY $0E
	TYA
	JSL REMOVE_TARGET
UNKNOWN_C2416F_UNKNOWN4:
	LDY $0E
	INY
	STY $0E
UNKNOWN_C2416F_UNKNOWN5:
	CPY #$0020
	BCC UNKNOWN_C2416F_UNKNOWN2
UNKNOWN_C2416F_UNKNOWN6:
	PLD
	RTL

FIND_STEALABLE_ITEMS: ;$C241DC
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE6
	TCD
	STZ $18
	STZ $16
	JMP a:.LOWORD(FIND_STEALABLE_ITEMS_UNKNOWN12)
FIND_STEALABLE_ITEMS_UNKNOWN0:
	LDY #$986F
	LDA ($16),Y
	AND #$00FF
	STA $14
	CMP #$0001
	BCS FIND_STEALABLE_ITEMS_UNKNOWN1
	BEQ FIND_STEALABLE_ITEMS_UNKNOWN1
	JMP a:.LOWORD(FIND_STEALABLE_ITEMS_UNKNOWN11)
FIND_STEALABLE_ITEMS_UNKNOWN1:
	LDA $14
	CMP #$0004
	BEQ FIND_STEALABLE_ITEMS_UNKNOWN2
	BCC FIND_STEALABLE_ITEMS_UNKNOWN2
	JMP a:.LOWORD(FIND_STEALABLE_ITEMS_UNKNOWN11)
FIND_STEALABLE_ITEMS_UNKNOWN2:
	LDA #$0000
	STA $12
	BRA FIND_STEALABLE_ITEMS_UNKNOWN5
FIND_STEALABLE_ITEMS_UNKNOWN3:
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ FIND_STEALABLE_ITEMS_UNKNOWN4
	LDA .LOWORD(BATTLERS_TABLE),X
	CMP $14
	BNE FIND_STEALABLE_ITEMS_UNKNOWN4
	LDA .LOWORD(BATTLERS_TABLE)+battler::npc_id,X
	AND #$00FF
	BNE FIND_STEALABLE_ITEMS_UNKNOWN4
	LDA .LOWORD(BATTLERS_TABLE)+7,X
	AND #$00FF
	STA $10
FIND_STEALABLE_ITEMS_UNKNOWN4:
	LDA $12
	INC
	STA $12
FIND_STEALABLE_ITEMS_UNKNOWN5:
	CMP #$0006
	BCC FIND_STEALABLE_ITEMS_UNKNOWN3
	STZ $0E
	JMP a:.LOWORD(FIND_STEALABLE_ITEMS_UNKNOWN10)
FIND_STEALABLE_ITEMS_UNKNOWN6:
	LDA $0E
	STA $02
	INC $02
	LDA $02
	CMP $10
	BNE FIND_STEALABLE_ITEMS_UNKNOWN7
	JMP a:.LOWORD(FIND_STEALABLE_ITEMS_UNKNOWN9)
FIND_STEALABLE_ITEMS_UNKNOWN7:
	LDA $14
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAY
	STY $12
	TYA
	CLC
	ADC #.LOWORD(CHAR_STRUCT) + char_struct::items
	CLC
	ADC $0E
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	STA $04
	BNE FIND_STEALABLE_ITEMS_UNKNOWN8
	JMP a:.LOWORD(FIND_STEALABLE_ITEMS_UNKNOWN9)
FIND_STEALABLE_ITEMS_UNKNOWN8:
	LOADPTR ITEM_CONFIGURATION_TABLE, $06
	LDA $04
	LDY #.SIZEOF(item)
	JSL MULT168
	TAX
	CLC
	ADC #item::cost
	LDY $06
	STY $0A
	LDY $08
	STY $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	BEQ FIND_STEALABLE_ITEMS_UNKNOWN9
	CMP #$0122
	BCS FIND_STEALABLE_ITEMS_UNKNOWN9
	TXA
	CLC
	ADC #item::type
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	AND #$0030
	CMP #$0020
	BNE FIND_STEALABLE_ITEMS_UNKNOWN9
	LDY $12
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::WEAPON,Y
	AND #$00FF
	CMP $02
	BEQ FIND_STEALABLE_ITEMS_UNKNOWN9
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::BODY,Y
	AND #$00FF
	CMP $02
	BEQ FIND_STEALABLE_ITEMS_UNKNOWN9
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::ARMS,Y
	AND #$00FF
	CMP $02
	BEQ FIND_STEALABLE_ITEMS_UNKNOWN9
	LDA .LOWORD(CHAR_STRUCT)+char_struct::equipment+EQUIPMENT_SLOT::OTHER,Y
	AND #$00FF
	CMP $02
	BEQ FIND_STEALABLE_ITEMS_UNKNOWN9
	LDA $04
	SEP #PROC_FLAGS::ACCUM8
	LDY #.LOWORD(UNKNOWN_7EA9D4)
	STA ($18),Y
	REP #PROC_FLAGS::ACCUM8
	INC $18
FIND_STEALABLE_ITEMS_UNKNOWN9:
	INC $0E
FIND_STEALABLE_ITEMS_UNKNOWN10:
	LDA $0E
	CMP #$000E
	BCS FIND_STEALABLE_ITEMS_UNKNOWN11
	BEQ FIND_STEALABLE_ITEMS_UNKNOWN11
	JMP a:.LOWORD(FIND_STEALABLE_ITEMS_UNKNOWN6)
FIND_STEALABLE_ITEMS_UNKNOWN11:
	INC $16
FIND_STEALABLE_ITEMS_UNKNOWN12:
	LDA $16
	CMP #$0006
	BCS FIND_STEALABLE_ITEMS_UNKNOWN13
	BEQ FIND_STEALABLE_ITEMS_UNKNOWN13
	JMP a:.LOWORD(FIND_STEALABLE_ITEMS_UNKNOWN0)
FIND_STEALABLE_ITEMS_UNKNOWN13:
	LDA $18
	PLD
	RTS

SELECT_STEALABLE_ITEM: ;$C24316
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	JSR a:.LOWORD(FIND_STEALABLE_ITEMS)
	TAX
	STX $0E
	BNE SELECT_STEALABLE_ITEM_UNKNOWN0
	LDA #$0000
	BRA SELECT_STEALABLE_ITEM_UNKNOWN2
SELECT_STEALABLE_ITEM_UNKNOWN0:
	JSL RAND
	AND #$0080
	BEQ SELECT_STEALABLE_ITEM_UNKNOWN1
	LDA #$0000
	BRA SELECT_STEALABLE_ITEM_UNKNOWN2
SELECT_STEALABLE_ITEM_UNKNOWN1:
	LDX $0E
	TXA
	JSR a:.LOWORD(RAND_LIMIT)
	TAX
	LDA .LOWORD(UNKNOWN_7EA9D4),X
	AND #$00FF
SELECT_STEALABLE_ITEM_UNKNOWN2:
	PLD
	RTL

UNKNOWN_C24348: ;$C24348
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $04
	JSR a:.LOWORD(FIND_STEALABLE_ITEMS)
	STA $02
	LDA #$0000
	STA $0E
	BRA UNKNOWN_C24348_UNKNOWN2
UNKNOWN_C24348_UNKNOWN0:
	TAX
	LDA .LOWORD(UNKNOWN_7EA9D4),X
	AND #$00FF
	CMP $04
	BNE UNKNOWN_C24348_UNKNOWN1
	LDA #$0001
	BRA UNKNOWN_C24348_UNKNOWN3
UNKNOWN_C24348_UNKNOWN1:
	LDA $0E
	INC
	STA $0E
UNKNOWN_C24348_UNKNOWN2:
	CMP $02
	BCC UNKNOWN_C24348_UNKNOWN0
	LDA #$0000
UNKNOWN_C24348_UNKNOWN3:
	PLD
	RTL

UNKNOWN_C2437E: ;$C2437E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BEQ UNKNOWN_C2437E_UNKNOWN0
	JMP a:.LOWORD(UNKNOWN_C2437E_UNKNOWN3)
UNKNOWN_C2437E_UNKNOWN0:
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+15,X
	AND #$00FF
	BEQ UNKNOWN_C2437E_UNKNOWN1
	JMP a:.LOWORD(UNKNOWN_C2437E_UNKNOWN3)
UNKNOWN_C2437E_UNKNOWN1:
	LDX .LOWORD(CURRENT_ATTACKER)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+7,X
	STA $00
	REP #PROC_FLAGS::ACCUM8
	LDA $00
	AND #$00FF
	BNE UNKNOWN_C2437E_UNKNOWN2
	JMP a:.LOWORD(UNKNOWN_C2437E_UNKNOWN3)
UNKNOWN_C2437E_UNKNOWN2:
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM),X
	TAY
	STY $10
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+8,X
	AND #$00FF
	STA $0E
	STA $02
	LDA $00
	AND #$00FF
	DEC
	STA $04
	TYA
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::items
	CLC
	ADC $04
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	CMP $02
	BNE UNKNOWN_C2437E_UNKNOWN3
	LDA $0E
	LDY #.SIZEOF(item)
	JSL MULT168
	CLC
	ADC #item::flags
	TAX
	LDA f:ITEM_CONFIGURATION_TABLE,X
	AND #$00FF
	AND #ITEM_FLAGS::CONSUMED_ON_USE
	BEQ UNKNOWN_C2437E_UNKNOWN3
	LDA $0E
	TAX
	LDY $10
	TYA
	JSL UNKNOWN_C3EE14
	CMP #$0000
	BEQ UNKNOWN_C2437E_UNKNOWN3
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+7,X
	AND #$00FF
	TAX
	STX $0E
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM),X
	LDX $0E
	JSL REDIRECT_REMOVE_ITEM_FROM_INVENTORY
UNKNOWN_C2437E_UNKNOWN3:
	PLD
	RTL

UNKNOWN_C24434: ;$C24434
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	STX $0E
	LDA .LOWORD(UNKNOWN_7EAD56)
	CLC
	ADC .LOWORD(UNKNOWN_7EAD58)
	JSR a:.LOWORD(RAND_LIMIT)
	SEP #PROC_FLAGS::ACCUM8
	INC
	LDX $0E
	STA a:.LOWORD(RAM)+10,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP .LOWORD(UNKNOWN_7EAD56)
	BCC UNKNOWN_C24434_UNKNOWN0
	BEQ UNKNOWN_C24434_UNKNOWN0
	SEC
	SBC .LOWORD(UNKNOWN_7EAD56)
	TAX
	DEX
	LDA .LOWORD(UNKNOWN_7EAD82),X
	AND #$00FF
	BRA UNKNOWN_C24434_UNKNOWN1
UNKNOWN_C24434_UNKNOWN0:
	TAX
	DEX
	LDA .LOWORD(UNKNOWN_7EAD7A),X
	AND #$00FF
UNKNOWN_C24434_UNKNOWN1:
	PLD
	RTL

CHOOSE_TARGET: ;$C24477
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $02
	LDX #$0000
	STX $0E
	BRA CHOOSE_TARGET_UNKNOWN1
CHOOSE_TARGET_UNKNOWN0:
	LDA .LOWORD(UNKNOWN_7EAD7A),X
	AND #$00FF
	JSL CHECK_IF_VALID_TARGET
	CMP #$0000
	BNE CHOOSE_TARGET_UNKNOWN4
	LDX $0E
	INX
	STX $0E
CHOOSE_TARGET_UNKNOWN1:
	CPX .LOWORD(UNKNOWN_7EAD56)
	BCC CHOOSE_TARGET_UNKNOWN0
	LDX #$0000
	STX $0E
	BRA CHOOSE_TARGET_UNKNOWN3
CHOOSE_TARGET_UNKNOWN2:
	LDA .LOWORD(UNKNOWN_7EAD82),X
	AND #$00FF
	JSL CHECK_IF_VALID_TARGET
	CMP #$0000
	BNE CHOOSE_TARGET_UNKNOWN4
	LDX $0E
	INX
	STX $0E
CHOOSE_TARGET_UNKNOWN3:
	CPX .LOWORD(UNKNOWN_7EAD58)
	BCC CHOOSE_TARGET_UNKNOWN2
	JSL UNKNOWN_C2F917
CHOOSE_TARGET_UNKNOWN4:
	LDX $02
	LDA a:.LOWORD(RAM)+4,X
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	TAX
	LDA f:BATTLE_ACTION_TABLE,X
	AND #$00FF
	BNE CHOOSE_TARGET_UNKNOWN6
	LDX $02
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE CHOOSE_TARGET_UNKNOWN5
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	STZ a:.LOWORD(RAM)+9,X
	BRA CHOOSE_TARGET_UNKNOWN8
CHOOSE_TARGET_UNKNOWN5:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0010
	LDX $02
	STA a:.LOWORD(RAM)+9,X
	BRA CHOOSE_TARGET_UNKNOWN8
CHOOSE_TARGET_UNKNOWN6:
	.A16
	LDX $02
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE CHOOSE_TARGET_UNKNOWN7
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0010
	LDX $02
	STA a:.LOWORD(RAM)+9,X
	BRA CHOOSE_TARGET_UNKNOWN8
CHOOSE_TARGET_UNKNOWN7:
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	STZ a:.LOWORD(RAM)+9,X
CHOOSE_TARGET_UNKNOWN8:
	REP #PROC_FLAGS::ACCUM8
	LOADPTR BATTLE_ACTION_TABLE, $06
	LDX $02
	INX
	INX
	INX
	INX
	STX $0E
	LDA a:.LOWORD(RAM),X
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	INC
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	AND #$00FF
	BEQ CHOOSE_TARGET_UNKNOWN11
	CMP #$0001
	BEQ CHOOSE_TARGET_UNKNOWN13
	CMP #$0002
	BEQ CHOOSE_TARGET_UNKNOWN13
	CMP #$0003
	BNE CHOOSE_TARGET_UNKNOWN9
	JMP a:.LOWORD(CHOOSE_TARGET_UNKNOWN22)
CHOOSE_TARGET_UNKNOWN9:
	CMP #$0004
	BNE CHOOSE_TARGET_UNKNOWN10
	JMP a:.LOWORD(CHOOSE_TARGET_UNKNOWN26)
CHOOSE_TARGET_UNKNOWN10:
	JMP a:.LOWORD(CHOOSE_TARGET_UNKNOWN27)
CHOOSE_TARGET_UNKNOWN11:
	LDA $02
	CLC
	ADC #$0009
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	ORA #$0001
	STA a:.LOWORD(RAM),X
	LDX $02
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE CHOOSE_TARGET_UNKNOWN12
	LDY #$004E
	LDA $02
	SEC
	SBC #$9FAC
	JSL DIVISION16S_DIVISOR_POSITIVE
	TAX
	LDA $02
	JSL UNKNOWN_C4A228
	JMP a:.LOWORD(CHOOSE_TARGET_UNKNOWN27)
CHOOSE_TARGET_UNKNOWN12:
	LDY #$004E
	LDA $02
	SEC
	SBC #$9FAC
	JSL DIVISION16S_DIVISOR_POSITIVE
	SEP #PROC_FLAGS::ACCUM8
	INC
	LDX $02
	STA a:.LOWORD(RAM)+10,X
	JMP a:.LOWORD(CHOOSE_TARGET_UNKNOWN27)
CHOOSE_TARGET_UNKNOWN13:
	.A16
	LDA $02
	CLC
	ADC #$0009
	TAY
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),Y
	ORA #$0001
	STA a:.LOWORD(RAM),Y
	LDX $02
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE CHOOSE_TARGET_UNKNOWN18
	LDX $0E
	LDA a:.LOWORD(RAM),X
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	BNE CHOOSE_TARGET_UNKNOWN16
	JSL FIND_TARGETTABLE_NPC
	SEP #PROC_FLAGS::ACCUM8
	LDX $02
	STA a:.LOWORD(RAM)+10,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BEQ CHOOSE_TARGET_UNKNOWN14
	JMP a:.LOWORD(CHOOSE_TARGET_UNKNOWN27)
CHOOSE_TARGET_UNKNOWN14:
	JSL RAND
	SEP #PROC_FLAGS::ACCUM8
	AND #$0007
	INC
	LDX $02
	STA a:.LOWORD(RAM)+10,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	DEC
	JSL CHECK_IF_VALID_TARGET
	CMP #$0000
	BEQ CHOOSE_TARGET_UNKNOWN15
	JMP a:.LOWORD(CHOOSE_TARGET_UNKNOWN27)
CHOOSE_TARGET_UNKNOWN15:
	BRA CHOOSE_TARGET_UNKNOWN14
CHOOSE_TARGET_UNKNOWN16:
	LDA $02
	JSL UNKNOWN_C24434
	TAX
	JSL CHECK_IF_VALID_TARGET
	CMP #$0000
	BEQ CHOOSE_TARGET_UNKNOWN17
	JMP a:.LOWORD(CHOOSE_TARGET_UNKNOWN27)
CHOOSE_TARGET_UNKNOWN17:
	BRA CHOOSE_TARGET_UNKNOWN16
CHOOSE_TARGET_UNKNOWN18:
	LDX $0E
	LDA a:.LOWORD(RAM),X
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	BNE CHOOSE_TARGET_UNKNOWN21
CHOOSE_TARGET_UNKNOWN19:
	LDA $02
	JSL UNKNOWN_C24434
	TAX
	JSL CHECK_IF_VALID_TARGET
	CMP #$0000
	BEQ CHOOSE_TARGET_UNKNOWN20
	JMP a:.LOWORD(CHOOSE_TARGET_UNKNOWN27)
CHOOSE_TARGET_UNKNOWN20:
	BRA CHOOSE_TARGET_UNKNOWN19
CHOOSE_TARGET_UNKNOWN21:
	JSL RAND
	SEP #PROC_FLAGS::ACCUM8
	AND #$0007
	INC
	LDX $02
	STA a:.LOWORD(RAM)+10,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	DEC
	JSL CHECK_IF_VALID_TARGET
	CMP #$0000
	BEQ CHOOSE_TARGET_UNKNOWN21
	BRA CHOOSE_TARGET_UNKNOWN27
CHOOSE_TARGET_UNKNOWN22:
	LDA $02
	CLC
	ADC #$0009
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	ORA #$0002
	STA a:.LOWORD(RAM),X
	LDX $02
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE CHOOSE_TARGET_UNKNOWN23
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	LDX $02
	STA a:.LOWORD(RAM)+10,X
	BRA CHOOSE_TARGET_UNKNOWN27
CHOOSE_TARGET_UNKNOWN23:
	LDA .LOWORD(UNKNOWN_7EAD56)
	BNE CHOOSE_TARGET_UNKNOWN24
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0002
	LDX $02
	STA a:.LOWORD(RAM)+10,X
	BRA CHOOSE_TARGET_UNKNOWN27
CHOOSE_TARGET_UNKNOWN24:
	LDA .LOWORD(UNKNOWN_7EAD58)
	BNE CHOOSE_TARGET_UNKNOWN25
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	LDX $02
	STA a:.LOWORD(RAM)+10,X
	BRA CHOOSE_TARGET_UNKNOWN27
CHOOSE_TARGET_UNKNOWN25:
	JSL RAND
	SEP #PROC_FLAGS::ACCUM8
	AND #$0001
	INC
	LDX $02
	STA a:.LOWORD(RAM)+10,X
	BRA CHOOSE_TARGET_UNKNOWN27
CHOOSE_TARGET_UNKNOWN26:
	.A16
	LDA $02
	CLC
	ADC #$0009
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	ORA #$0004
	STA a:.LOWORD(RAM),X
	LDA #$0001
	LDX $02
	STA a:.LOWORD(RAM)+10,X
CHOOSE_TARGET_UNKNOWN27:
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

.INCLUDE "unknown/C24703.asm"

.INCLUDE "battle/main_battle_routine.asm"

.INCLUDE "unknown/C26189.asm"

.INCLUDE "battle/instant_win_handler.asm"

.INCLUDE "unknown/C2654C.asm"

.INCLUDE "battle/instant_win_check.asm"

GET_BATTLE_ACTION_TYPE: ;$C2698B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF2
	TCD
	PLA
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	TAX
	INX
	INX
	LDA f:BATTLE_ACTION_TABLE,X
	AND #$00FF
	PLD
	RTS

GET_ENEMY_TYPE: ;$C269A8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	CLC
	ADC #enemy_data::type
	TAX
	LDA f:ENEMY_CONFIGURATION_TABLE,X
	AND #$00FF
	RTS


; Do nothing for some number of frames
WAIT: ;$C269BE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	STX $0E
	BRA @UNKNOWN1
@UNKNOWN0:
	JSL UNKNOWN_C12DD5
@UNKNOWN1:
	LDX $0E
	TXA
	DEX
	STX $0E
	CMP #$0000
	BNE @UNKNOWN0
	PLD
	RTS

UNKNOWN_C269DE: ;$C269DE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	BRA UNKNOWN_C269DE_UNKNOWN1
UNKNOWN_C269DE_UNKNOWN0:
	JSL UNKNOWN_C12DD5
UNKNOWN_C269DE_UNKNOWN1:
	LDA a:.LOWORD(UNKNOWN_7E0028)
	AND #$00FF
	BNE UNKNOWN_C269DE_UNKNOWN0
	RTS

RAND_LONG: ;$C269EF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL RAND
	SEP #PROC_FLAGS::ACCUM8
	RTS

TRUNCATE_16_TO_8: ;$C269F8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF1
	TCD
	PLA
	SEP #PROC_FLAGS::ACCUM8
	STA $0E
	REP #PROC_FLAGS::ACCUM8
	TXA
	STA $0A
	STZ $0C
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA $06
	STZ $07
	STZ $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	JSL MULT32
	SEP #PROC_FLAGS::INDEX8
	LDY #$0008
	JSL ASR32_UNKNOWN1
	LDA $06
	REP #PROC_FLAGS::INDEX8
	PLD
	RTS

RAND_LIMIT: ;$C26A2D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	STX $0E
	JSR a:.LOWORD(RAND_LONG)
	LDX $0E
	JSR a:.LOWORD(TRUNCATE_16_TO_8)
	PLD
	RTS

.INCLUDE "battle/50_percent_variance.asm"

.INCLUDE "battle/25_percent_variance.asm"

SUCCESS_255: ;$C26BB8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF2
	TCD
	PLA
	SEP #PROC_FLAGS::ACCUM8
	STA $00
	JSR a:.LOWORD(RAND_LONG)
	CMP $00
	BCS SUCCESS_255_UNKNOWN0
	REP #PROC_FLAGS::ACCUM8
	LDA #$0001
	BRA SUCCESS_255_UNKNOWN1
SUCCESS_255_UNKNOWN0:
	REP #PROC_FLAGS::ACCUM8
	LDA #$0000
SUCCESS_255_UNKNOWN1:
	PLD
	RTS

SUCCESS_500: ;$C26BDB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF2
	TCD
	PLA
	STA $02
	LDA #$01F4
	JSR a:.LOWORD(RAND_LIMIT)
	CMP $02
	BCS SUCCESS_500_UNKNOWN0
	LDA #$0001
	BRA SUCCESS_500_UNKNOWN1
SUCCESS_500_UNKNOWN0:
	LDA #$0000
SUCCESS_500_UNKNOWN1:
	PLD
	RTS

TARGET_ALLIES: ;$C26BFB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	LDX #$9FAC
	LDA #$0000
	STA $0E
	BRA TARGET_ALLIES_UNKNOWN3
TARGET_ALLIES_UNKNOWN0:
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BEQ TARGET_ALLIES_UNKNOWN2
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BEQ TARGET_ALLIES_UNKNOWN1
	LDA a:.LOWORD(RAM)+15,X
	AND #$00FF
	BEQ TARGET_ALLIES_UNKNOWN2
TARGET_ALLIES_UNKNOWN1:
	LOADPTR POWERS_OF_TWO_32BIT, $06
	LDA $0E
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $0A
	STY $0C
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	ORA $0A
	STA $06
	LDA $08
	ORA $0C
	STA $08
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
TARGET_ALLIES_UNKNOWN2:
	TXA
	CLC
	ADC #$004E
	TAX
	LDA $0E
	INC
	STA $0E
TARGET_ALLIES_UNKNOWN3:
	CMP #$0020
	BCC TARGET_ALLIES_UNKNOWN0
	PLD
	RTL

TARGET_ALL_ENEMIES: ;$C26C82
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	LDX #$9FAC
	LDA #$0000
	STA $0E
	BRA TARGET_ALL_ENEMIES_UNKNOWN2
TARGET_ALL_ENEMIES_UNKNOWN0:
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BEQ TARGET_ALL_ENEMIES_UNKNOWN1
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE TARGET_ALL_ENEMIES_UNKNOWN1
	LOADPTR POWERS_OF_TWO_32BIT, $06
	LDA $0E
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $0A
	STY $0C
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	ORA $0A
	STA $06
	LDA $08
	ORA $0C
	STA $08
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
TARGET_ALL_ENEMIES_UNKNOWN1:
	TXA
	CLC
	ADC #$004E
	TAX
	LDA $0E
	INC
	STA $0E
TARGET_ALL_ENEMIES_UNKNOWN2:
	CMP #$0020
	BCC TARGET_ALL_ENEMIES_UNKNOWN0
	PLD
	RTL

TARGET_ROW: ;$C26D04
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	TAY
	STY $10
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	LDX #$9FAC
	LDA #$0000
	STA $0E
	JMP a:.LOWORD(TARGET_ROW_UNKNOWN6)
TARGET_ROW_UNKNOWN0:
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BNE TARGET_ROW_UNKNOWN1
	JMP a:.LOWORD(TARGET_ROW_UNKNOWN5)
TARGET_ROW_UNKNOWN1:
	LDY $10
	TYA
	BEQ TARGET_ROW_UNKNOWN2
	CMP #$0001
	BEQ TARGET_ROW_UNKNOWN4
	CMP #$0002
	BEQ TARGET_ROW_UNKNOWN4
	JMP a:.LOWORD(TARGET_ROW_UNKNOWN5)
TARGET_ROW_UNKNOWN2:
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BEQ TARGET_ROW_UNKNOWN3
	JMP a:.LOWORD(TARGET_ROW_UNKNOWN5)
TARGET_ROW_UNKNOWN3:
	LOADPTR POWERS_OF_TWO_32BIT, $06
	LDA $0E
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $0A
	STY $0C
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	ORA $0A
	STA $06
	LDA $08
	ORA $0C
	STA $08
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	BRA TARGET_ROW_UNKNOWN5
TARGET_ROW_UNKNOWN4:
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE TARGET_ROW_UNKNOWN5
	TYA
	DEC
	STA $02
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	CMP $02
	BNE TARGET_ROW_UNKNOWN5
	LOADPTR POWERS_OF_TWO_32BIT, $06
	LDA $0E
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $0A
	STY $0C
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	ORA $0A
	STA $06
	LDA $08
	ORA $0C
	STA $08
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
TARGET_ROW_UNKNOWN5:
	TXA
	CLC
	ADC #$004E
	TAX
	LDA $0E
	INC
	STA $0E
TARGET_ROW_UNKNOWN6:
	CMP #$0020
	BCS TARGET_ROW_UNKNOWN7
	BEQ TARGET_ROW_UNKNOWN7
	JMP a:.LOWORD(TARGET_ROW_UNKNOWN0)
TARGET_ROW_UNKNOWN7:
	PLD
	RTL

TARGET_ALL: ;$C26E00
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	LDX #$9FAC
	LDA #$0000
	STA $0E
	BRA TARGET_ALL_UNKNOWN2
TARGET_ALL_UNKNOWN0:
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BEQ TARGET_ALL_UNKNOWN1
	LOADPTR POWERS_OF_TWO_32BIT, $06
	LDA $0E
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $0A
	STY $0C
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	ORA $0A
	STA $06
	LDA $08
	ORA $0C
	STA $08
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
TARGET_ALL_UNKNOWN1:
	TXA
	CLC
	ADC #$004E
	TAX
	LDA $0E
	INC
	STA $0E
TARGET_ALL_UNKNOWN2:
	CMP #$0020
	BCC TARGET_ALL_UNKNOWN0
	PLD
	RTL

REMOVE_NPC_TARGETTING: ;$C26E77
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDX #$9FAC
	LDA #$0000
	STA $0E
	BRA REMOVE_NPC_TARGETTING_UNKNOWN2
REMOVE_NPC_TARGETTING_UNKNOWN0:
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BEQ REMOVE_NPC_TARGETTING_UNKNOWN1
	LDA a:.LOWORD(RAM)+15,X
	AND #$00FF
	BEQ REMOVE_NPC_TARGETTING_UNKNOWN1
	LOADPTR POWERS_OF_TWO_32BIT, $06
	LDA $0E
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $0A
	STY $0C
	LDA $0A
	EOR #$FFFF
	STA $0A
	LDA $0C
	EOR #$FFFF
	STA $0C
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	AND $0A
	STA $06
	LDA $08
	AND $0C
	STA $08
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
REMOVE_NPC_TARGETTING_UNKNOWN1:
	TXA
	CLC
	ADC #$004E
	TAX
	LDA $0E
	INC
	STA $0E
REMOVE_NPC_TARGETTING_UNKNOWN2:
	CMP #$0020
	BCC REMOVE_NPC_TARGETTING_UNKNOWN0
	PLD
	RTL

RANDOM_TARGETTING: ;$C26EF8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEA
	TCD
	LDA $24
	STA $0A
	LDA $26
	STA $0C
	LDA $0A
	STA $12
	LDA $0C
	STA $14
	LDA #$0000
	STA $06
	LDA #$0000
	STA $08
	LDA $0C
	CMP $08
	BNE RANDOM_TARGETTING_UNKNOWN0
	LDA $0A
	CMP $06
RANDOM_TARGETTING_UNKNOWN0:
	BNE RANDOM_TARGETTING_UNKNOWN1
	LDA $06
	STA $1C
	LDA $08
	STA $1E
	JMP a:.LOWORD(RANDOM_TARGETTING_UNKNOWN6)
RANDOM_TARGETTING_UNKNOWN1:
	LDY #$0000
	STY $10
	JSR a:.LOWORD(RAND_LONG)
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	AND #$001F
	INC
	STA $0E
	BRA RANDOM_TARGETTING_UNKNOWN5
RANDOM_TARGETTING_UNKNOWN2:
	LDY $10
	INY
	STY $10
	CPY #$0020
	BNE RANDOM_TARGETTING_UNKNOWN3
	LDY #$0000
	STY $10
RANDOM_TARGETTING_UNKNOWN3:
	LDA $12
	STA $0A
	LDA $14
	STA $0C
	PHA
	LDA $0A
	PHA
	LOADPTR POWERS_OF_TWO_32BIT, $06
	TYA
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $0A
	STY $0C
	PLA
	STA $06
	PLA
	STA $08
	LDA $06
	AND $0A
	STA $06
	LDA $08
	AND $0C
	STA $08
	LDA #$0000
	STA $0A
	LDA #$0000
	STA $0C
	LDA $08
	CMP $0C
	BNE RANDOM_TARGETTING_UNKNOWN4
	LDA $06
	CMP $0A
RANDOM_TARGETTING_UNKNOWN4:
	BEQ RANDOM_TARGETTING_UNKNOWN2
RANDOM_TARGETTING_UNKNOWN5:
	LDA $0E
	TAX
	DEC
	STA $0E
	CPX #$0000
	BNE RANDOM_TARGETTING_UNKNOWN2
	LOADPTR POWERS_OF_TWO_32BIT, $0A
	LDY $10
	TYA
	ASL
	ASL
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $1C
	LDA $08
	STA $1E
RANDOM_TARGETTING_UNKNOWN6:
	PLD
	RTL

UNKNOWN_C26FDC: ;$C26FDC
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $0E
	LOADPTR POWERS_OF_TWO_32BIT, $06
	LDA $0E
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $0A
	STY $0C
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	ORA $0A
	STA $06
	LDA $08
	ORA $0C
	STA $08
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	PLD
	RTL

IS_CHAR_TARGETTED: ;$C27029
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $0E
	LDX #$0000
	LOADPTR POWERS_OF_TWO_32BIT, $06
	LDA $0E
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $0A
	STY $0C
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	AND $0A
	STA $06
	LDA $08
	AND $0C
	STA $08
	LDA #$0000
	STA $0A
	LDA #$0000
	STA $0C
	LDA $08
	CMP $0C
	BNE IS_CHAR_TARGETTED_UNKNOWN0
	LDA $06
	CMP $0A
IS_CHAR_TARGETTED_UNKNOWN0:
	BEQ IS_CHAR_TARGETTED_UNKNOWN1
	LDX #$0001
IS_CHAR_TARGETTED_UNKNOWN1:
	TXA
	PLD
	RTL

REMOVE_TARGET: ;$C27089
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STA $0E
	LOADPTR POWERS_OF_TWO_32BIT, $06
	LDA $0E
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $0A
	STY $0C
	LDA $0A
	EOR #$FFFF
	STA $0A
	LDA $0C
	EOR #$FFFF
	STA $0C
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	AND $0A
	STA $06
	LDA $08
	AND $0C
	STA $08
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	PLD
	RTL

REMOVE_DEAD_TARGETTING: ;$C270E4
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDX #$0000
	STX $0E
	BRA REMOVE_DEAD_TARGETTING_UNKNOWN2
REMOVE_DEAD_TARGETTING_UNKNOWN0:
	TXA
	JSL IS_CHAR_TARGETTED
	CMP #$0000
	BEQ REMOVE_DEAD_TARGETTING_UNKNOWN1
	LDX $0E
	TXA
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::afflictions,X
	AND #$00FF
	CMP #STATUS_0::UNCONSCIOUS
	BNE REMOVE_DEAD_TARGETTING_UNKNOWN1
	LDX $0E
	TXA
	JSL REMOVE_TARGET
REMOVE_DEAD_TARGETTING_UNKNOWN1:
	LDX $0E
	INX
	STX $0E
REMOVE_DEAD_TARGETTING_UNKNOWN2:
	CPX #$0020
	BCC REMOVE_DEAD_TARGETTING_UNKNOWN0
	PLD
	RTS

SET_HP: ;$C27126
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	TXY
	STY $10
	TAX
	LDA a:.LOWORD(RAM)+21,X
	STA $0E
	STA $02
	TYA
	CMP $02
	BCC SET_HP_UNKNOWN0
	BEQ SET_HP_UNKNOWN0
	LDA $0E
	TAY
	STY $10
SET_HP_UNKNOWN0:
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BNE SET_HP_UNKNOWN2
	LDA a:.LOWORD(RAM)+15,X
	AND #$00FF
	BNE SET_HP_UNKNOWN1
	TYA
	STA a:.LOWORD(RAM)+19,X
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDY $10
	TYA
	STA .LOWORD(CHAR_STRUCT)+char_struct::current_hp_target,X
	BRA SET_HP_UNKNOWN3
SET_HP_UNKNOWN1:
	TYA
	STA a:.LOWORD(RAM)+17,X
	TYA
	STA a:.LOWORD(RAM)+19,X
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	ASL
	TAX
	TYA
	STA .LOWORD(GAME_STATE)+game_state::party_npc_1_hp,X
	BRA SET_HP_UNKNOWN3
SET_HP_UNKNOWN2:
	TYA
	STA a:.LOWORD(RAM)+17,X
	TYA
	STA a:.LOWORD(RAM)+19,X
SET_HP_UNKNOWN3:
	PLD
	RTS

SET_PP: ;$C27191
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	TXY
	STY $10
	TAX
	LDA a:.LOWORD(RAM)+27,X
	STA $0E
	STA $02
	TYA
	CMP $02
	BCC SET_PP_UNKNOWN0
	BEQ SET_PP_UNKNOWN0
	LDA $0E
	TAY
	STY $10
SET_PP_UNKNOWN0:
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BNE SET_PP_UNKNOWN2
	LDA a:.LOWORD(RAM)+15,X
	AND #$00FF
	BNE SET_PP_UNKNOWN1
	TYA
	STA a:.LOWORD(RAM)+25,X
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDY $10
	TYA
	STA .LOWORD(CHAR_STRUCT)+char_struct::current_pp_target,X
	BRA SET_PP_UNKNOWN3
SET_PP_UNKNOWN1:
	TYA
	STA a:.LOWORD(RAM)+23,X
	TYA
	STA a:.LOWORD(RAM)+25,X
	BRA SET_PP_UNKNOWN3
SET_PP_UNKNOWN2:
	TYA
	STA a:.LOWORD(RAM)+23,X
	TYA
	STA a:.LOWORD(RAM)+25,X
SET_PP_UNKNOWN3:
	PLD
	RTS

REDUCE_HP: ;$C271F0
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STX $02
	TAY
	LDA a:.LOWORD(RAM)+19,Y
	STA $0E
	STA $04
	LDA $02
	CMP $04
	BCC REDUCE_HP_UNKNOWN0
	BEQ REDUCE_HP_UNKNOWN0
	LDA #$0000
	BRA REDUCE_HP_UNKNOWN1
REDUCE_HP_UNKNOWN0:
	LDA $0E
	SEC
	SBC $02
REDUCE_HP_UNKNOWN1:
	TAX
	TYA
	JSR a:.LOWORD(SET_HP)
	PLD
	RTS

REDUCE_PP: ;$C2721D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STX $02
	TAY
	LDA a:.LOWORD(RAM)+25,Y
	STA $0E
	STA $04
	LDA $02
	CMP $04
	BCC REDUCE_PP_UNKNOWN0
	BEQ REDUCE_PP_UNKNOWN0
	LDA #$0000
	BRA REDUCE_PP_UNKNOWN1
REDUCE_PP_UNKNOWN0:
	LDA $0E
	SEC
	SBC $02
REDUCE_PP_UNKNOWN1:
	TAX
	TYA
	JSR a:.LOWORD(SET_PP)
	PLD
	RTS

.INCLUDE "battle/inflict_status.asm"

RECOVER_HP: ;$C27294
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE8
	TCD
	PLA
	STX $16
	STA $02
	LDX $02
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	CMP #$0001
	BNE RECOVER_HP_UNKNOWN2
	LDX $02
	LDA a:.LOWORD(RAM)+29,X
	AND #$00FF
	CMP #$0001
	BEQ RECOVER_HP_UNKNOWN1
	LDX $16
	STX $04
	TXA
	LDX $02
	CLC
	ADC a:.LOWORD(RAM)+19,X
	TAY
	STY $16
	TYX
	LDA $02
	JSR a:.LOWORD(SET_HP)
	LDX $02
	LDY $16
	TYA
	CMP a:.LOWORD(RAM)+21,X
	BCC RECOVER_HP_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF69A1
	BRA RECOVER_HP_UNKNOWN2
RECOVER_HP_UNKNOWN0:
	LOADPTR TEXT_BLOCK_EF69BA, $0E
	LDA $04
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	BRA RECOVER_HP_UNKNOWN2
RECOVER_HP_UNKNOWN1:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7696
RECOVER_HP_UNKNOWN2:
	PLD
	RTS

RECOVER_PP: ;$C27318
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE4
	TCD
	PLA
	STX $04
	STA $02
	STA $1A
	LDX $02
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	CMP #$0001
	BNE RECOVER_PP_UNKNOWN2
	LDX $02
	LDA a:.LOWORD(RAM)+29,X
	AND #$00FF
	CMP #$0001
	BEQ RECOVER_PP_UNKNOWN2
	LDX $02
	LDY a:.LOWORD(RAM)+25,X
	LDX $02
	LDA a:.LOWORD(RAM)+27,X
	STA $18
	STA $02
	TYA
	CLC
	ADC $04
	CMP $02
	BCC RECOVER_PP_UNKNOWN0
	STY $02
	LDA $18
	SEC
	SBC $02
	BRA RECOVER_PP_UNKNOWN1
RECOVER_PP_UNKNOWN0:
	LDA $04
RECOVER_PP_UNKNOWN1:
	TAY
	STY $16
	LDA $1A
	STA $02
	LDX $02
	LDA $04
	CLC
	ADC a:.LOWORD(RAM)+25,X
	TAX
	LDA $02
	JSR a:.LOWORD(SET_PP)
	LOADPTR TEXT_BLOCK_EF69D2, $0E
	LDY $16
	TYA
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
RECOVER_PP_UNKNOWN2:
	PLD
	RTS

REVIVE_TARGET: ;$C27397
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE6
	TCD
	PLA
	TXY
	STY $18
	STA $04
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6F7C
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	LDX $04
	STA a:.LOWORD(RAM)+35,X
	LDX $04
	STA a:.LOWORD(RAM)+34,X
	LDX $04
	STA a:.LOWORD(RAM)+33,X
	LDX $04
	STA a:.LOWORD(RAM)+32,X
	LDX $04
	STA a:.LOWORD(RAM)+31,X
	LDX $04
	STA a:.LOWORD(RAM)+30,X
	LDX $04
	STA a:.LOWORD(RAM)+29,X
	LDX $04
	REP #PROC_FLAGS::ACCUM8
	STZ a:.LOWORD(RAM)+4,X
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	LDX $04
	STA a:.LOWORD(RAM)+13,X
	LDY $18
	TYX
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	JSR a:.LOWORD(SET_HP)
	LDX $04
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BNE REVIVE_TARGET_UNKNOWN0
	LDX $04
	LDA a:.LOWORD(RAM)+15,X
	AND #$00FF
	BNE REVIVE_TARGET_UNKNOWN0
	LDA $04
	CLC
	ADC #$0010
	TAX
	STX $16
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDY $18
	TYA
	STA .LOWORD(CHAR_STRUCT)+char_struct::current_hp_target,X
	LDX $16
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA #$0001
	STA .LOWORD(CHAR_STRUCT)+char_struct::current_hp,X
REVIVE_TARGET_UNKNOWN0:
	LDX $04
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BEQ REVIVE_TARGET_UNKNOWN1
	JMP a:.LOWORD(REVIVE_TARGET_UNKNOWN11)
REVIVE_TARGET_UNKNOWN1:
	LDX $04
	LDA a:.LOWORD(RAM)+15,X
	AND #$00FF
	BEQ REVIVE_TARGET_UNKNOWN2
	JMP a:.LOWORD(REVIVE_TARGET_UNKNOWN11)
REVIVE_TARGET_UNKNOWN2:
	LDA #$9FAC
	LDX #$0000
	STX $18
	BRA REVIVE_TARGET_UNKNOWN4
REVIVE_TARGET_UNKNOWN3:
	TAX
	SEP #PROC_FLAGS::ACCUM8
	STZ a:.LOWORD(RAM)+75,X
	CLC
	REP #PROC_FLAGS::ACCUM8
	ADC #$004E
	LDX $18
	INX
	STX $18
REVIVE_TARGET_UNKNOWN4:
	CPX #$0020
	BCC REVIVE_TARGET_UNKNOWN3
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	LDX $04
	STA a:.LOWORD(RAM)+75,X
	LDX #$0001
	STX $18
	BRA REVIVE_TARGET_UNKNOWN6
REVIVE_TARGET_UNKNOWN5:
	STX $02
	LDX $04
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+67,X
	AND #$00FF
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC $02
	ASL
	TAX
	STZ $0380,X
	LDX $18
	INX
	STX $18
REVIVE_TARGET_UNKNOWN6:
	CPX #$0010
	BCC REVIVE_TARGET_UNKNOWN5
	REP #PROC_FLAGS::ACCUM8
	LDA #$000A
	JSL UNKNOWN_C2FAD8
	LDA #$0001
	STA $02
	BRA REVIVE_TARGET_UNKNOWN8
REVIVE_TARGET_UNKNOWN7:
	LDA #$001F
	STA $0E
	TAY
	TAX
	STX $14
	LDX $04
	LDA a:.LOWORD(RAM)+67,X
	AND #$00FF
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC $02
	LDX $14
	JSL UNKNOWN_C2FB35
	INC $02
REVIVE_TARGET_UNKNOWN8:
	LDA $02
	CMP #$0010
	BCC REVIVE_TARGET_UNKNOWN7
	LDA #1*SIXTH_OF_A_SECOND
	JSR a:.LOWORD(WAIT)
	LDA #$0014
	JSL UNKNOWN_C2FAD8
	LDA #$0001
	STA $02
	BRA REVIVE_TARGET_UNKNOWN10
REVIVE_TARGET_UNKNOWN9:
	LDX $04
	LDA a:.LOWORD(RAM)+67,X
	AND #$00FF
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC $02
	STA $14
	ASL
	TAX
	LDA $0300,X
	TAX
	STX $12
	SEP #PROC_FLAGS::ACCUM8
	LDA #$000A
	PHA
	REP #PROC_FLAGS::ACCUM8
	TXA
	SEP #PROC_FLAGS::INDEX8
	PLY
	JSL ASR8_UNKNOWN1
	AND #$001F
	STA $0E
	REP #PROC_FLAGS::INDEX8
	LDX $12
	TXA
	LSR
	LSR
	LSR
	LSR
	LSR
	AND #$001F
	TAY
	TXA
	AND #$001F
	TAX
	LDA $14
	JSL UNKNOWN_C2FB35
	INC $02
REVIVE_TARGET_UNKNOWN10:
	LDA $02
	CMP #$0010
	BCC REVIVE_TARGET_UNKNOWN9
	LDA #2*SIXTHS_OF_A_SECOND
	JSR a:.LOWORD(WAIT)
REVIVE_TARGET_UNKNOWN11:
	LDA #$0001
	PLD
	RTS

.INCLUDE "battle/ko_target.asm"

SUCCESS_LUCK80: ;$C27C96
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0050
	JSR a:.LOWORD(RAND_LIMIT)
	LDX .LOWORD(CURRENT_TARGET)
	CMP a:.LOWORD(RAM)+46,X
	BCS SUCCESS_LUCK80_SUCCESS
	LDA #$0000
	BRA SUCCESS_LUCK80_RETURN
SUCCESS_LUCK80_SUCCESS:
	LDA #$0001
SUCCESS_LUCK80_RETURN:
	RTS

SUCCESS_SPEED: ;$C27CAF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	TAY
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+42,X
	ASL
	TAX
	STX $10
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+42,X
	STA $0E
	STA $02
	LDX $10
	TXA
	CMP $02
	BCC SUCCESS_SPEED_UNKNOWN0
	LDA $0E
	STA $02
	TXA
	SEC
	SBC $02
	TAX
	STX $10
	BRA SUCCESS_SPEED_UNKNOWN1
SUCCESS_SPEED_UNKNOWN0:
	LDX #$0000
	STX $10
SUCCESS_SPEED_UNKNOWN1:
	TYA
	JSR a:.LOWORD(RAND_LIMIT)
	LDX $10
	STX $02
	CMP $02
	BCC SUCCESS_SPEED_UNKNOWN2
	LDA #$0001
	BRA SUCCESS_SPEED_UNKNOWN3
SUCCESS_SPEED_UNKNOWN2:
	LDA #$0000
SUCCESS_SPEED_UNKNOWN3:
	PLD
	RTS

ATK_FAIL_CHK: ;$C27CFD
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+15,X
	AND #$00FF
	BEQ ATK_FAIL_CHK_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
	LDA #$0001
	BRA ATK_FAIL_CHK_UNKNOWN1
ATK_FAIL_CHK_UNKNOWN0:
	LDA #$0000
ATK_FAIL_CHK_UNKNOWN1:
	PLD
	RTS

INCREASE_OFFENSE_16TH: ;$C27D28
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	STA $02
	CLC
	ADC #$0026
	TAY
	LDA a:.LOWORD(RAM),Y
	LSR
	LSR
	LSR
	LSR
	BEQ INCREASE_OFFENSE_16TH_UNKNOWN0
	TAX
	BRA INCREASE_OFFENSE_16TH_UNKNOWN1
INCREASE_OFFENSE_16TH_UNKNOWN0:
	LDX #$0001
INCREASE_OFFENSE_16TH_UNKNOWN1:
	STX $04
	LDA a:.LOWORD(RAM),Y
	CLC
	ADC $04
	STA a:.LOWORD(RAM),Y
	LDA $02
	CLC
	ADC #$0026
	TAX
	STX $10
	LDX $02
	LDA a:.LOWORD(RAM)+50,X
	AND #$00FF
	STA $04
	ASL
	ASL
	ADC $04
	LSR
	LSR
	STA $0E
	STA $02
	LDX $10
	LDA a:.LOWORD(RAM),X
	CMP $02
	BCC INCREASE_OFFENSE_16TH_UNKNOWN2
	BEQ INCREASE_OFFENSE_16TH_UNKNOWN2
	LDA $0E
	STA a:.LOWORD(RAM),X
INCREASE_OFFENSE_16TH_UNKNOWN2:
	PLD
	RTS

INCREASE_DEFENSE_16TH: ;$C27D82
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	STA $02
	CLC
	ADC #$0028
	TAY
	LDA a:.LOWORD(RAM),Y
	LSR
	LSR
	LSR
	LSR
	BEQ INCREASE_DEFENSE_16TH_UNKNOWN0
	TAX
	BRA INCREASE_DEFENSE_16TH_UNKNOWN1
INCREASE_DEFENSE_16TH_UNKNOWN0:
	LDX #$0001
INCREASE_DEFENSE_16TH_UNKNOWN1:
	STX $04
	LDA a:.LOWORD(RAM),Y
	CLC
	ADC $04
	STA a:.LOWORD(RAM),Y
	LDA $02
	CLC
	ADC #$0028
	TAX
	STX $10
	LDX $02
	LDA a:.LOWORD(RAM)+51,X
	AND #$00FF
	STA $04
	ASL
	ASL
	ADC $04
	LSR
	LSR
	STA $0E
	STA $02
	LDX $10
	LDA a:.LOWORD(RAM),X
	CMP $02
	BCC INCREASE_DEFENSE_16TH_UNKNOWN2
	BEQ INCREASE_DEFENSE_16TH_UNKNOWN2
	LDA $0E
	STA a:.LOWORD(RAM),X
INCREASE_DEFENSE_16TH_UNKNOWN2:
	PLD
	RTS

HEXADECIMATE_OFFENSE: ;$C27DDC
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	STA $02
	CLC
	ADC #$0026
	TAY
	LDA a:.LOWORD(RAM),Y
	LSR
	LSR
	LSR
	LSR
	BEQ HEXADECIMATE_OFFENSE_UNKNOWN0
	TAX
	BRA HEXADECIMATE_OFFENSE_UNKNOWN1
HEXADECIMATE_OFFENSE_UNKNOWN0:
	LDX #$0001
HEXADECIMATE_OFFENSE_UNKNOWN1:
	STX $04
	LDA a:.LOWORD(RAM),Y
	SEC
	SBC $04
	STA a:.LOWORD(RAM),Y
	LDA $02
	CLC
	ADC #$0026
	TAX
	STX $10
	LDX $02
	LDA a:.LOWORD(RAM)+50,X
	AND #$00FF
	STA $04
	ASL
	ADC $04
	LSR
	LSR
	STA $0E
	STA $02
	LDX $10
	LDA a:.LOWORD(RAM),X
	CMP $02
	BCS HEXADECIMATE_OFFENSE_UNKNOWN2
	LDA $0E
	STA a:.LOWORD(RAM),X
HEXADECIMATE_OFFENSE_UNKNOWN2:
	PLD
	RTS

HEXADECIMATE_DEFENSE: ;$C27E33
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	STA $02
	CLC
	ADC #$0028
	TAY
	LDA a:.LOWORD(RAM),Y
	LSR
	LSR
	LSR
	LSR
	BEQ HEXADECIMATE_DEFENSE_UNKNOWN0
	TAX
	BRA HEXADECIMATE_DEFENSE_UNKNOWN1
HEXADECIMATE_DEFENSE_UNKNOWN0:
	LDX #$0001
HEXADECIMATE_DEFENSE_UNKNOWN1:
	STX $04
	LDA a:.LOWORD(RAM),Y
	SEC
	SBC $04
	STA a:.LOWORD(RAM),Y
	LDA $02
	CLC
	ADC #$0028
	TAX
	STX $10
	LDX $02
	LDA a:.LOWORD(RAM)+51,X
	AND #$00FF
	STA $04
	ASL
	ADC $04
	LSR
	LSR
	STA $0E
	STA $02
	LDX $10
	LDA a:.LOWORD(RAM),X
	CMP $02
	BCS HEXADECIMATE_DEFENSE_UNKNOWN2
	LDA $0E
	STA a:.LOWORD(RAM),X
HEXADECIMATE_DEFENSE_UNKNOWN2:
	PLD
	RTS

SWAP_ATTACKER_WITH_TARGET: ;$C27E8A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA .LOWORD(CURRENT_ATTACKER)
	STA $0E
	LDA .LOWORD(CURRENT_TARGET)
	STA .LOWORD(CURRENT_ATTACKER)
	LDA $0E
	STA .LOWORD(CURRENT_TARGET)
	LDA #$0000
	JSL FIX_ATTACKER_NAME
	JSL FIX_TARGET_NAME
	PLD
	RTS

.INCLUDE "battle/calc_damage.asm"

.INCLUDE "battle/calc_damage_reduction.asm"

.INCLUDE "battle/miss_calc.asm"

.INCLUDE "battle/smaaaash.asm"

.INCLUDE "battle/determine_dodge.asm"

.INCLUDE "battle/actions/level_2_attack.asm"

.INCLUDE "battle/heal_strangeness.asm"

.INCLUDE "battle/actions/bash.asm"

.INCLUDE "battle/actions/level_4_attack.asm"

.INCLUDE "battle/actions/level_3_attack.asm"

.INCLUDE "battle/actions/level_1_attack.asm"

.INCLUDE "battle/actions/shoot.asm"

.INCLUDE "battle/actions/spy.asm"

.INCLUDE "battle/actions/null.asm"

.INCLUDE "battle/actions/steal.asm"

.INCLUDE "battle/actions/freeze_time.asm"

.INCLUDE "battle/actions/diamondize.asm"

.INCLUDE "battle/actions/paralyze.asm"

.INCLUDE "battle/actions/nauseate.asm"

.INCLUDE "battle/actions/poison.asm"

.INCLUDE "battle/actions/cold.asm"

.INCLUDE "battle/actions/mushroomize.asm"

.INCLUDE "battle/actions/possess.asm"

.INCLUDE "battle/actions/crying.asm"

BTLACT_IMMOBILIZE: ;$C28CB8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDY #$0003
	LDX #$0002
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ BTLACT_IMMOBILIZE_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6BD3
	BRA BTLACT_IMMOBILIZE_UNKNOWN1
BTLACT_IMMOBILIZE_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_IMMOBILIZE_UNKNOWN1:
	PLD
	RTL

BTLACT_SOLIDIFY: ;$C28CF1
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_SOLIDIFY_UNKNOWN1
	JSR a:.LOWORD(SUCCESS_LUCK80)
	CMP #$0000
	BEQ BTLACT_SOLIDIFY_UNKNOWN0
	LDY #$0004
	LDX #$0002
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ BTLACT_SOLIDIFY_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6BEF
	BRA BTLACT_SOLIDIFY_UNKNOWN1
BTLACT_SOLIDIFY_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_SOLIDIFY_UNKNOWN1:
	PLD
	RTL

REDIRECT_BTLACT_BRAINSHOCK_A: ;$C28D3A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_BRAINSHOCK_A
	RTL

SUCCESS_LUCK40: ;$C28D41
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0028
	JSR a:.LOWORD(RAND_LIMIT)
	LDX .LOWORD(CURRENT_TARGET)
	CMP a:.LOWORD(RAM)+46,X
	BCS SUCCESS_LUCK40_UNKNOWN0
	LDA #$0000
	BRA SUCCESS_LUCK40_UNKNOWN1
SUCCESS_LUCK40_UNKNOWN0:
	LDA #$0001
SUCCESS_LUCK40_UNKNOWN1:
	RTS

BTLACT_DISTRACT: ;$C28D5A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_DISTRACT_UNKNOWN1
	JSR a:.LOWORD(SUCCESS_LUCK40)
	CMP #$0000
	BEQ BTLACT_DISTRACT_UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+55,X
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BEQ BTLACT_DISTRACT_UNKNOWN0
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0021
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BNE BTLACT_DISTRACT_UNKNOWN0
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0004
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6C0B
	BRA BTLACT_DISTRACT_UNKNOWN1
BTLACT_DISTRACT_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_DISTRACT_UNKNOWN1:
	PLD
	RTL

BTLACT_FEELSTRANGE: ;$C28DBB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_FEELSTRANGE_UNKNOWN1
	LDY #$0001
	LDX #$0003
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ BTLACT_FEELSTRANGE_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6C3A
	BRA BTLACT_FEELSTRANGE_UNKNOWN1
BTLACT_FEELSTRANGE_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_FEELSTRANGE_UNKNOWN1:
	PLD
	RTL

BTLACT_CRYING2: ;$C28DFC
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_CRYING2_UNKNOWN1
	LDY #$0002
	TYX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ BTLACT_CRYING2_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6BBB
	BRA BTLACT_CRYING2_UNKNOWN1
BTLACT_CRYING2_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_CRYING2_UNKNOWN1:
	PLD
	RTL

REDIRECT_BTLACT_HYPNOSIS_A: ;$C28E3B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_HYPNOSIS_A
	RTL

BTLACT_REDUCEPP: ;$C28E42
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+25,X
	BNE BTLACT_REDUCEPP_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C8FB05
	BRA BTLACT_REDUCEPP_UNKNOWN3
BTLACT_REDUCEPP_UNKNOWN0:
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+27,X
	LSR
	LSR
	LSR
	LSR
	BEQ BTLACT_REDUCEPP_UNKNOWN2
	JSR a:.LOWORD(FIFTY_PERCENT_VARIANCE)
	TAY
	STY $16
	TYX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(REDUCE_PP)
	LOADPTR TEXT_BLOCK_EF7755, $0E
	LDY $16
	TYA
	STA $06
	STZ $08
	BPL BTLACT_REDUCEPP_UNKNOWN1
	DEC $08
BTLACT_REDUCEPP_UNKNOWN1:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	BRA BTLACT_REDUCEPP_UNKNOWN3
BTLACT_REDUCEPP_UNKNOWN2:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_REDUCEPP_UNKNOWN3:
	PLD
	RTL

BTLACT_CUTGUTS: ;$C28EAE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE6
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_CUTGUTS_UNKNOWN1
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$002C
	TAX
	LDA a:.LOWORD(RAM),X
	TAY
	STA $04
	ASL
	ADC $04
	LSR
	LSR
	STA a:.LOWORD(RAM),X
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$002C
	TAX
	STX $18
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+53,X
	AND #$00FF
	PHA
	ASL
	PLA
	ROR
	STA $16
	STA $02
	LDX $18
	LDA a:.LOWORD(RAM),X
	CMP $02
	BCS BTLACT_CUTGUTS_UNKNOWN0
	LDA $16
	STA a:.LOWORD(RAM),X
BTLACT_CUTGUTS_UNKNOWN0:
	LOADPTR TEXT_BLOCK_C8F7EE, $0E
	LDX .LOWORD(CURRENT_TARGET)
	TYA
	SEC
	SBC a:.LOWORD(RAM)+44,X
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
BTLACT_CUTGUTS_UNKNOWN1:
	PLD
	RTL

BTLACT_REDUCEOFFDEF: ;$C28F21
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_REDUCEOFFDEF_UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	LDY a:.LOWORD(RAM)+38,X
	STY $16
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(HEXADECIMATE_OFFENSE)
	LOADPTR TEXT_BLOCK_C8F885, $0E
	LDX .LOWORD(CURRENT_TARGET)
	LDY $16
	TYA
	SEC
	SBC a:.LOWORD(RAM)+38,X
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	LDX .LOWORD(CURRENT_TARGET)
	LDY a:.LOWORD(RAM)+40,X
	STY $16
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(HEXADECIMATE_DEFENSE)
	LOADPTR TEXT_BLOCK_C8F8A2, $0E
	LDX .LOWORD(CURRENT_TARGET)
	LDY $16
	TYA
	SEC
	SBC a:.LOWORD(RAM)+40,X
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
BTLACT_REDUCEOFFDEF_UNKNOWN0:
	PLD
	RTL

BTLACT_LEVEL_2_ATK_POISON: ;$C28F97
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_LEVEL_2_ATK_POISON_UNKNOWN1
	LDA #$0000
	JSR a:.LOWORD(MISS_CALC)
	CMP #$0000
	BNE BTLACT_LEVEL_2_ATK_POISON_UNKNOWN1
	JSR a:.LOWORD(SMAAAASH)
	CMP #$0000
	BNE BTLACT_LEVEL_2_ATK_POISON_UNKNOWN1
	JSR a:.LOWORD(DETERMINE_DODGE)
	CMP #$0000
	BNE BTLACT_LEVEL_2_ATK_POISON_UNKNOWN0
	JSR a:.LOWORD(BTLACT_LEVEL_2_ATK)
	JSR a:.LOWORD(HEAL_STRANGENESS)
	LDY #$0005
	LDX #$0000
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ BTLACT_LEVEL_2_ATK_POISON_UNKNOWN1
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6B18
	BRA BTLACT_LEVEL_2_ATK_POISON_UNKNOWN1
BTLACT_LEVEL_2_ATK_POISON_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7655
BTLACT_LEVEL_2_ATK_POISON_UNKNOWN1:
	PLD
	RTL

BTLACT_DOUBLE_BASH: ;$C28FF9
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_BASH
	JSL BTLACT_BASH
	RTL

REDIRECT_BTLACT_NULL: ;$C29004
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_NULL
	RTL

BTLACT_350_FIRE_DAMAGE: ;$C2900B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA #$015E
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	STA $0E
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+58,X
	AND #$00FF
	TAX
	LDA $0E
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	PLD
	RTL

REDIRECT_BTLACT_LEVEL_3_ATK: ;$C2902C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_LEVEL_3_ATK
	RTL

BTLACT_NULL2: ;$C29033
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_NULL3: ;$C29036
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_NULL4: ;$C29039
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_NULL5: ;$C2903C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_NULL6: ;$C2903F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_NULL7: ;$C29042
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_NULL8: ;$C29045
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_NULL9: ;$C29048
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_NULL10: ;$C2904B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_NULL11: ;$C2904E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_NEUTRALIZE: ;$C29051
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+50,X
	AND #$00FF
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+38,X
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+51,X
	AND #$00FF
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+40,X
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+52,X
	AND #$00FF
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+42,X
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+53,X
	AND #$00FF
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+44,X
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+54,X
	AND #$00FF
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+46,X
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAND_A)+1,X
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+35,X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7123
	PLD
	RTL

UNKNOWN_C290C6: ;$C290C6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA .LOWORD(MIRROR_ENEMY)
	BEQ UNKNOWN_C290C6_UNKNOWN3
	LDX #$9FAC
	STX $16
	LDY #$0000
	BRA UNKNOWN_C290C6_UNKNOWN2
UNKNOWN_C290C6_UNKNOWN0:
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BEQ UNKNOWN_C290C6_UNKNOWN1
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BNE UNKNOWN_C290C6_UNKNOWN1
	LDA a:.LOWORD(RAM),X
	CMP #$0004
	BNE UNKNOWN_C290C6_UNKNOWN1
	STZ .LOWORD(MIRROR_ENEMY)
	TXA
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA #$AA14
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL COPY_MIRROR_DATA
	LDX $16
	STZ a:.LOWORD(RAM)+4,X
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7142
	BRA UNKNOWN_C290C6_UNKNOWN3
UNKNOWN_C290C6_UNKNOWN1:
	TXA
	CLC
	ADC #$004E
	TAX
	STX $16
	INY
UNKNOWN_C290C6_UNKNOWN2:
	CPY #$0020
	BCC UNKNOWN_C290C6_UNKNOWN0
UNKNOWN_C290C6_UNKNOWN3:
	JSL TARGET_ALL
	JSR a:.LOWORD(REMOVE_DEAD_TARGETTING)
	LOADPTR BTLACT_NEUTRALIZE, $0E
	JSL UNKNOWN_C240A4
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	PLD
	RTL

BTLACT_LVL_2_ATK_DIAMONDIZE: ;$C2916E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BEQ BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN0
	JMP a:.LOWORD(BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN7)
BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN0:
	LDA #$0000
	JSR a:.LOWORD(MISS_CALC)
	CMP #$0000
	BEQ BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN1
	JMP a:.LOWORD(BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN7)
BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN1:
	JSR a:.LOWORD(SMAAAASH)
	CMP #$0000
	BEQ BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN2
	JMP a:.LOWORD(BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN7)
BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN2:
	JSR a:.LOWORD(DETERMINE_DODGE)
	CMP #$0000
	BEQ BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN3
	JMP a:.LOWORD(BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN6)
BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN3:
	JSR a:.LOWORD(BTLACT_LEVEL_2_ATK)
	JSR a:.LOWORD(HEAL_STRANGENESS)
	JSR a:.LOWORD(SUCCESS_LUCK80)
	CMP #$0000
	BNE BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN4
	JMP a:.LOWORD(BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN7)
BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN4:
	LDY #$0002
	LDX #$0000
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BNE BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN5
	JMP a:.LOWORD(BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN7)
BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN5:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+35,X
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+34,X
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+33,X
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+32,X
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+31,X
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+30,X
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$003F
	TAY
	LDA a:.LOWORD(RAM),Y
	STA $0A
	LDA a:.LOWORD(RAM)+2,Y
	STA $0C
	LDA .LOWORD(BATTLE_EXP_SCRATCH)
	STA $06
	LDA .LOWORD(BATTLE_EXP_SCRATCH)+2
	STA $08
	CLC
	LDA $06
	ADC $0A
	STA $06
	LDA $08
	ADC $0C
	STA $08
	LDA $06
	STA .LOWORD(BATTLE_EXP_SCRATCH)
	LDA $08
	STA .LOWORD(BATTLE_EXP_SCRATCH)+2
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+61,X
	CLC
	ADC .LOWORD(BATTLE_MONEY_SCRATCH)
	STA .LOWORD(BATTLE_MONEY_SCRATCH)
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6AC7
	BRA BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN7
BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN6:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7655
BTLACT_LVL_2_ATK_DIAMONDIZE_UNKNOWN7:
	PLD
	RTL

BTLACT_REDUCEOFF: ;$C29254
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_REDUCEOFF_UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	LDY a:.LOWORD(RAM)+38,X
	STY $16
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(HEXADECIMATE_OFFENSE)
	LOADPTR TEXT_BLOCK_C8F885, $0E
	LDX .LOWORD(CURRENT_TARGET)
	LDY $16
	TYA
	SEC
	SBC a:.LOWORD(RAM)+38,X
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
BTLACT_REDUCEOFF_UNKNOWN0:
	PLD
	RTL

BTLACT_CLUMSYDEATH: ;$C29298
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA f:PSI_TELEPORT_DEST_TABLE+428
	JSL GET_EVENT_FLAG
	CMP #$0000
	BEQ BTLACT_CLUMSYDEATH_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF733D
	SEP #PROC_FLAGS::ACCUM8
	LDA #TELEPORT_STYLE::INSTANT
	STA $0E
	LDA #$000F
	JSL SET_TELEPORT_STATE
	.A16
	BRA BTLACT_CLUMSYDEATH_UNKNOWN1
BTLACT_CLUMSYDEATH_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF72F7
	SEP #PROC_FLAGS::ACCUM8
	LDA #TELEPORT_STYLE::INSTANT
	STA $0E
	LDA #$000D
	JSL SET_TELEPORT_STATE
	.A16
	LDA #$0001
	STA .LOWORD(UNKNOWN_7EAA0E)
BTLACT_CLUMSYDEATH_UNKNOWN1:
	PLD
	RTL

BTLACT_ENEMYEXTEND: ;$C292EB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	RTL

BTLACT_MASTERBARFDEATH: ;$C292EE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA .LOWORD(CURRENT_ATTACKER)
	STA $04
	LDA .LOWORD(CURRENT_TARGET)
	STA $02
	STA $16
	JSL REDIRECT_HIDE_HPPP_WINDOWS
	LDA #$0004
	JSL ADD_CHAR_TO_PARTY
	LDA #$0000
	STA $14
	BRA BTLACT_MASTERBARFDEATH_UNKNOWN7
BTLACT_MASTERBARFDEATH_UNKNOWN0:
	LDA $14
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BNE BTLACT_MASTERBARFDEATH_UNKNOWN6
	TXA
	CLC
	ADC #$9FAC
	TAY
	STY $14
	TYX
	LDA #$0004
	JSL BATTLE_INIT_PLAYER_STATS
	LDY $14
	STY .LOWORD(CURRENT_ATTACKER)
	JSL REDIRECT_SHOW_HPPP_WINDOWS
	LDX #$0000
	BRA BTLACT_MASTERBARFDEATH_UNKNOWN3
BTLACT_MASTERBARFDEATH_UNKNOWN1:
	LDA .LOWORD(GAME_STATE)+122,X
	AND #$00FF
	CMP #$0004
	BNE BTLACT_MASTERBARFDEATH_UNKNOWN2
	TXA
	JSL REDIRECT_C43573
	BRA BTLACT_MASTERBARFDEATH_UNKNOWN9
BTLACT_MASTERBARFDEATH_UNKNOWN2:
	INX
BTLACT_MASTERBARFDEATH_UNKNOWN3:
	STX $02
	LDA #$0006
	CLC
	SBC $02
	BVS BTLACT_MASTERBARFDEATH_UNKNOWN4
	BPL BTLACT_MASTERBARFDEATH_UNKNOWN1
	BRA BTLACT_MASTERBARFDEATH_UNKNOWN5
BTLACT_MASTERBARFDEATH_UNKNOWN4:
	BMI BTLACT_MASTERBARFDEATH_UNKNOWN1
BTLACT_MASTERBARFDEATH_UNKNOWN5:
	BRA BTLACT_MASTERBARFDEATH_UNKNOWN9
BTLACT_MASTERBARFDEATH_UNKNOWN6:
	LDA $14
	INC
	STA $14
BTLACT_MASTERBARFDEATH_UNKNOWN7:
	STA $02
	LDA #$0020
	CLC
	SBC $02
	BVS BTLACT_MASTERBARFDEATH_UNKNOWN8
	BPL BTLACT_MASTERBARFDEATH_UNKNOWN0
	BRA BTLACT_MASTERBARFDEATH_UNKNOWN9
BTLACT_MASTERBARFDEATH_UNKNOWN8:
	BMI BTLACT_MASTERBARFDEATH_UNKNOWN0
BTLACT_MASTERBARFDEATH_UNKNOWN9:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF743B
	LDA #$0000
	JSL FIX_ATTACKER_NAME
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0015
	JSL REDIRECT_C1ACF8
	LDA f:BATTLE_ACTION_TABLE+364
	STA $06
	LDA f:BATTLE_ACTION_TABLE+366
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	JSL DISPLAY_IN_BATTLE_TEXT
	LDY #$0000
	STY $12
	BRA BTLACT_MASTERBARFDEATH_UNKNOWN12
BTLACT_MASTERBARFDEATH_UNKNOWN10:
	TYA
	LDY #.SIZEOF(battler)
	JSL MULT168
	.A16
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ BTLACT_MASTERBARFDEATH_UNKNOWN11
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BNE BTLACT_MASTERBARFDEATH_UNKNOWN11
	TXA
	CLC
	ADC #$9FAC
	STA .LOWORD(CURRENT_TARGET)
	JSL FIX_TARGET_NAME
	LDA #$0168
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(CALC_DAMAGE)
BTLACT_MASTERBARFDEATH_UNKNOWN11:
	LDY $12
	INY
	STY $12
BTLACT_MASTERBARFDEATH_UNKNOWN12:
	STY $02
	LDA #$0020
	CLC
	SBC $02
	BVS BTLACT_MASTERBARFDEATH_UNKNOWN13
	BPL BTLACT_MASTERBARFDEATH_UNKNOWN10
	BRA BTLACT_MASTERBARFDEATH_UNKNOWN14
BTLACT_MASTERBARFDEATH_UNKNOWN13:
	BMI BTLACT_MASTERBARFDEATH_UNKNOWN10
BTLACT_MASTERBARFDEATH_UNKNOWN14:
	LDA $04
	STA .LOWORD(CURRENT_ATTACKER)
	LDA $16
	STA $02
	STA .LOWORD(CURRENT_TARGET)
	LDA #$0000
	JSL FIX_ATTACKER_NAME
	JSL FIX_TARGET_NAME
	PLD
	RTL

PSI_SHIELD_NULLIFY: ;$C2941D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA #$0001
	STA .LOWORD(UNKNOWN_7EAA94)
	LDX .LOWORD(CURRENT_ATTACKER)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+8,X
	JSL REDIRECT_C1ACF8
	.A16
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+4,X
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	TAX
	INX
	INX
	LDA f:BATTLE_ACTION_TABLE,X
	AND #$00FF
	CMP #$0003
	BEQ PSI_SHIELD_NULLIFY_UNKNOWN2
	LDA #$0000
	BRA PSI_SHIELD_NULLIFY_RETURN
PSI_SHIELD_NULLIFY_UNKNOWN2:
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+35,X
	AND #$00FF
	CMP #$0001
	BEQ PSI_SHIELD_NULLIFY_UNKNOWN3
	CMP #$0002
	BEQ PSI_SHIELD_NULLIFY_UNKNOWN4
	BRA PSI_SHIELD_NULLIFY_UNKNOWN6
PSI_SHIELD_NULLIFY_UNKNOWN3:
	.A16
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF70D2
	LDA #$0001
	STA .LOWORD(UNKNOWN_7EAA96)
	JSR a:.LOWORD(SWAP_ATTACKER_WITH_TARGET)
	BRA PSI_SHIELD_NULLIFY_UNKNOWN6
PSI_SHIELD_NULLIFY_UNKNOWN4:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF70FA
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0025
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	DEC
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BNE PSI_SHIELD_NULLIFY_UNKNOWN5
	LDX .LOWORD(CURRENT_TARGET)
	SEP #PROC_FLAGS::ACCUM8
	STZ a:.LOWORD(RAM)+35,X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7099
PSI_SHIELD_NULLIFY_UNKNOWN5:
	LDA #$0001
	BRA PSI_SHIELD_NULLIFY_RETURN
PSI_SHIELD_NULLIFY_UNKNOWN6:
	LDA #$0000
PSI_SHIELD_NULLIFY_RETURN:
	PLD
	RTS

WEAKEN_SHIELD: ;$C294CE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	STZ .LOWORD(UNKNOWN_7EAA94)
	LDA .LOWORD(UNKNOWN_7EAA96)
	BEQ WEAKEN_SHIELD_UNKNOWN1
	JSR a:.LOWORD(SWAP_ATTACKER_WITH_TARGET)
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0025
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	DEC
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BNE WEAKEN_SHIELD_UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	SEP #PROC_FLAGS::ACCUM8
	STZ a:.LOWORD(RAM)+35,X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7099
WEAKEN_SHIELD_UNKNOWN0:
	STZ .LOWORD(UNKNOWN_7EAA96)
WEAKEN_SHIELD_UNKNOWN1:
	PLD
	RTS

PSI_ROCKIN_COMMON: ;$C29516
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEA
	TCD
	PLA
	TAX
	STX $14
	JSR a:.LOWORD(PSI_SHIELD_NULLIFY)
	CMP #$0000
	BNE PSI_ROCKIN_COMMON_UNKNOWN2
	LDX $14
	TXA
	JSR a:.LOWORD(FIFTY_PERCENT_VARIANCE)
	STA $12
	JSR a:.LOWORD(DETERMINE_DODGE)
	TAX
	BEQ PSI_ROCKIN_COMMON_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
	BRA PSI_ROCKIN_COMMON_UNKNOWN1
PSI_ROCKIN_COMMON_UNKNOWN0:
	LDX #$00FF
	LDA $12
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
PSI_ROCKIN_COMMON_UNKNOWN1:
	JSR a:.LOWORD(WEAKEN_SHIELD)
PSI_ROCKIN_COMMON_UNKNOWN2:
	PLD
	RTS

BTLACT_PSI_ROCKIN_A: ;$C29556
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #ROCKIN_ALPHA_DAMAGE
	JSR a:.LOWORD(PSI_ROCKIN_COMMON)
	RTL

BTLACT_PSI_ROCKIN_B: ;$C2955F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #ROCKIN_BETA_DAMAGE
	JSR a:.LOWORD(PSI_ROCKIN_COMMON)
	RTL

BTLACT_PSI_ROCKIN_G: ;$C29568
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #ROCKIN_GAMMA_DAMAGE
	JSR a:.LOWORD(PSI_ROCKIN_COMMON)
	RTL

BTLACT_PSI_ROCKIN_O: ;$C29571
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #ROCKIN_OMEGA_DAMAGE
	JSR a:.LOWORD(PSI_ROCKIN_COMMON)
	RTL

PSI_FIRE_COMMON: ;$C2957A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	STX $0E
	JSR a:.LOWORD(PSI_SHIELD_NULLIFY)
	CMP #$0000
	BNE PSI_FIRE_COMMON_UNKNOWN0
	LDX $0E
	TXA
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	STA $0E
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+58,X
	AND #$00FF
	TAX
	LDA $0E
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	JSR a:.LOWORD(WEAKEN_SHIELD)
PSI_FIRE_COMMON_UNKNOWN0:
	PLD
	RTS

BTLACT_PSI_FIRE_A: ;$C295AB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #FIRE_ALPHA_DAMAGE
	JSR a:.LOWORD(PSI_FIRE_COMMON)
	RTL

BTLACT_PSI_FIRE_B: ;$C295B4
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #FIRE_BETA_DAMAGE
	JSR a:.LOWORD(PSI_FIRE_COMMON)
	RTL

BTLACT_PSI_FIRE_G: ;$C295BD
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #FIRE_GAMMA_DAMAGE
	JSR a:.LOWORD(PSI_FIRE_COMMON)
	RTL

BTLACT_PSI_FIRE_O: ;$C295C6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #FIRE_OMEGA_DAMAGE
	JSR a:.LOWORD(PSI_FIRE_COMMON)
	RTL

PSI_FREEZE_COMMON: ;$C295CF
    .DEFINE TMPDAMAGE $12
    .DEFINE DAMAGEDONE $14
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEA
	TCD
	PLA
	TAX
	STX DAMAGEDONE
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE PSI_FREEZE_COMMON_RETURN
	JSR a:.LOWORD(PSI_SHIELD_NULLIFY)
	CMP #$0000
	BNE PSI_FREEZE_COMMON_RETURN
	LDX DAMAGEDONE
	TXA
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	STA TMPDAMAGE
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+56,X
	AND #$00FF
	TAX
	LDA TMPDAMAGE
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	TAX
	STX DAMAGEDONE
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+29,X
	AND #$00FF
	CMP #$0001
	BEQ PSI_FREEZE_COMMON_WEAKEN_SHIELD
	LDX DAMAGEDONE
	BEQ PSI_FREEZE_COMMON_WEAKEN_SHIELD
	LDA #$0064
	JSR a:.LOWORD(RAND_LIMIT)
	CMP #$0019
	BCS PSI_FREEZE_COMMON_WEAKEN_SHIELD
	LDY #$0004
	LDX #$0002
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ PSI_FREEZE_COMMON_WEAKEN_SHIELD
	LOADPTR TEXT_BLOCK_EF6BEF, $0E
	JSL DISPLAY_IN_BATTLE_TEXT
PSI_FREEZE_COMMON_WEAKEN_SHIELD:
	JSR a:.LOWORD(WEAKEN_SHIELD)
PSI_FREEZE_COMMON_RETURN:
	PLD
	RTS

BTLACT_PSI_FREEZE_A: ;$C29647
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #FREEZE_ALPHA_DAMAGE
	JSR a:.LOWORD(PSI_FREEZE_COMMON)
	RTL

BTLACT_PSI_FREEZE_B: ;$C29650
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #FREEZE_BETA_DAMAGE
	JSR a:.LOWORD(PSI_FREEZE_COMMON)
	RTL

BTLACT_PSI_FREEZE_G: ;$C29659
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #FREEZE_GAMMA_DAMAGE
	JSR a:.LOWORD(PSI_FREEZE_COMMON)
	RTL

BTLACT_PSI_FREEZE_O: ;$C29662
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #FREEZE_OMEGA_DAMAGE
	JSR a:.LOWORD(PSI_FREEZE_COMMON)
	RTL

PSI_THUNDER_COMMON: ;$C2966B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE4
	TCD
	PLA
	STX $1A
	STA $04
	LDY #$0000
	STY $18
	TYX
	STX $16
	BRA PSI_THUNDER_COMMON_UNKNOWN2
PSI_THUNDER_COMMON_UNKNOWN0:
	TXA
	JSL IS_CHAR_TARGETTED
	CMP #$0000
	BEQ PSI_THUNDER_COMMON_UNKNOWN1
	LDY $18
	INY
	STY $18
PSI_THUNDER_COMMON_UNKNOWN1:
	LDX $16
	INX
	STX $16
PSI_THUNDER_COMMON_UNKNOWN2:
	CPX #$0020
	BCC PSI_THUNDER_COMMON_UNKNOWN0
	LDY $18
	TYA
	ASL
	ASL
	ASL
	ASL
	ASL
	ASL
	STA $02
	CMP #$0100
	BCC PSI_THUNDER_COMMON_UNKNOWN3
	LDA #$00FF
	STA $02
PSI_THUNDER_COMMON_UNKNOWN3:
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	LDY #$0000
	STY $18
	JMP a:.LOWORD(PSI_THUNDER_COMMON_UNKNOWN20)
PSI_THUNDER_COMMON_UNKNOWN4:
	LDA $12
	STA $06
	LDA $14
	STA $08
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	JSL UNKNOWN_C2416F
	LDA #$0000
	STA $06
	LDA #$0000
	STA $08
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $0A
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $0C
	CMP $08
	BNE PSI_THUNDER_COMMON_UNKNOWN5
	LDA $0A
	CMP $06
PSI_THUNDER_COMMON_UNKNOWN5:
	BNE PSI_THUNDER_COMMON_UNKNOWN6
	JMP a:.LOWORD(PSI_THUNDER_COMMON_UNKNOWN21)
PSI_THUNDER_COMMON_UNKNOWN6:
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	JSL RANDOM_TARGETTING
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	LDX #$0000
	STX $16
	BRA PSI_THUNDER_COMMON_UNKNOWN8
PSI_THUNDER_COMMON_UNKNOWN7:
	TXA
	JSL IS_CHAR_TARGETTED
	CMP #$0000
	BNE PSI_THUNDER_COMMON_UNKNOWN9
	LDX $16
	INX
	STX $16
PSI_THUNDER_COMMON_UNKNOWN8:
	CPX #$0020
	BCC PSI_THUNDER_COMMON_UNKNOWN7
PSI_THUNDER_COMMON_UNKNOWN9:
	LDX $16
	TXA
	LDY #$004E
	JSL MULT168
	CLC
	ADC #$9FAC
	STA .LOWORD(CURRENT_TARGET)
	JSL FIX_TARGET_NAME
	LDA $02
	SEP #PROC_FLAGS::ACCUM8
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BNE PSI_THUNDER_COMMON_UNKNOWN10
	JMP a:.LOWORD(PSI_THUNDER_COMMON_UNKNOWN18)
PSI_THUNDER_COMMON_UNKNOWN10:
	.A16
	LDA $04
	CMP #$0078
	BNE PSI_THUNDER_COMMON_UNKNOWN11
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF8814
	BRA PSI_THUNDER_COMMON_UNKNOWN13
PSI_THUNDER_COMMON_UNKNOWN11:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF8823
	BRA PSI_THUNDER_COMMON_UNKNOWN13
PSI_THUNDER_COMMON_UNKNOWN12:
	JSL UNKNOWN_C12DD5
PSI_THUNDER_COMMON_UNKNOWN13:
	JSL UNKNOWN_C2EACF
	CMP #$0000
	BNE PSI_THUNDER_COMMON_UNKNOWN12
	LDX .LOWORD(CURRENT_TARGET)
	SEP #PROC_FLAGS::ACCUM8
	STZ a:.LOWORD(RAM)+75,X
	LDX .LOWORD(CURRENT_TARGET)
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BNE PSI_THUNDER_COMMON_UNKNOWN14
	LDX #$0001
	STX $16
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	INC
	LDX $16
	JSL FIND_ITEM_IN_INVENTORY2
	CMP #$0000
	BEQ PSI_THUNDER_COMMON_UNKNOWN14
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7160
	LDA #$0001
	STA .LOWORD(UNKNOWN_7EAA96)
	JSR a:.LOWORD(SWAP_ATTACKER_WITH_TARGET)
PSI_THUNDER_COMMON_UNKNOWN14:
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+35,X
	AND #$00FF
	TAX
	CPX #$0001
	BEQ PSI_THUNDER_COMMON_UNKNOWN15
	CPX #$0002
	BNE PSI_THUNDER_COMMON_UNKNOWN16
PSI_THUNDER_COMMON_UNKNOWN15:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAND_A)+1,X
PSI_THUNDER_COMMON_UNKNOWN16:
	JSR a:.LOWORD(PSI_SHIELD_NULLIFY)
	.A16
	CMP #$0000
	BNE PSI_THUNDER_COMMON_UNKNOWN17
	LDA $04
	JSR a:.LOWORD(FIFTY_PERCENT_VARIANCE)
	LDX #$00FF
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
PSI_THUNDER_COMMON_UNKNOWN17:
	JSR a:.LOWORD(WEAKEN_SHIELD)
	BRA PSI_THUNDER_COMMON_UNKNOWN19
PSI_THUNDER_COMMON_UNKNOWN18:
	.A16
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF8837
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C8FAF6
PSI_THUNDER_COMMON_UNKNOWN19:
	LDA #$0000
	JSL COUNT_CHARS
	CMP #$0000
	BEQ PSI_THUNDER_COMMON_UNKNOWN21
	LDA #$0001
	JSL COUNT_CHARS
	CMP #$0000
	BEQ PSI_THUNDER_COMMON_UNKNOWN21
	LDY $18
	INY
	STY $18
PSI_THUNDER_COMMON_UNKNOWN20:
	CPY $1A
	BCS PSI_THUNDER_COMMON_UNKNOWN21
	BEQ PSI_THUNDER_COMMON_UNKNOWN21
	JMP a:.LOWORD(PSI_THUNDER_COMMON_UNKNOWN4)
PSI_THUNDER_COMMON_UNKNOWN21:
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	PLD
	RTS

BTLACT_PSI_THUNDER_A: ;$C29871
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX #THUNDER_ALPHA_HITS
	LDA #THUNDER_ALPHA_DAMAGE
	JSR a:.LOWORD(PSI_THUNDER_COMMON)
	RTL

BTLACT_PSI_THUNDER_B: ;$C2987D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX #THUNDER_BETA_HITS
	LDA #THUNDER_BETA_DAMAGE
	JSR a:.LOWORD(PSI_THUNDER_COMMON)
	RTL

BTLACT_PSI_THUNDER_G: ;$C29889
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX #THUNDER_GAMMA_HITS
	LDA #THUNDER_GAMMA_DAMAGE
	JSR a:.LOWORD(PSI_THUNDER_COMMON)
	RTL

BTLACT_PSI_THUNDER_O: ;$C29895
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX #THUNDER_OMEGA_HITS
	LDA #THUNDER_OMEGA_DAMAGE
	JSR a:.LOWORD(PSI_THUNDER_COMMON)
	RTL

FLASH_IMMUNITY_TEST: ;$C298A1
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(PSI_SHIELD_NULLIFY)
	CMP #$0000
	BEQ FLASH_IMMUNITY_TEST_UNKNOWN0
	LDA #$0000
	BRA FLASH_IMMUNITY_TEST_UNKNOWN2
FLASH_IMMUNITY_TEST_UNKNOWN0:
	LDX .LOWORD(CURRENT_TARGET)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+57,X
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BEQ FLASH_IMMUNITY_TEST_UNKNOWN1
	LDA #$0001
	BRA FLASH_IMMUNITY_TEST_UNKNOWN2
FLASH_IMMUNITY_TEST_UNKNOWN1:
	.A16
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
	LDA #$0000
FLASH_IMMUNITY_TEST_UNKNOWN2:
	PLD
	RTS

FLASH_INFLICT_FEELING_STRANGE: ;$C298DE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDY #$0001
	LDX #$0003
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ FLASH_INFLICT_FEELING_STRANGE_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6C3A
	BRA FLASH_INFLICT_FEELING_STRANGE_UNKNOWN1
FLASH_INFLICT_FEELING_STRANGE_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
FLASH_INFLICT_FEELING_STRANGE_UNKNOWN1:
	PLD
	RTS

FLASH_INFLICT_PARALYSIS: ;$C29917
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDY #$0003
	LDX #$0000
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ FLASH_INFLICT_PARALYSIS_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6AE0
	BRA FLASH_INFLICT_PARALYSIS_UNKNOWN1
FLASH_INFLICT_PARALYSIS_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
FLASH_INFLICT_PARALYSIS_UNKNOWN1:
	PLD
	RTS

FLASH_INFLICT_CRYING: ;$C29950
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDY #$0002
	TYX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ FLASH_INFLICT_CRYING_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6BBB
	BRA FLASH_INFLICT_CRYING_UNKNOWN1
FLASH_INFLICT_CRYING_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
FLASH_INFLICT_CRYING_UNKNOWN1:
	PLD
	RTS

BTLACT_PSI_FLASH_A: ;$C29987
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_PSI_FLASH_A_UNKNOWN2
	JSR a:.LOWORD(FLASH_IMMUNITY_TEST)
	CMP #$0000
	BEQ BTLACT_PSI_FLASH_A_UNKNOWN1
	JSL RAND
	AND #$0007
	BNE BTLACT_PSI_FLASH_A_UNKNOWN0
	JSR a:.LOWORD(FLASH_INFLICT_FEELING_STRANGE)
	BRA BTLACT_PSI_FLASH_A_UNKNOWN1
BTLACT_PSI_FLASH_A_UNKNOWN0:
	JSR a:.LOWORD(FLASH_INFLICT_CRYING)
BTLACT_PSI_FLASH_A_UNKNOWN1:
	JSR a:.LOWORD(WEAKEN_SHIELD)
BTLACT_PSI_FLASH_A_UNKNOWN2:
	RTL

BTLACT_PSI_FLASH_B: ;$C299AE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_PSI_FLASH_B_UNKNOWN5
	JSR a:.LOWORD(FLASH_IMMUNITY_TEST)
	CMP #$0000
	BEQ BTLACT_PSI_FLASH_B_UNKNOWN4
	JSL RAND
	AND #$0007
	BEQ BTLACT_PSI_FLASH_B_UNKNOWN0
	CMP #$0001
	BEQ BTLACT_PSI_FLASH_B_UNKNOWN1
	CMP #$0002
	BEQ BTLACT_PSI_FLASH_B_UNKNOWN2
	BRA BTLACT_PSI_FLASH_B_UNKNOWN3
BTLACT_PSI_FLASH_B_UNKNOWN0:
	LDA .LOWORD(CURRENT_TARGET)
	JSL KO_TARGET
	BRA BTLACT_PSI_FLASH_B_UNKNOWN4
BTLACT_PSI_FLASH_B_UNKNOWN1:
	JSR a:.LOWORD(FLASH_INFLICT_PARALYSIS)
	BRA BTLACT_PSI_FLASH_B_UNKNOWN4
BTLACT_PSI_FLASH_B_UNKNOWN2:
	JSR a:.LOWORD(FLASH_INFLICT_FEELING_STRANGE)
	BRA BTLACT_PSI_FLASH_B_UNKNOWN4
BTLACT_PSI_FLASH_B_UNKNOWN3:
	JSR a:.LOWORD(FLASH_INFLICT_CRYING)
BTLACT_PSI_FLASH_B_UNKNOWN4:
	JSR a:.LOWORD(WEAKEN_SHIELD)
BTLACT_PSI_FLASH_B_UNKNOWN5:
	RTL

BTLACT_PSI_FLASH_G: ;$C299EF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_PSI_FLASH_G_UNKNOWN5
	JSR a:.LOWORD(FLASH_IMMUNITY_TEST)
	CMP #$0000
	BEQ BTLACT_PSI_FLASH_G_UNKNOWN4
	JSL RAND
	AND #$0007
	BEQ BTLACT_PSI_FLASH_G_UNKNOWN0
	CMP #$0001
	BEQ BTLACT_PSI_FLASH_G_UNKNOWN0
	CMP #$0002
	BEQ BTLACT_PSI_FLASH_G_UNKNOWN1
	CMP #$0003
	BEQ BTLACT_PSI_FLASH_G_UNKNOWN2
	BRA BTLACT_PSI_FLASH_G_UNKNOWN3
BTLACT_PSI_FLASH_G_UNKNOWN0:
	LDA .LOWORD(CURRENT_TARGET)
	JSL KO_TARGET
	BRA BTLACT_PSI_FLASH_G_UNKNOWN4
BTLACT_PSI_FLASH_G_UNKNOWN1:
	JSR a:.LOWORD(FLASH_INFLICT_PARALYSIS)
	BRA BTLACT_PSI_FLASH_G_UNKNOWN4
BTLACT_PSI_FLASH_G_UNKNOWN2:
	JSR a:.LOWORD(FLASH_INFLICT_FEELING_STRANGE)
	BRA BTLACT_PSI_FLASH_G_UNKNOWN4
BTLACT_PSI_FLASH_G_UNKNOWN3:
	JSR a:.LOWORD(FLASH_INFLICT_CRYING)
BTLACT_PSI_FLASH_G_UNKNOWN4:
	JSR a:.LOWORD(WEAKEN_SHIELD)
BTLACT_PSI_FLASH_G_UNKNOWN5:
	RTL

BTLACT_PSI_FLASH_O: ;$C29A35
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_PSI_FLASH_O_UNKNOWN5
	JSR a:.LOWORD(FLASH_IMMUNITY_TEST)
	CMP #$0000
	BEQ BTLACT_PSI_FLASH_O_UNKNOWN4
	JSL RAND
	AND #$0007
	BEQ BTLACT_PSI_FLASH_O_UNKNOWN0
	CMP #$0001
	BEQ BTLACT_PSI_FLASH_O_UNKNOWN0
	CMP #$0002
	BEQ BTLACT_PSI_FLASH_O_UNKNOWN0
	CMP #$0003
	BEQ BTLACT_PSI_FLASH_O_UNKNOWN1
	CMP #$0004
	BEQ BTLACT_PSI_FLASH_O_UNKNOWN2
	BRA BTLACT_PSI_FLASH_O_UNKNOWN3
BTLACT_PSI_FLASH_O_UNKNOWN0:
	LDA .LOWORD(CURRENT_TARGET)
	JSL KO_TARGET
	BRA BTLACT_PSI_FLASH_O_UNKNOWN4
BTLACT_PSI_FLASH_O_UNKNOWN1:
	JSR a:.LOWORD(FLASH_INFLICT_PARALYSIS)
	BRA BTLACT_PSI_FLASH_O_UNKNOWN4
BTLACT_PSI_FLASH_O_UNKNOWN2:
	JSR a:.LOWORD(FLASH_INFLICT_FEELING_STRANGE)
	BRA BTLACT_PSI_FLASH_O_UNKNOWN4
BTLACT_PSI_FLASH_O_UNKNOWN3:
	JSR a:.LOWORD(FLASH_INFLICT_CRYING)
BTLACT_PSI_FLASH_O_UNKNOWN4:
	JSR a:.LOWORD(WEAKEN_SHIELD)
BTLACT_PSI_FLASH_O_UNKNOWN5:
	RTL

PSI_STARSTORM_COMMON: ;$C29A80
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	STX $0E
	JSR a:.LOWORD(PSI_SHIELD_NULLIFY)
	CMP #$0000
	BNE PSI_STARSTORM_COMMON_UNKNOWN0
	LDX $0E
	TXA
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	LDX #$00FF
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	JSR a:.LOWORD(WEAKEN_SHIELD)
PSI_STARSTORM_COMMON_UNKNOWN0:
	PLD
	RTS

BTLACT_PSI_STARSTORM_A: ;$C29AA6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #STARSTORM_ALPHA_DAMAGE
	JSR a:.LOWORD(PSI_STARSTORM_COMMON)
	RTL

BTLACT_PSI_STARSTORM_O: ;$C29AAF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #STARSTORM_OMEGA_DAMAGE
	JSR a:.LOWORD(PSI_STARSTORM_COMMON)
	RTL

LIFEUP_COMMON: ;$C29AB8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	TAX
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	RTS

BTLACT_LIFEUP_A: ;$C29AC6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #LIFEUP_ALPHA_HEALING
	JSR a:.LOWORD(LIFEUP_COMMON)
	RTL

BTLACT_LIFEUP_B: ;$C29ACF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #LIFEUP_BETA_HEALING
	JSR a:.LOWORD(LIFEUP_COMMON)
	RTL

BTLACT_LIFEUP_G: ;$C29AD8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #LIFEUP_GAMMA_HEALING
	JSR a:.LOWORD(LIFEUP_COMMON)
	RTL

BTLACT_LIFEUP_O: ;$C29AE1
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #LIFEUP_OMEGA_HEALING
	JSR a:.LOWORD(LIFEUP_COMMON)
	RTL

BTLACT_HEALING_A: ;$C29AEA
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$001D
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	CMP #$0007
	BEQ BTLACT_HEALING_A_UNKNOWN0
	CMP #$0006
	BEQ BTLACT_HEALING_A_UNKNOWN1
	BRA BTLACT_HEALING_A_UNKNOWN2
BTLACT_HEALING_A_UNKNOWN0:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6EBC
	BRA BTLACT_HEALING_A_UNKNOWN4
BTLACT_HEALING_A_UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6F38
	BRA BTLACT_HEALING_A_UNKNOWN4
BTLACT_HEALING_A_UNKNOWN2:
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$001F
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	CMP #$0001
	BNE BTLACT_HEALING_A_UNKNOWN3
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6F54
	BRA BTLACT_HEALING_A_UNKNOWN4
BTLACT_HEALING_A_UNKNOWN3:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7696
BTLACT_HEALING_A_UNKNOWN4:
	PLD
	RTL

BTLACT_HEALING_B: ;$C29B7A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$001D
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	CMP #$0005
	BEQ BTLACT_HEALING_B_UNKNOWN0
	CMP #$0004
	BEQ BTLACT_HEALING_B_UNKNOWN1
	BRA BTLACT_HEALING_B_UNKNOWN2
BTLACT_HEALING_B_UNKNOWN0:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6E97
	BRA BTLACT_HEALING_B_UNKNOWN5
BTLACT_HEALING_B_UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6E81
	BRA BTLACT_HEALING_B_UNKNOWN5
BTLACT_HEALING_B_UNKNOWN2:
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$001F
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	CMP #$0002
	BNE BTLACT_HEALING_B_UNKNOWN3
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6ED1
	BRA BTLACT_HEALING_B_UNKNOWN5
BTLACT_HEALING_B_UNKNOWN3:
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0020
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	CMP #$0001
	BNE BTLACT_HEALING_B_UNKNOWN4
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6F1E
	BRA BTLACT_HEALING_B_UNKNOWN5
BTLACT_HEALING_B_UNKNOWN4:
	JSL BTLACT_HEALING_A
BTLACT_HEALING_B_UNKNOWN5:
	PLD
	RTL

BTLACT_HEALING_G: ;$C29C2C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$001D
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	CMP #$0003
	BEQ @UNKNOWN0
	CMP #$0002
	BEQ @UNKNOWN1
	CMP #$0001
	BEQ @UNKNOWN2
	BRA @UNKNOWN4
@UNKNOWN0:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6E67
	BRA @UNKNOWN5
@UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6E4A
	BRA @UNKNOWN5
@UNKNOWN2:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00C0
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BEQ @UNKNOWN3
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+21,X
	LSR
	LSR
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(REVIVE_TARGET)
	BRA @UNKNOWN5
@UNKNOWN3:
	.A16
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6F8E
	BRA @UNKNOWN5
@UNKNOWN4:
	JSL BTLACT_HEALING_B
@UNKNOWN5:
	PLD
	RTL

BTLACT_HEALING_O: ;$C29CB8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+29,X
	AND #$00FF
	CMP #$0001
	BNE @UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+21,X
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(REVIVE_TARGET)
	BRA @UNKNOWN1
@UNKNOWN0:
	JSL BTLACT_HEALING_G
@UNKNOWN1:
	RTL

SHIELDS_COMMON: ;$C29CDC
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TXY
	STA $0E
	CLC
	ADC #$0023
	TAX
	STY $02
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	CMP $02
	BNE @UNKNOWN3
	LDA $0E
	CLC
	ADC #$0025
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	INC
	INC
	INC
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CLC
	SBC #$0008
	BVC @UNKNOWN0
	BPL @UNKNOWN2
	BRA @UNKNOWN1
@UNKNOWN0:
	BMI @UNKNOWN2
@UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0008
	STA a:.LOWORD(RAM),X
@UNKNOWN2:
	REP #PROC_FLAGS::ACCUM8
	LDA #$0001
	BRA @UNKNOWN4
@UNKNOWN3:
	TYA
	SEP #PROC_FLAGS::ACCUM8
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0003
	STA a:.LOWORD(RAND_A)+1,X
	REP #PROC_FLAGS::ACCUM8
	LDA #$0000
@UNKNOWN4:
	PLD
	RTS

BTLACT_SHIELD_A: ;$C29D44
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX #$0004
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(SHIELDS_COMMON)
	CMP #$0000
	BEQ @UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6FBD
	BRA @UNKNOWN1
@UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6F9A
@UNKNOWN1:
	PLD
	RTL

REDIRECT_BTLACT_SHIELD_A: ;$C29D7A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_SHIELD_A
	RTL

BTLACT_SHIELD_B: ;$C29D81
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX #$0003
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(SHIELDS_COMMON)
	CMP #$0000
	BEQ @UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6FF4
	BRA @UNKNOWN1
@UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6FD3
@UNKNOWN1:
	PLD
	RTL

REDIRECT_BTLACT_SHIELD_B: ;$C29DB7
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_SHIELD_B
	RTL

BTLACT_PSI_SHIELD_A: ;$C29DBE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX #$0002
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(SHIELDS_COMMON)
	CMP #$0000
	BEQ @UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7032
	BRA @UNKNOWN1
@UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF700C
@UNKNOWN1:
	PLD
	RTL

REDIRECT_BTLACT_PSI_SHIELD_A: ;$C29DF4
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_PSI_SHIELD_A
	RTL

BTLACT_PSI_SHIELD_B: ;$C29DFB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX #$0001
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(SHIELDS_COMMON)
	CMP #$0000
	BEQ @UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF707A
	BRA @UNKNOWN1
@UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7050
@UNKNOWN1:
	PLD
	RTL

REDIRECT_BTLACT_PSI_SHIELD_B: ;$C29E31
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_PSI_SHIELD_B
	RTL

BTLACT_OFFENSE_UP_A: ;$C29E38
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_OFFENSE_UP_A_UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	LDY a:.LOWORD(RAM)+38,X
	STY $16
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INCREASE_OFFENSE_16TH)
	LOADPTR TEXT_BLOCK_C8F77D, $0E
	LDY $16
	STY $02
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+38,X
	SEC
	SBC $02
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
BTLACT_OFFENSE_UP_A_UNKNOWN0:
	PLD
	RTL

REDIRECT_BTLACT_OFFENSE_UP_A: ;$C29E7F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_OFFENSE_UP_A
	RTL

BTLACT_DEFENSE_DOWN_A: ;$C29E86
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE @UNKNOWN5
	JSR a:.LOWORD(SUCCESS_LUCK80)
	CMP #$0000
	BEQ @UNKNOWN4
	LDX .LOWORD(CURRENT_TARGET)
	LDY a:.LOWORD(RAM)+40,X
	STY $16
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(HEXADECIMATE_DEFENSE)
	LDX .LOWORD(CURRENT_TARGET)
	LDY $16
	TYA
	SEC
	SBC a:.LOWORD(RAM)+40,X
	STA $16
	STA $02
	LDA #$0000
	CLC
	SBC $02
	BVC @UNKNOWN0
	BPL @UNKNOWN2
	BRA @UNKNOWN1
@UNKNOWN0:
	BMI @UNKNOWN2
@UNKNOWN1:
	LDA #$0000
	STA $16
@UNKNOWN2:
	LOADPTR TEXT_BLOCK_C8F8A2, $0E
	LDA $16
	STA $06
	STZ $08
	BPL @UNKNOWN3
	DEC $08
@UNKNOWN3:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	BRA @UNKNOWN5
@UNKNOWN4:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
@UNKNOWN5:
	PLD
	RTL

REDIRECT_BTLACT_DEFENSE_DOWN_A: ;$C29EFF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_DEFENSE_DOWN_A
	RTL

BTLACT_HYPNOSIS_A: ;$C29F06
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE @UNKNOWN1
	LDX .LOWORD(CURRENT_TARGET)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+60,X
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BEQ @UNKNOWN0
	LDY #$0001
	LDX #$0002
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	.A16
	CMP #$0000
	BEQ @UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6C55
	BRA @UNKNOWN1
@UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
@UNKNOWN1:
	PLD
	RTL

REDIRECT_BTLACT_HYPNOSIS_A_COPY: ;$C29F57
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_HYPNOSIS_A
	RTL

BTLACT_MAGNET_A: ;$C29F5E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+25,X
	BNE @UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C8FB05
	BRA @UNKNOWN3
@UNKNOWN0:
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	TAX
	STX $16
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	STA $02
	LDX $16
	TXA
	CLC
	ADC $02
	STA $02
	INC $02
	INC $02
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+25,X
	CMP $02
	BCS @UNKNOWN1
	STA $02
@UNKNOWN1:
	LOADPTR TEXT_BLOCK_EF773F, $0E
	LDA $02
	STA $06
	STZ $08
	BPL @UNKNOWN2
	DEC $08
@UNKNOWN2:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	LDX $02
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(REDUCE_PP)
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA $02
	CLC
	ADC a:.LOWORD(RAM)+25,X
	TAX
	LDA .LOWORD(CURRENT_ATTACKER)
	JSR a:.LOWORD(SET_PP)
@UNKNOWN3:
	PLD
	RTL

BTLACT_MAGNET_O: ;$C29FE1
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BNE @UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM),X
	CMP #$0003
	BEQ @UNKNOWN1
@UNKNOWN0:
	JSL BTLACT_MAGNET_A
@UNKNOWN1:
	RTL

BTLACT_PARALYSIS_A: ;$C29FFE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE @UNKNOWN1
	LDX .LOWORD(CURRENT_TARGET)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+55,X
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BEQ @UNKNOWN0
	LDY #$0003
	LDX #$0000
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	.A16
	CMP #$0000
	BEQ @UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6AE0
	BRA @UNKNOWN1
@UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
@UNKNOWN1:
	PLD
	RTL

REDIRECT_BTLACT_PARALYSIS_A: ;$C2A04F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_PARALYSIS_A
	RTL

BTLACT_BRAINSHOCK_A: ;$C2A056
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE @UNKNOWN1
	LDX .LOWORD(CURRENT_TARGET)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+59,X
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BEQ @UNKNOWN0
	LDY #$0001
	LDX #$0003
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	.A16
	CMP #$0000
	BEQ @UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6C3A
	BRA @UNKNOWN1
@UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
@UNKNOWN1:
	PLD
	RTL

REDIRECT_BTLACT_BRAINSHOCK_A_COPY: ;$C2A0A7
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_BRAINSHOCK_A
	RTL

BTLACT_HP_RECOVERY_1D4: ;$C2A0AE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	TAX
	INX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	RTL

BTLACT_HP_RECOVERY_50: ;$C2A0BF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0032
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	RTL

BTLACT_HP_RECOVERY_200: ;$C2A0CF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$00C8
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	RTL

BTLACT_PP_RECOVERY_20: ;$C2A0DF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0014
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_PP)
	RTL

BTLACT_PP_RECOVERY_80: ;$C2A0EF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0050
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_PP)
	RTL

BTLACT_IQ_UP_1D4: ;$C2A0FF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	INC
	STA $16
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0031
	TAX
	LDA $16
	SEP #PROC_FLAGS::ACCUM8
	STA $00
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $00
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	LOADPTR TEXT_BLOCK_C8F7B8, $0E
	LDA $16
	STA $06
	STZ $08
	BPL BTLACT_IQ_UP_1D4_UNKNOWN0
	DEC $08
BTLACT_IQ_UP_1D4_UNKNOWN0:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	PLD
	RTL

BTLACT_GUTS_UP_1D4: ;$C2A14B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	INC
	STA $16
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$002C
	TAX
	LDA $16
	STA $02
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $02
	STA a:.LOWORD(RAM),X
	LOADPTR TEXT_BLOCK_C8F7D2, $0E
	LDA $16
	STA $06
	STZ $08
	BPL BTLACT_GUTS_UP_1D4_UNKNOWN0
	DEC $08
BTLACT_GUTS_UP_1D4_UNKNOWN0:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	PLD
	RTL

BTLACT_SPEED_UP_1D4: ;$C2A193
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	INC
	STA $16
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$002A
	TAX
	LDA $16
	STA $02
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $02
	STA a:.LOWORD(RAM),X
	LOADPTR TEXT_BLOCK_C8F82F, $0E
	LDA $16
	STA $06
	STZ $08
	BPL BTLACT_SPEED_UP_1D4_UNKNOWN0
	DEC $08
BTLACT_SPEED_UP_1D4_UNKNOWN0:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	PLD
	RTL

BTLACT_VITALITY_UP_1D4: ;$C2A1DB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	INC
	STA $16
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0030
	TAX
	LDA $16
	SEP #PROC_FLAGS::ACCUM8
	STA $00
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $00
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	LOADPTR TEXT_BLOCK_C8F84C, $0E
	LDA $16
	STA $06
	STZ $08
	BPL BTLACT_VITALITY_UP_1D4_UNKNOWN0
	DEC $08
BTLACT_VITALITY_UP_1D4_UNKNOWN0:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	PLD
	RTL

BTLACT_LUCK_UP_1D4: ;$C2A227
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	INC
	STA $16
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$002E
	TAX
	LDA $16
	STA $02
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $02
	STA a:.LOWORD(RAM),X
	LOADPTR TEXT_BLOCK_C8F86B, $0E
	LDA $16
	STA $06
	STZ $08
	BPL BTLACT_LUCK_UP_1D4_UNKNOWN0
	DEC $08
BTLACT_LUCK_UP_1D4_UNKNOWN0:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	PLD
	RTL

BTLACT_HP_RECOVERY_300: ;$C2A26F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$012C
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	RTL

BTLACT_RANDOM_STAT_UP_1D4: ;$C2A27F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA #$0007
	JSR a:.LOWORD(RAND_LIMIT)
	CMP #$0000
	BEQ BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN5
	CMP #$0001
	BEQ BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN7
	CMP #$0002
	BNE BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN0
	JMP a:.LOWORD(BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN9)
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN0:
	CMP #$0003
	BNE BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN1
	JMP a:.LOWORD(BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN10)
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN1:
	CMP #$0004
	BNE BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN2
	JMP a:.LOWORD(BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN11)
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN2:
	CMP #$0005
	BNE BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN3
	JMP a:.LOWORD(BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN12)
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN3:
	CMP #$0006
	BNE BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN4
	JMP a:.LOWORD(BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN13)
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN4:
	JMP a:.LOWORD(BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN14)
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN5:
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	INC
	STA $16
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0028
	TAX
	LDA $16
	STA $02
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $02
	STA a:.LOWORD(RAM),X
	LOADPTR TEXT_BLOCK_C8F79A, $0E
	LDA $16
	STA $06
	STZ $08
	BPL BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN6
	DEC $08
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN6:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	BRA BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN14
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN7:
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	INC
	STA $16
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0026
	TAX
	LDA $16
	STA $02
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $02
	STA a:.LOWORD(RAM),X
	LOADPTR TEXT_BLOCK_C8F77D, $0E
	LDA $16
	STA $06
	STZ $08
	BPL BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN8
	DEC $08
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN8:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	BRA BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN14
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN9:
	JSL BTLACT_SPEED_UP_1D4
	BRA BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN14
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN10:
	JSL BTLACT_GUTS_UP_1D4
	BRA BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN14
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN11:
	JSL BTLACT_VITALITY_UP_1D4
	BRA BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN14
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN12:
	JSL BTLACT_IQ_UP_1D4
	BRA BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN14
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN13:
	JSL BTLACT_LUCK_UP_1D4
BTLACT_RANDOM_STAT_UP_1D4_UNKNOWN14:
	PLD
	RTL

BTLACT_HP_RECOVERY_10: ;$C2A360
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$000A
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	RTL

BTLACT_HP_RECOVERY_100: ;$C2A370
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0064
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	RTL

BTLACT_HP_RECOVERY_10000: ;$C2A380
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM),X
	CMP #$0004
	BNE BTLACT_HP_RECOVERY_10000_UNKNOWN0
	LDX #$2710
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	BRA BTLACT_HP_RECOVERY_10000_UNKNOWN1
BTLACT_HP_RECOVERY_10000_UNKNOWN0:
	JSL BTLACT_HP_RECOVERY_1D4
BTLACT_HP_RECOVERY_10000_UNKNOWN1:
	RTL

HEAL_POISON: ;$C2A39D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$001D
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	CMP #$0005
	BNE HEAL_POISON_UNKNOWN0
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6E97
HEAL_POISON_UNKNOWN0:
	PLD
	RTL

BTLACT_COUNTER_PSI: ;$C2A3D1
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_COUNTER_PSI_UNKNOWN1
	JSR a:.LOWORD(SUCCESS_LUCK40)
	CMP #$0000
	BEQ BTLACT_COUNTER_PSI_UNKNOWN0
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0021
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BNE BTLACT_COUNTER_PSI_UNKNOWN0
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0004
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6C0B
	BRA BTLACT_COUNTER_PSI_UNKNOWN1
BTLACT_COUNTER_PSI_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_COUNTER_PSI_UNKNOWN1:
	PLD
	RTL

BTLACT_SHIELD_KILLER: ;$C2A422
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(SUCCESS_LUCK80)
	CMP #$0000
	BEQ BTLACT_SHIELD_KILLER_UNKNOWN0
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0023
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BEQ BTLACT_SHIELD_KILLER_UNKNOWN0
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7099
	BRA BTLACT_SHIELD_KILLER_UNKNOWN1
BTLACT_SHIELD_KILLER_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_SHIELD_KILLER_UNKNOWN1:
	PLD
	RTL

BTLACT_HP_SUCKER: ;$C2A46B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	JSR a:.LOWORD(SUCCESS_LUCK80)
	CMP #$0000
	BNE BTLACT_HP_SUCKER_UNKNOWN0
	JMP a:.LOWORD(BTLACT_HP_SUCKER_UNKNOWN3)
BTLACT_HP_SUCKER_UNKNOWN0:
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+19,X
	BEQ BTLACT_HP_SUCKER_UNKNOWN3
	LDA .LOWORD(CURRENT_TARGET)
	CMP .LOWORD(CURRENT_ATTACKER)
	BNE BTLACT_HP_SUCKER_UNKNOWN1
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7710
	BRA BTLACT_HP_SUCKER_UNKNOWN4
BTLACT_HP_SUCKER_UNKNOWN1:
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+21,X
	JSR a:.LOWORD(FIFTY_PERCENT_VARIANCE)
	LSR
	LSR
	LSR
	TAY
	STY $16
	TYX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(REDUCE_HP)
	LOADPTR TEXT_BLOCK_EF7729, $0E
	LDY $16
	TYA
	STA $06
	STZ $08
	BPL BTLACT_HP_SUCKER_UNKNOWN2
	DEC $08
BTLACT_HP_SUCKER_UNKNOWN2:
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	LDX .LOWORD(CURRENT_ATTACKER)
	LDY $16
	TYA
	CLC
	ADC a:.LOWORD(RAM)+17,X
	TAX
	LDA .LOWORD(CURRENT_ATTACKER)
	JSR a:.LOWORD(SET_HP)
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+17,X
	BNE BTLACT_HP_SUCKER_UNKNOWN4
	LDA .LOWORD(CURRENT_TARGET)
	JSL KO_TARGET
	BRA BTLACT_HP_SUCKER_UNKNOWN4
BTLACT_HP_SUCKER_UNKNOWN3:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_HP_SUCKER_UNKNOWN4:
	PLD
	RTL

BTLACT_HUNGRY_HP_SUCKER: ;$C2A507
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_HP_SUCKER
	RTL

BTLACT_MUMMY_WRAP: ;$C2A50E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEC
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_MUMMY_WRAP_UNKNOWN3
	LDA #$00FA
	JSR a:.LOWORD(SUCCESS_SPEED)
	CMP #$0000
	BEQ BTLACT_MUMMY_WRAP_UNKNOWN2
	LDX .LOWORD(CURRENT_TARGET)
	LDA #$0190
	SEC
	SBC a:.LOWORD(RAM)+40,X
	STA $12
	CLC
	SBC #$0000
	BVC BTLACT_MUMMY_WRAP_UNKNOWN0
	BPL BTLACT_MUMMY_WRAP_UNKNOWN2
	BRA BTLACT_MUMMY_WRAP_UNKNOWN1
BTLACT_MUMMY_WRAP_UNKNOWN0:
	BMI BTLACT_MUMMY_WRAP_UNKNOWN2
BTLACT_MUMMY_WRAP_UNKNOWN1:
	LDX #$00FF
	LDA $12
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	LDY #$0004
	LDX #$0002
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ BTLACT_MUMMY_WRAP_UNKNOWN3
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6BEF
	BRA BTLACT_MUMMY_WRAP_UNKNOWN3
BTLACT_MUMMY_WRAP_UNKNOWN2:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_MUMMY_WRAP_UNKNOWN3:
	PLD
	RTL

BOTTLE_ROCKET_COMMON: ;$C2A57A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEA
	TCD
	PLA
	STA $02
	LDY #$0000
	STY $14
	TYX
	STX $12
	BRA BOTTLE_ROCKET_COMMON_UNKNOWN2
BOTTLE_ROCKET_COMMON_UNKNOWN0:
	LDA #$0064
	JSR a:.LOWORD(SUCCESS_SPEED)
	CMP #$0000
	BEQ BOTTLE_ROCKET_COMMON_UNKNOWN1
	LDY $14
	INY
	STY $14
BOTTLE_ROCKET_COMMON_UNKNOWN1:
	LDX $12
	INX
	STX $12
BOTTLE_ROCKET_COMMON_UNKNOWN2:
	TXA
	CMP $02
	BCC BOTTLE_ROCKET_COMMON_UNKNOWN0
	LDY $14
	BEQ BOTTLE_ROCKET_COMMON_UNKNOWN3
	TYA
	LDY #$0078
	JSL MULT168
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	LDX #$00FF
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	BRA BOTTLE_ROCKET_COMMON_UNKNOWN4
BOTTLE_ROCKET_COMMON_UNKNOWN3:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BOTTLE_ROCKET_COMMON_UNKNOWN4:
	PLD
	RTS

BTLACT_BOTTLE_ROCKET: ;$C2A5D1
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0001
	JSR a:.LOWORD(BOTTLE_ROCKET_COMMON)
	RTL

BTLACT_BIG_BOTTLE_ROCKET: ;$C2A5DA
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0005
	JSR a:.LOWORD(BOTTLE_ROCKET_COMMON)
	RTL

BTLACT_MULTI_BOTTLE_ROCKET: ;$C2A5E3
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0014
	JSR a:.LOWORD(BOTTLE_ROCKET_COMMON)
	RTL

BTLACT_HANDBAG_STRAP: ;$C2A5EC
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEC
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_HANDBAG_STRAP_UNKNOWN3
	LDA #$00FA
	JSR a:.LOWORD(SUCCESS_SPEED)
	CMP #$0000
	BEQ BTLACT_HANDBAG_STRAP_UNKNOWN2
	LDX .LOWORD(CURRENT_TARGET)
	LDA #$0064
	SEC
	SBC a:.LOWORD(RAM)+40,X
	STA $12
	CLC
	SBC #$0000
	BVC BTLACT_HANDBAG_STRAP_UNKNOWN0
	BPL BTLACT_HANDBAG_STRAP_UNKNOWN2
	BRA BTLACT_HANDBAG_STRAP_UNKNOWN1
BTLACT_HANDBAG_STRAP_UNKNOWN0:
	BMI BTLACT_HANDBAG_STRAP_UNKNOWN2
BTLACT_HANDBAG_STRAP_UNKNOWN1:
	LDX #$00FF
	LDA $12
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	LDY #$0004
	LDX #$0002
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ BTLACT_HANDBAG_STRAP_UNKNOWN3
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6BEF
	BRA BTLACT_HANDBAG_STRAP_UNKNOWN3
BTLACT_HANDBAG_STRAP_UNKNOWN2:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_HANDBAG_STRAP_UNKNOWN3:
	PLD
	RTL

BOMB_COMMON: ;$C2A658
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE4
	TCD
	PLA
	STA $1A
	STZ $18
	LDA #$0000
	STA $04
	LDA $1A
	JSR a:.LOWORD(FIFTY_PERCENT_VARIANCE)
	LDX #$00FF
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BNE BOMB_COMMON_UNKNOWN8
	LDX #$0000
	STX $16
	BRA BOMB_COMMON_UNKNOWN1
BOMB_COMMON_UNKNOWN0:
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM),X
	STA $02
	LDX $16
	LDA .LOWORD(GAME_STATE)+122,X
	AND #$00FF
	CMP $02
	BEQ BOMB_COMMON_UNKNOWN2
	INX
	STX $16
BOMB_COMMON_UNKNOWN1:
	CPX #$0006
	BCC BOMB_COMMON_UNKNOWN0
BOMB_COMMON_UNKNOWN2:
	CPX #$0000
	BEQ BOMB_COMMON_UNKNOWN3
	TXA
	DEC
	LDY #$004E
	JSL MULT168
	CLC
	ADC #$9FAC
	STA $04
BOMB_COMMON_UNKNOWN3:
	LDA .LOWORD(GAME_STATE)+123,X
	AND #$00FF
	STA $14
	STA $02
	LDA #$0001
	CLC
	SBC $02
	BVS BOMB_COMMON_UNKNOWN4
	BMI BOMB_COMMON_UNKNOWN5
	JMP a:.LOWORD(BOMB_COMMON_UNKNOWN18)
BOMB_COMMON_UNKNOWN4:
	BPL BOMB_COMMON_UNKNOWN5
	JMP a:.LOWORD(BOMB_COMMON_UNKNOWN18)
BOMB_COMMON_UNKNOWN5:
	LDA $14
	CLC
	SBC #$0004
	BVS BOMB_COMMON_UNKNOWN6
	BMI BOMB_COMMON_UNKNOWN7
	JMP a:.LOWORD(BOMB_COMMON_UNKNOWN18)
BOMB_COMMON_UNKNOWN6:
	BPL BOMB_COMMON_UNKNOWN7
	JMP a:.LOWORD(BOMB_COMMON_UNKNOWN18)
BOMB_COMMON_UNKNOWN7:
	TXA
	LDY #$004E
	JSL MULT168
	CLC
	ADC #$9FFA
	STA $18
	JMP a:.LOWORD(BOMB_COMMON_UNKNOWN18)
BOMB_COMMON_UNKNOWN8:
	LDA #$0008
	STA $02
	STA $14
	JMP a:.LOWORD(BOMB_COMMON_UNKNOWN17)
BOMB_COMMON_UNKNOWN9:
	LDA $02
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	STX $12
	TXA
	CLC
	ADC #$9FAC
	TAY
	STY $10
	CPY .LOWORD(CURRENT_TARGET)
	BNE BOMB_COMMON_UNKNOWN10
	JMP a:.LOWORD(BOMB_COMMON_UNKNOWN16)
BOMB_COMMON_UNKNOWN10:
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BEQ BOMB_COMMON_UNKNOWN11
	JMP a:.LOWORD(BOMB_COMMON_UNKNOWN16)
BOMB_COMMON_UNKNOWN11:
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(BATTLERS_TABLE)+16,X
	LDX .LOWORD(CURRENT_TARGET)
	CMP a:.LOWORD(RAM)+16,X
	BEQ BOMB_COMMON_UNKNOWN12
	JMP a:.LOWORD(BOMB_COMMON_UNKNOWN16)
BOMB_COMMON_UNKNOWN12:
	LDX $12
	LDA .LOWORD(BATTLERS_TABLE)+battler::initiative,X
	STA $01
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+68,X
	STA $00
	LDA $01
	CMP $00
	BCS BOMB_COMMON_UNKNOWN14
	LDX .LOWORD(CURRENT_TARGET)
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+2,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	STA $0E
	LDX $12
	LDA .LOWORD(BATTLERS_TABLE)+battler::sprite,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	CLC
	ADC $0E
	ASL
	ASL
	CLC
	ADC #$0008
	STA $02
	SEP #PROC_FLAGS::ACCUM8
	LDA $00
	SEC
	SBC $01
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP $02
	BEQ BOMB_COMMON_UNKNOWN13
	BCS BOMB_COMMON_UNKNOWN16
BOMB_COMMON_UNKNOWN13:
	LDY $10
	STY $04
	BRA BOMB_COMMON_UNKNOWN16
BOMB_COMMON_UNKNOWN14:
	LDX .LOWORD(CURRENT_TARGET)
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+2,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	STA $0E
	LDX $12
	LDA .LOWORD(BATTLERS_TABLE)+battler::sprite,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	CLC
	ADC $0E
	ASL
	ASL
	CLC
	ADC #$0008
	STA $02
	SEP #PROC_FLAGS::ACCUM8
	LDA $01
	SEC
	SBC $00
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP $02
	BEQ BOMB_COMMON_UNKNOWN15
	BCS BOMB_COMMON_UNKNOWN16
BOMB_COMMON_UNKNOWN15:
	LDY $10
	STY $18
BOMB_COMMON_UNKNOWN16:
	REP #PROC_FLAGS::ACCUM8
	LDA $14
	STA $02
	INC $02
	LDA $02
	STA $14
BOMB_COMMON_UNKNOWN17:
	LDA $02
	CMP #$0020
	BCS BOMB_COMMON_UNKNOWN18
	BEQ BOMB_COMMON_UNKNOWN18
	JMP a:.LOWORD(BOMB_COMMON_UNKNOWN9)
BOMB_COMMON_UNKNOWN18:
	LDY .LOWORD(CURRENT_TARGET)
	STY $14
	LDA $04
	BEQ BOMB_COMMON_UNKNOWN19
	LDA $04
	STA .LOWORD(CURRENT_TARGET)
	JSL FIX_TARGET_NAME
	LDA $1A
	LSR
	JSR a:.LOWORD(FIFTY_PERCENT_VARIANCE)
	LDX #$00FF
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
BOMB_COMMON_UNKNOWN19:
	LDA $18
	BEQ BOMB_COMMON_UNKNOWN20
	LDA $18
	STA .LOWORD(CURRENT_TARGET)
	JSL FIX_TARGET_NAME
	LDA $1A
	LSR
	JSR a:.LOWORD(FIFTY_PERCENT_VARIANCE)
	LDX #$00FF
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
BOMB_COMMON_UNKNOWN20:
	LDY $14
	STY .LOWORD(CURRENT_TARGET)
	JSL FIX_TARGET_NAME
	PLD
	RTS

BTLACT_BOMB: ;$C2A818
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$005A
	JSR a:.LOWORD(BOMB_COMMON)
	RTL

BTLACT_SUPER_BOMB: ;$C2A821
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$010E
	JSR a:.LOWORD(BOMB_COMMON)
	RTL

BTLACT_SOLIDIFY_2: ;$C2A82A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(SUCCESS_LUCK80)
	CMP #$0000
	BEQ BTLACT_SOLIDIFY_2_UNKNOWN0
	LDY #$0004
	LDX #$0002
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ BTLACT_SOLIDIFY_2_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6BEF
	BRA BTLACT_SOLIDIFY_2_UNKNOWN1
BTLACT_SOLIDIFY_2_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_SOLIDIFY_2_UNKNOWN1:
	PLD
	RTL

BTLACT_YOGURT_DISPENSER: ;$C2A86B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA #$00FA
	JSR a:.LOWORD(SUCCESS_SPEED)
	CMP #$0000
	BEQ BTLACT_YOGURT_DISPENSER_UNKNOWN0
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	LDX #$00FF
	INC
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	BRA BTLACT_YOGURT_DISPENSER_UNKNOWN1
BTLACT_YOGURT_DISPENSER_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_YOGURT_DISPENSER_UNKNOWN1:
	PLD
	RTL

BTLACT_SNAKE: ;$C2A89D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_SNAKE_UNKNOWN1
	LDA #$00FA
	JSR a:.LOWORD(SUCCESS_SPEED)
	CMP #$0000
	BEQ BTLACT_SNAKE_UNKNOWN0
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	LDX #$00FF
	INC
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0080
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BEQ BTLACT_SNAKE_UNKNOWN1
	LDY #$0005
	LDX #$0000
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	.A16
	CMP #$0000
	BEQ BTLACT_SNAKE_UNKNOWN1
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6B18
	BRA BTLACT_SNAKE_UNKNOWN1
BTLACT_SNAKE_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_SNAKE_UNKNOWN1:
	PLD
	RTL

BTLACT_INFLICT_SOLIDIFICATION: ;$C2A902
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(SUCCESS_LUCK80)
	CMP #$0000
	BEQ BTLACT_INFLICT_SOLIDIFICATION_UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+55,X
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BEQ BTLACT_INFLICT_SOLIDIFICATION_UNKNOWN0
	LDY #$0004
	LDX #$0002
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	.A16
	CMP #$0000
	BEQ BTLACT_INFLICT_SOLIDIFICATION_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6BEF
	BRA BTLACT_INFLICT_SOLIDIFICATION_UNKNOWN1
BTLACT_INFLICT_SOLIDIFICATION_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_INFLICT_SOLIDIFICATION_UNKNOWN1:
	PLD
	RTL

BTLACT_INFLICT_POISON: ;$C2A953
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX .LOWORD(CURRENT_TARGET)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+55,X
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BEQ BTLACT_INFLICT_POISON_UNKNOWN0
	LDY #$0005
	LDX #$0000
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	.A16
	CMP #$0000
	BEQ BTLACT_INFLICT_POISON_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6B18
	BRA BTLACT_INFLICT_POISON_UNKNOWN1
BTLACT_INFLICT_POISON_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_INFLICT_POISON_UNKNOWN1:
	PLD
	RTL

BTLACT_BAG_OF_DRAGONITE: ;$C2A99C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA #$0320
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	STA $0E
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+58,X
	AND #$00FF
	TAX
	LDA $0E
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	PLD
	RTL

INSECT_SPRAY_COMMON: ;$C2A9BD
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEC
	TCD
	PLA
	TAX
	STX $12
	JSR a:.LOWORD(SUCCESS_LUCK80)
	CMP #$0000
	BEQ INSECT_SPRAY_COMMON_FAILURE
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE INSECT_SPRAY_COMMON_FAILURE
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM),X
	JSR a:.LOWORD(GET_ENEMY_TYPE)
	CMP #$0001
	BNE INSECT_SPRAY_COMMON_FAILURE
	LDX $12
	TXA
	JSR a:.LOWORD(FIFTY_PERCENT_VARIANCE)
	LDX #$00FF
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	BRA INSECT_SPRAY_COMMON_RETURN
INSECT_SPRAY_COMMON_FAILURE:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
INSECT_SPRAY_COMMON_RETURN:
	PLD
	RTS

BTLACT_INSECTICIDE_SPRAY: ;$C2AA0C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0064
	JSR a:.LOWORD(INSECT_SPRAY_COMMON)
	RTL

BTLACT_XTERMINATOR_SPRAY: ;$C2AA15
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$00C8
	JSR a:.LOWORD(INSECT_SPRAY_COMMON)
	RTL

RUST_SPRAY_COMMON: ;$C2AA1E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEC
	TCD
	PLA
	TAX
	STX $12
	JSR a:.LOWORD(SUCCESS_LUCK80)
	CMP #$0000
	BEQ RUST_SPRAY_COMMON_FAILURE
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE RUST_SPRAY_COMMON_FAILURE
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM),X
	JSR a:.LOWORD(GET_ENEMY_TYPE)
	CMP #$0002
	BNE RUST_SPRAY_COMMON_FAILURE
	LDX $12
	TXA
	JSR a:.LOWORD(FIFTY_PERCENT_VARIANCE)
	LDX #$00FF
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	BRA RUST_SPRAY_COMMON_RETURN
RUST_SPRAY_COMMON_FAILURE:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
RUST_SPRAY_COMMON_RETURN:
	PLD
	RTS

BTLACT_RUST_PROMOTER: ;$C2AA6D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$00C8
	JSR a:.LOWORD(RUST_SPRAY_COMMON)
	RTL

BTLACT_RUST_PROMOTER_DX: ;$C2AA76
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0190
	JSR a:.LOWORD(RUST_SPRAY_COMMON)
	RTL

BTLACT_SUDDEN_GUTS_PILL: ;$C2AA7F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEA
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_SUDDEN_GUTS_PILL_UNKNOWN1
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+44,X
	ASL
	CMP #$00FF
	BCC BTLACT_SUDDEN_GUTS_PILL_UNKNOWN0
	LDA #$00FF
BTLACT_SUDDEN_GUTS_PILL_UNKNOWN0:
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+44,X
	LOADPTR TEXT_BLOCK_C8F80A, $0E
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+44,X
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
BTLACT_SUDDEN_GUTS_PILL_UNKNOWN1:
	PLD
	RTL

BTLACT_DEFENSE_SPRAY: ;$C2AAC6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_DEFENSE_SPRAY_UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	LDY a:.LOWORD(RAM)+40,X
	STY $16
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INCREASE_DEFENSE_16TH)
	LOADPTR TEXT_BLOCK_C8F79A, $0E
	LDY $16
	STY $02
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+40,X
	SEC
	SBC $02
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
BTLACT_DEFENSE_SPRAY_UNKNOWN0:
	PLD
	RTL

BTLACT_DEFENSE_SHOWER: ;$C2AB0D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	JSL BTLACT_DEFENSE_SPRAY
	RTL

BOSS_BATTLE_CHECK: ;$C2AB14
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX #$9FAC
	STX $10
	LDY #$0000
	STY $0E
	BRA BOSS_BATTLE_CHECK_BEGIN_LOOP
BOSS_BATTLE_CHECK_NEXT_ENEMY:
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BEQ BOSS_BATTLE_CHECK_NOT_BOSS
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE BOSS_BATTLE_CHECK_NOT_BOSS
	LDA a:.LOWORD(RAM),X
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	CLC
	ADC #enemy_data::boss
	TAX
	LDA f:ENEMY_CONFIGURATION_TABLE,X
	AND #$00FF
	BEQ BOSS_BATTLE_CHECK_NOT_BOSS
	LDA #$0000
	BRA BOSS_BATTLE_CHECK_RETURN
BOSS_BATTLE_CHECK_NOT_BOSS:
	LDY $0E
	INY
	STY $0E
	LDX $10
	TXA
	CLC
	ADC #$004E
	TAX
	STX $10
BOSS_BATTLE_CHECK_BEGIN_LOOP:
	CPY #$0020
	BCC BOSS_BATTLE_CHECK_NEXT_ENEMY
	LDA #$0001
BOSS_BATTLE_CHECK_RETURN:
	PLD
	RTS

BTLACT_TELEPORT_BOX: ;$C2AB71
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEA
	TCD
	LDX .LOWORD(GAME_STATE)+game_state::leader_y_coord
	LDA .LOWORD(GAME_STATE)+game_state::leader_x_coord
	JSL LOAD_SECTOR_ATTRS
	AND #$0080
	BEQ BTLACT_TELEPORT_BOX_UNKNOWN0
	JMP a:.LOWORD(BTLACT_TELEPORT_BOX_TELEPORT_BOX_UNUSABLE)
BTLACT_TELEPORT_BOX_UNKNOWN0:
	LDA .LOWORD(BATTLE_MODE_FLAG)
	BEQ BTLACT_TELEPORT_BOX_UNKNOWN1
	LDA #$0064
	JSR a:.LOWORD(RAND_LIMIT)
	STA $14
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+8,X
	AND #$00FF
	LDY #.SIZEOF(item)
	JSL MULT168
	CLC
	ADC #item::strength
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:ITEM_CONFIGURATION_TABLE,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	STA $02
	LDA $14
	CMP $02
	BCS BTLACT_TELEPORT_BOX_TELEPORT_BOX_FAILURE
	JSR a:.LOWORD(BOSS_BATTLE_CHECK)
	CMP #$0000
	BEQ BTLACT_TELEPORT_BOX_TELEPORT_BOX_FAILURE
BTLACT_TELEPORT_BOX_UNKNOWN1:
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+7,X
	AND #$00FF
	TAX
	STX $12
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM),X
	LDX $12
	JSL REDIRECT_REMOVE_ITEM_FROM_INVENTORY
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C9FE41
	SEP #PROC_FLAGS::ACCUM8
	LDA #TELEPORT_STYLE::INSTANT
	STA $0E
	LDA .LOWORD(GAME_STATE)+195
	JSL SET_TELEPORT_STATE
	.A16
	LDA #$0001
	STA .LOWORD(UNKNOWN_7EAA0E)
	BRA BTLACT_TELEPORT_BOX_RETURN
BTLACT_TELEPORT_BOX_TELEPORT_BOX_FAILURE:
	.A16
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C9FE9D
	BRA BTLACT_TELEPORT_BOX_RETURN
BTLACT_TELEPORT_BOX_TELEPORT_BOX_UNUSABLE:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C9FEE3
BTLACT_TELEPORT_BOX_RETURN:
	PLD
	RTL

BTLACT_PRAY_SUBTLE: ;$C2AC2A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+21,X
	LSR
	LSR
	LSR
	LSR
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	RTL

BTLACT_PRAY_WARM: ;$C2AC3E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+21,X
	LSR
	LSR
	LSR
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	RTL

BTLACT_PRAY_GOLDEN: ;$C2AC51
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+21,X
	LDX .LOWORD(CURRENT_ATTACKER)
	SEC
	SBC a:.LOWORD(RAM)+19,X
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	RTL

BTLACT_PRAY_MYSTERIOUS: ;$C2AC68
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0005
	JSR a:.LOWORD(FIFTY_PERCENT_VARIANCE)
	TAX
	BNE BTLACT_PRAY_MYSTERIOUS_UNKNOWN0
	INX
BTLACT_PRAY_MYSTERIOUS_UNKNOWN0:
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_PP)
	RTL

BTLACT_PRAY_RAINBOW: ;$C2AC7B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+29,X
	AND #$00FF
	CMP #$0001
	BNE BTLACT_PRAY_RAINBOW_UNKNOWN0
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+21,X
	TAX
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(REVIVE_TARGET)
BTLACT_PRAY_RAINBOW_UNKNOWN0:
	RTL

BTLACT_PRAY_AROMA: ;$C2AC99
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_PRAY_AROMA_UNKNOWN1
	LDY #$0001
	LDX #$0002
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ BTLACT_PRAY_AROMA_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6C55
	BRA BTLACT_PRAY_AROMA_UNKNOWN1
BTLACT_PRAY_AROMA_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_PRAY_AROMA_UNKNOWN1:
	PLD
	RTL

BTLACT_PRAY_RENDING_SOUND: ;$C2ACDA
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	JSR a:.LOWORD(ATK_FAIL_CHK)
	CMP #$0000
	BNE BTLACT_PRAY_RENDING_SOUND_UNKNOWN1
	LDY #$0001
	LDX #$0003
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(INFLICT_STATUS_BATTLE)
	CMP #$0000
	BEQ BTLACT_PRAY_RENDING_SOUND_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6C3A
	BRA BTLACT_PRAY_RENDING_SOUND_UNKNOWN1
BTLACT_PRAY_RENDING_SOUND_UNKNOWN0:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
BTLACT_PRAY_RENDING_SOUND_UNKNOWN1:
	PLD
	RTL

BTLACT_PRAY: ;$C2AD1B
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA #$0010
	JSR a:.LOWORD(RAND_LIMIT)
	TAX
	LDA f:PRAYER_LIST,X
	AND #$00FF
	STA $16
	LOADPTR PRAYER_TEXT_PTRS, $0A
	LDA $16
	ASL
	ASL
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	JSL DISPLAY_IN_BATTLE_TEXT
	LDA $16
	BEQ BTLACT_PRAY_UNKNOWN7
	CMP #$0001
	BEQ BTLACT_PRAY_UNKNOWN8
	CMP #$0002
	BEQ BTLACT_PRAY_UNKNOWN9
	CMP #$0003
	BNE BTLACT_PRAY_UNKNOWN0
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN10)
BTLACT_PRAY_UNKNOWN0:
	CMP #$0004
	BNE BTLACT_PRAY_UNKNOWN1
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN11)
BTLACT_PRAY_UNKNOWN1:
	CMP #$0005
	BNE BTLACT_PRAY_UNKNOWN2
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN12)
BTLACT_PRAY_UNKNOWN2:
	CMP #$0006
	BNE BTLACT_PRAY_UNKNOWN3
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN13)
BTLACT_PRAY_UNKNOWN3:
	CMP #$0007
	BNE BTLACT_PRAY_UNKNOWN4
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN14)
BTLACT_PRAY_UNKNOWN4:
	CMP #$0008
	BNE BTLACT_PRAY_UNKNOWN5
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN15)
BTLACT_PRAY_UNKNOWN5:
	CMP #$0009
	BNE BTLACT_PRAY_UNKNOWN6
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN16)
BTLACT_PRAY_UNKNOWN6:
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN17)
BTLACT_PRAY_UNKNOWN7:
	JSL TARGET_ALLIES
	JSL REMOVE_NPC_TARGETTING
	LOADPTR BTLACT_PRAY_SUBTLE, $06
	LDA $06
	STA $12
	LDA $08
	STA $14
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN17)
BTLACT_PRAY_UNKNOWN8:
	JSL TARGET_ALLIES
	JSL REMOVE_NPC_TARGETTING
	LOADPTR BTLACT_PRAY_WARM, $06
	LDA $06
	STA $12
	LDA $08
	STA $14
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN17)
BTLACT_PRAY_UNKNOWN9:
	JSL TARGET_ALLIES
	JSL REMOVE_NPC_TARGETTING
	LOADPTR BTLACT_PRAY_MYSTERIOUS, $06
	LDA $06
	STA $12
	LDA $08
	STA $14
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN17)
BTLACT_PRAY_UNKNOWN10:
	JSL TARGET_ALLIES
	JSL REMOVE_NPC_TARGETTING
	JSR a:.LOWORD(REMOVE_DEAD_TARGETTING)
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	JSL RANDOM_TARGETTING
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	LOADPTR BTLACT_PRAY_GOLDEN, $06
	LDA $06
	STA $12
	LDA $08
	STA $14
	JMP a:.LOWORD(BTLACT_PRAY_UNKNOWN17)
BTLACT_PRAY_UNKNOWN11:
	JSL TARGET_ALL_ENEMIES
	JSL REMOVE_NPC_TARGETTING
	JSR a:.LOWORD(REMOVE_DEAD_TARGETTING)
	LDA .LOWORD(BATTLER_TARGET_FLAGS)
	STA $06
	LDA .LOWORD(BATTLER_TARGET_FLAGS)+2
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	JSL RANDOM_TARGETTING
	LDA $06
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA $08
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	LOADPTR BTLACT_PSI_ROCKIN_B, $06
	LDA $06
	STA $12
	LDA $08
	STA $14
	BRA BTLACT_PRAY_UNKNOWN17
BTLACT_PRAY_UNKNOWN12:
	JSL TARGET_ALL
	LOADPTR BTLACT_PSI_FLASH_A, $06
	LDA $06
	STA $12
	LDA $08
	STA $14
	BRA BTLACT_PRAY_UNKNOWN17
BTLACT_PRAY_UNKNOWN13:
	JSL TARGET_ALL
	LOADPTR BTLACT_PRAY_RAINBOW, $06
	LDA $06
	STA $12
	LDA $08
	STA $14
	BRA BTLACT_PRAY_UNKNOWN17
BTLACT_PRAY_UNKNOWN14:
	JSL TARGET_ALL
	LOADPTR BTLACT_PRAY_AROMA, $06
	LDA $06
	STA $12
	LDA $08
	STA $14
	BRA BTLACT_PRAY_UNKNOWN17
BTLACT_PRAY_UNKNOWN15:
	JSL TARGET_ALL
	LOADPTR BTLACT_PRAY_RENDING_SOUND, $06
	LDA $06
	STA $12
	LDA $08
	STA $14
	BRA BTLACT_PRAY_UNKNOWN17
BTLACT_PRAY_UNKNOWN16:
	JSL TARGET_ALL
	LOADPTR BTLACT_DEFENSE_DOWN_A, $06
	LDA $06
	STA $12
	LDA $08
	STA $14
BTLACT_PRAY_UNKNOWN17:
	LDA $16
	CMP #$0006
	BEQ BTLACT_PRAY_UNKNOWN18
	JSR a:.LOWORD(REMOVE_DEAD_TARGETTING)
BTLACT_PRAY_UNKNOWN18:
	LDA $12
	STA $06
	LDA $14
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	JSL UNKNOWN_C240A4
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)
	LDA #$0000
	STA .LOWORD(BATTLER_TARGET_FLAGS)+2
	PLD
	RTL

COPY_MIRROR_DATA: ;$C2AF1F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFAE
	TCD
	LDA $64
	STA $06
	LDA $66
	STA $08
	LDA $06
	STA $4E
	LDA $08
	STA $50
	LDA $60
	STA $06
	LDA $62
	STA $08
	LDA $06
	STA $4A
	LDA $08
	STA $4C
	LDA #$0011
	CLC
	ADC $06
	STA $06
	STA $46
	LDA $08
	STA $48
	LDA [$46]
	STA $44
	LDA #$0017
	LDX $4A
	STX $06
	LDX $4C
	STX $08
	CLC
	ADC $06
	STA $06
	STA $40
	LDA $08
	STA $42
	LDA [$40]
	STA $3E
	LDA #$0013
	LDX $4A
	STX $06
	LDX $4C
	STX $08
	CLC
	ADC $06
	STA $06
	STA $3A
	LDA $08
	STA $3C
	LDA [$3A]
	STA $38
	LDA #$0019
	LDX $4A
	STX $06
	LDX $4C
	STX $08
	CLC
	ADC $06
	STA $06
	STA $34
	LDA $08
	STA $36
	LDA [$34]
	STA $32
	LDA #$0015
	LDX $4A
	STX $06
	LDX $4C
	STX $08
	CLC
	ADC $06
	STA $06
	STA $2E
	LDA $08
	STA $30
	LDA [$2E]
	STA $2C
	LDA #$001B
	LDX $4A
	STX $06
	LDX $4C
	STX $08
	CLC
	ADC $06
	STA $06
	STA $28
	LDA $08
	STA $2A
	LDA [$28]
	STA $26
	LDA #$000E
	LDX $4A
	STX $06
	LDX $4C
	STX $08
	CLC
	ADC $06
	STA $06
	STA $22
	LDA $08
	STA $24
	LDA [$22]
	AND #$00FF
	STA $04
	LDA #$0010
	LDX $4A
	STX $06
	LDX $4C
	STX $08
	CLC
	ADC $06
	STA $06
	STA $1E
	LDA $08
	STA $20
	LDA [$1E]
	AND #$00FF
	STA $02
	LDA $4A
	STA $06
	LDA $4C
	STA $08
	LDA $06
	STA $1A
	LDA $08
	STA $1C
	LDA [$1A]
	TAY
	STY $18
	LDA #$000D
	LDX $4A
	STX $06
	LDX $4C
	STX $08
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	AND #$00FF
	TAX
	STX $16
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $4E
	STA $06
	LDA $50
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	LDA #$004E
	JSL MEMCPY24
	LDA $44
	STA [$46]
	LDA $3E
	STA [$40]
	LDA $38
	STA [$3A]
	LDA $32
	STA [$34]
	LDA $2C
	STA [$2E]
	LDA $26
	STA [$28]
	LDA $04
	SEP #PROC_FLAGS::ACCUM8
	STA [$22]
	REP #PROC_FLAGS::ACCUM8
	LDA $02
	SEP #PROC_FLAGS::ACCUM8
	STA [$1E]
	LDY $18
	REP #PROC_FLAGS::ACCUM8
	TYA
	STA [$1A]
	LDX $16
	TXA
	SEP #PROC_FLAGS::ACCUM8
	STA [$0A]
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

BTLACT_MIRROR: ;$C2B0A1
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE6
	TCD
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM),X
	TAX
	STX $18
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BNE BTLACT_MIRROR_UNKNOWN0
	JMP a:.LOWORD(BTLACT_MIRROR_UNKNOWN2)
BTLACT_MIRROR_UNKNOWN0:
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+15,X
	AND #$00FF
	BEQ BTLACT_MIRROR_UNKNOWN1
	JMP a:.LOWORD(BTLACT_MIRROR_UNKNOWN2)
BTLACT_MIRROR_UNKNOWN1:
	LDA #$0064
	JSR a:.LOWORD(RAND_LIMIT)
	STA $16
	LDX $18
	TXA
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	CLC
	ADC #enemy_data::mirror_success
	TAX
	LDA f:ENEMY_CONFIGURATION_TABLE,X
	AND #$00FF
	STA $02
	LDA $16
	CMP $02
	BCS BTLACT_MIRROR_UNKNOWN2
	LDX $18
	STX .LOWORD(MIRROR_ENEMY)
	LDA #$0010
	STA .LOWORD(MIRROR_TURN_TIMER)
	LDA .LOWORD(CURRENT_ATTACKER)
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$004E
	LDA #$AA14
	JSL MEMCPY16
	LDA .LOWORD(CURRENT_ATTACKER)
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA .LOWORD(CURRENT_TARGET)
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL COPY_MIRROR_DATA
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6A99
	BRA BTLACT_MIRROR_UNKNOWN3
BTLACT_MIRROR_UNKNOWN2:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6AB3
BTLACT_MIRROR_UNKNOWN3:
	PLD
	RTL

APPLY_CONDIMENT: ;$C2B172
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+8,X
	AND #$00FF
	STA $04
	STA $16
	LDA $04
	SEP #PROC_FLAGS::ACCUM8
	JSL FIND_CONDIMENT
	.A16
	STA $02
	CMP #$0000
	BNE APPLY_CONDIMENT_UNKNOWN0
	JMP a:.LOWORD(APPLY_CONDIMENT_UNKNOWN6)
APPLY_CONDIMENT_UNKNOWN0:
	LDX $02
	STX $14
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM),X
	LDX $14
	JSL TAKE_ITEM_FROM_CHARACTER
	LDY #$0000
	STY $12
	BRA APPLY_CONDIMENT_UNKNOWN4
APPLY_CONDIMENT_UNKNOWN1:
	PHA
	LDA $16
	STA $04
	PLA
	AND #$00FF
	CMP $04
	BNE APPLY_CONDIMENT_UNKNOWN3
	TXA
	INC
	LDY $06
	STY $0A
	LDY $08
	STY $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	AND #$00FF
	CMP $02
	BEQ APPLY_CONDIMENT_UNKNOWN2
	TXA
	INC
	INC
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	CMP $02
	BNE APPLY_CONDIMENT_UNKNOWN5
APPLY_CONDIMENT_UNKNOWN2:
	.A16
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C97C9D
	LOADPTR CONDIMENT_TABLE, $06
	LDY $12
	TYA
	STA $04
	ASL
	ADC $04
	ASL
	ADC $04
	INC
	INC
	INC
	CLC
	ADC $06
	STA $06
	STA $1E
	LDA $08
	STA $20
	BRA APPLY_CONDIMENT_UNKNOWN7
APPLY_CONDIMENT_UNKNOWN3:
	INY
	STY $12
APPLY_CONDIMENT_UNKNOWN4:
	LOADPTR CONDIMENT_TABLE, $06
	TYA
	STA $04
	ASL
	ADC $04
	ASL
	ADC $04
	TAX
	PHA
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	PLA
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	AND #$00FF
	BEQ APPLY_CONDIMENT_UNKNOWN5
	JMP a:.LOWORD(APPLY_CONDIMENT_UNKNOWN1)
APPLY_CONDIMENT_UNKNOWN5:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C97CB1
APPLY_CONDIMENT_UNKNOWN6:
	LOADPTR ITEM_CONFIGURATION_TABLE, $06
	LDA $16
	STA $04
	LDY #.SIZEOF(item)
	JSL MULT168
	CLC
	ADC #item::strength
	CLC
	ADC $06
	STA $06
	STA $1E
	LDA $08
	STA $20
APPLY_CONDIMENT_UNKNOWN7:
	PLD
	RTS

EAT_FOOD: ;$C2B27D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE2
	TCD
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM),X
	TAX
	STX $1C
	TXA
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	TAX
	LDA .LOWORD(CHAR_STRUCT)+char_struct::afflictions,X
	AND #$00FF
	CMP #STATUS_0::UNCONSCIOUS
	BNE EAT_FOOD_UNKNOWN0
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF766E
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN36)
EAT_FOOD_UNKNOWN0:
	JSR a:.LOWORD(APPLY_CONDIMENT)
	LDA $06
	STA $18
	LDA $08
	STA $1A
	LDX $1C
	CPX #$0004
	BNE EAT_FOOD_UNKNOWN1
	LDA #$0002
	BRA EAT_FOOD_UNKNOWN2
EAT_FOOD_UNKNOWN1:
	LDA #$0001
EAT_FOOD_UNKNOWN2:
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	AND #$00FF
	TAY
	STY $16
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	LDA [$0A]
	AND #$00FF
	BEQ EAT_FOOD_UNKNOWN12
	CMP #$0001
	BEQ EAT_FOOD_UNKNOWN15
	CMP #$0002
	BNE EAT_FOOD_UNKNOWN3
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN18)
EAT_FOOD_UNKNOWN3:
	CMP #$0003
	BNE EAT_FOOD_UNKNOWN4
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN23)
EAT_FOOD_UNKNOWN4:
	CMP #$0004
	BNE EAT_FOOD_UNKNOWN5
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN28)
EAT_FOOD_UNKNOWN5:
	CMP #$0005
	BNE EAT_FOOD_UNKNOWN6
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN29)
EAT_FOOD_UNKNOWN6:
	CMP #$0006
	BNE EAT_FOOD_UNKNOWN7
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN30)
EAT_FOOD_UNKNOWN7:
	CMP #$0007
	BNE EAT_FOOD_UNKNOWN8
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN31)
EAT_FOOD_UNKNOWN8:
	CMP #$0008
	BNE EAT_FOOD_UNKNOWN9
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN32)
EAT_FOOD_UNKNOWN9:
	CMP #$0009
	BNE EAT_FOOD_UNKNOWN10
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN33)
EAT_FOOD_UNKNOWN10:
	CMP #$000A
	BNE EAT_FOOD_UNKNOWN11
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN34)
EAT_FOOD_UNKNOWN11:
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN35)
EAT_FOOD_UNKNOWN12:
	CPY #$0000
	BEQ EAT_FOOD_UNKNOWN13
	TYA
	STA $04
	ASL
	ADC $04
	ASL
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	BRA EAT_FOOD_UNKNOWN14
EAT_FOOD_UNKNOWN13:
	LDX #$7530
EAT_FOOD_UNKNOWN14:
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN35)
EAT_FOOD_UNKNOWN15:
	CPY #$0000
	BEQ EAT_FOOD_UNKNOWN16
	TYA
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	BRA EAT_FOOD_UNKNOWN17
EAT_FOOD_UNKNOWN16:
	LDX #$7530
EAT_FOOD_UNKNOWN17:
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_PP)
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN35)
EAT_FOOD_UNKNOWN18:
	CPY #$0000
	BEQ EAT_FOOD_UNKNOWN19
	TYA
	STA $04
	ASL
	ADC $04
	ASL
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	BRA EAT_FOOD_UNKNOWN20
EAT_FOOD_UNKNOWN19:
	LDX #$7530
EAT_FOOD_UNKNOWN20:
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_HP)
	LDY $16
	BEQ EAT_FOOD_UNKNOWN21
	TYA
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	TAX
	BRA EAT_FOOD_UNKNOWN22
EAT_FOOD_UNKNOWN21:
	LDX #$7530
EAT_FOOD_UNKNOWN22:
	LDA .LOWORD(CURRENT_TARGET)
	JSR a:.LOWORD(RECOVER_PP)
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN35)
EAT_FOOD_UNKNOWN23:
	LDA #$0004
	JSR a:.LOWORD(RAND_LIMIT)
	CMP #$0000
	BEQ EAT_FOOD_UNKNOWN28
	CMP #$0001
	BNE EAT_FOOD_UNKNOWN24
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN29)
EAT_FOOD_UNKNOWN24:
	CMP #$0002
	BNE EAT_FOOD_UNKNOWN25
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN30)
EAT_FOOD_UNKNOWN25:
	CMP #$0003
	BNE EAT_FOOD_UNKNOWN26
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN31)
EAT_FOOD_UNKNOWN26:
	CMP #$0004
	BNE EAT_FOOD_UNKNOWN27
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN32)
EAT_FOOD_UNKNOWN27:
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN35)
EAT_FOOD_UNKNOWN28:
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0031
	LDY $16
	SEP #PROC_FLAGS::INDEX8
	STY $00
	PHA
	REP #PROC_FLAGS::INDEX8
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $00
	PLX
	STA a:.LOWORD(RAM),X
	LDX $1C
	REP #PROC_FLAGS::ACCUM8
	TXA
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::boosted_iq
	PHA
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $00
	PLX
	STA a:.LOWORD(RAM),X
	LDX $1C
	REP #PROC_FLAGS::ACCUM8
	TXA
	JSL RECALC_CHARACTER_POSTMATH_IQ
	REP #PROC_FLAGS::ACCUM8
	LOADPTR TEXT_BLOCK_C8F7B8, $0E
	LDY $16
	TYA
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN35)
EAT_FOOD_UNKNOWN29:
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$002C
	PHA
	LDY $16
	STY $02
	TAX
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $02
	PLX
	STA a:.LOWORD(RAM),X
	LDX $1C
	TXA
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::boosted_guts
	PHA
	LDY $16
	SEP #PROC_FLAGS::INDEX8
	STY $00
	REP #PROC_FLAGS::INDEX8
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $00
	PLX
	STA a:.LOWORD(RAM),X
	LDX $1C
	REP #PROC_FLAGS::ACCUM8
	TXA
	JSL RECALC_CHARACTER_POSTMATH_GUTS
	REP #PROC_FLAGS::ACCUM8
	LOADPTR TEXT_BLOCK_C8F7D2, $0E
	LDY $16
	TYA
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN35)
EAT_FOOD_UNKNOWN30:
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$002A
	PHA
	LDY $16
	STY $02
	TAX
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $02
	PLX
	STA a:.LOWORD(RAM),X
	LDX $1C
	TXA
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::boosted_speed
	PHA
	LDY $16
	SEP #PROC_FLAGS::INDEX8
	STY $00
	REP #PROC_FLAGS::INDEX8
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $00
	PLX
	STA a:.LOWORD(RAM),X
	LDX $1C
	REP #PROC_FLAGS::ACCUM8
	TXA
	JSL RECALC_CHARACTER_POSTMATH_SPEED
	REP #PROC_FLAGS::ACCUM8
	LOADPTR TEXT_BLOCK_C8F82F, $0E
	LDY $16
	TYA
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	JMP a:.LOWORD(EAT_FOOD_UNKNOWN35)
EAT_FOOD_UNKNOWN31:
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$0030
	LDY $16
	SEP #PROC_FLAGS::INDEX8
	STY $00
	PHA
	REP #PROC_FLAGS::INDEX8
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $00
	PLX
	STA a:.LOWORD(RAM),X
	LDX $1C
	REP #PROC_FLAGS::ACCUM8
	TXA
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::boosted_vitality
	PHA
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $00
	PLX
	STA a:.LOWORD(RAM),X
	LDX $1C
	REP #PROC_FLAGS::ACCUM8
	TXA
	JSL RECALC_CHARACTER_POSTMATH_VITALITY
	REP #PROC_FLAGS::ACCUM8
	LOADPTR TEXT_BLOCK_C8F84C, $0E
	LDY $16
	TYA
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	BRA EAT_FOOD_UNKNOWN35
EAT_FOOD_UNKNOWN32:
	LDA .LOWORD(CURRENT_TARGET)
	CLC
	ADC #$002E
	PHA
	LDY $16
	STY $02
	TAX
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $02
	PLX
	STA a:.LOWORD(RAM),X
	LDX $1C
	TXA
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)+char_struct::boosted_luck
	PHA
	LDY $16
	SEP #PROC_FLAGS::INDEX8
	STY $00
	REP #PROC_FLAGS::INDEX8
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $00
	PLX
	STA a:.LOWORD(RAM),X
	LDX $1C
	REP #PROC_FLAGS::ACCUM8
	TXA
	JSL RECALC_CHARACTER_POSTMATH_LUCK
	REP #PROC_FLAGS::ACCUM8
	LOADPTR TEXT_BLOCK_C8F86B, $0E
	LDY $16
	TYA
	STA $06
	STZ $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DISPLAY_TEXT_WAIT
	BRA EAT_FOOD_UNKNOWN35
EAT_FOOD_UNKNOWN33:
	JSL BTLACT_HEALING_A
	BRA EAT_FOOD_UNKNOWN35
EAT_FOOD_UNKNOWN34:
	JSL HEAL_POISON
EAT_FOOD_UNKNOWN35:
	LDA $18
	STA $06
	LDA $1A
	STA $08
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0003
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BEQ EAT_FOOD_UNKNOWN36
	AND #$00FF
	STA $04
	ASL
	ADC $04
	ASL
	JSL UNKNOWN_C076C8
EAT_FOOD_UNKNOWN36:
	PLD
	RTL

CALC_PSI_DMG_MODIFIERS: ;$C2B608
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	AND #$00FF
	BEQ CALC_PSI_DMG_MODIFIERS_UNKNOWN0
	CMP #$0001
	BEQ CALC_PSI_DMG_MODIFIERS_UNKNOWN1
	CMP #$0002
	BEQ CALC_PSI_DMG_MODIFIERS_UNKNOWN2
	CMP #$0003
	BEQ CALC_PSI_DMG_MODIFIERS_UNKNOWN3
	BRA CALC_PSI_DMG_MODIFIERS_UNKNOWN4
CALC_PSI_DMG_MODIFIERS_UNKNOWN0:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00FF
	BRA CALC_PSI_DMG_MODIFIERS_UNKNOWN4
CALC_PSI_DMG_MODIFIERS_UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00B3
	BRA CALC_PSI_DMG_MODIFIERS_UNKNOWN4
CALC_PSI_DMG_MODIFIERS_UNKNOWN2:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0066
	BRA CALC_PSI_DMG_MODIFIERS_UNKNOWN4
CALC_PSI_DMG_MODIFIERS_UNKNOWN3:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$000D
CALC_PSI_DMG_MODIFIERS_UNKNOWN4:
	SEP #PROC_FLAGS::ACCUM8
	RTL

CALC_PSI_RES_MODIFIERS: ;$C2B639
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	AND #$00FF
	BEQ CALC_PSI_RES_MODIFIERS_UNKNOWN0
	CMP #$0001
	BEQ CALC_PSI_RES_MODIFIERS_UNKNOWN1
	CMP #$0002
	BEQ CALC_PSI_RES_MODIFIERS_UNKNOWN2
	CMP #$0003
	BEQ CALC_PSI_RES_MODIFIERS_UNKNOWN3
	BRA CALC_PSI_RES_MODIFIERS_UNKNOWN4
CALC_PSI_RES_MODIFIERS_UNKNOWN0:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00FF
	BRA CALC_PSI_RES_MODIFIERS_UNKNOWN4
CALC_PSI_RES_MODIFIERS_UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0080
	BRA CALC_PSI_RES_MODIFIERS_UNKNOWN4
CALC_PSI_RES_MODIFIERS_UNKNOWN2:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$001A
	BRA CALC_PSI_RES_MODIFIERS_UNKNOWN4
CALC_PSI_RES_MODIFIERS_UNKNOWN3:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
CALC_PSI_RES_MODIFIERS_UNKNOWN4:
	SEP #PROC_FLAGS::ACCUM8
	RTL

UNKNOWN_C2B66A: ;$C2B66A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFED
	TCD
	PLA
	TAY
	STY $11
	SEP #PROC_FLAGS::ACCUM8
	STZ $0E
	LDX #$001A
	REP #PROC_FLAGS::ACCUM8
	LDA #.LOWORD(UNKNOWN_7EAA98)
	JSL MEMSET16
	LDA #$0000
	STA $0F
	BRA UNKNOWN_C2B66A_UNKNOWN2
UNKNOWN_C2B66A_UNKNOWN0:
	LDY #$004E
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ UNKNOWN_C2B66A_UNKNOWN1
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BNE UNKNOWN_C2B66A_UNKNOWN1
	LDY $11
	TYA
	CMP .LOWORD(BATTLERS_TABLE)+76,X
	BNE UNKNOWN_C2B66A_UNKNOWN1
	LDA .LOWORD(BATTLERS_TABLE)+battler::the_flag,X
	AND #$00FF
	TAX
	DEX
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA .LOWORD(UNKNOWN_7EAA98),X
UNKNOWN_C2B66A_UNKNOWN1:
	REP #PROC_FLAGS::ACCUM8
	LDA $0F
	INC
	STA $0F
UNKNOWN_C2B66A_UNKNOWN2:
	CMP #$0020
	BCC UNKNOWN_C2B66A_UNKNOWN0
	LDX #$0000
	BRA UNKNOWN_C2B66A_UNKNOWN5
UNKNOWN_C2B66A_UNKNOWN3:
	LDA .LOWORD(UNKNOWN_7EAA98),X
	AND #$00FF
	BNE UNKNOWN_C2B66A_UNKNOWN4
	TXA
	SEP #PROC_FLAGS::ACCUM8
	INC
	BRA UNKNOWN_C2B66A_UNKNOWN6
UNKNOWN_C2B66A_UNKNOWN4:
	INX
UNKNOWN_C2B66A_UNKNOWN5:
	CPX #$001A
	BCC UNKNOWN_C2B66A_UNKNOWN3
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
UNKNOWN_C2B66A_UNKNOWN6:
	PLD
	RTL

BATTLE_INIT_ENEMY_STATS: ;$C2B6EB
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEF
	TCD
	PLA
	STX $02
	TAY
	STY $0F
	LOADPTR ENEMY_CONFIGURATION_TABLE, $06
	TYA
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	CLC
	ADC $06
	STA $06
	SEP #PROC_FLAGS::ACCUM8
	STZ $0E
	LDX #$004E
	REP #PROC_FLAGS::ACCUM8
	LDA $02
	JSL MEMSET16
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0036
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	TAX
	CPX .LOWORD(UNKNOWN_7EAA0C)
	BCC BATTLE_INIT_ENEMY_STATS_UNKNOWN0
	BEQ BATTLE_INIT_ENEMY_STATS_UNKNOWN0
	STX .LOWORD(UNKNOWN_7EAA0C)
BATTLE_INIT_ENEMY_STATS_UNKNOWN0:
	LDY $0F
	TYA
	LDX $02
	STA a:.LOWORD(RAM),X
	TYA
	LDX $02
	STA a:.LOWORD(RAM)+76,X
	LDY #$001C
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+2,X
	LDY $0F
	TYA
	JSL UNKNOWN_C2B66A
	.A8
	LDX $02
	STA a:.LOWORD(RAM)+11,X
	LDA #$01
	LDX $02
	STA a:.LOWORD(RAM)+12,X
	LDX $02
	STA a:.LOWORD(RAM)+14,X
	LDX $02
	STZ a:.LOWORD(RAM)+15,X
	LDY #$005B
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+16,X
	REP #PROC_FLAGS::ACCUM8
	LDY #$0021
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+21,X
	LDX $02
	STA a:.LOWORD(RAM)+19,X
	LDX $02
	STA a:.LOWORD(RAM)+17,X
	LDY #$0023
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+27,X
	LDX $02
	STA a:.LOWORD(RAM)+25,X
	LDX $02
	STA a:.LOWORD(RAM)+23,X
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0038
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+50,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	LDX $02
	STA a:.LOWORD(RAM)+38,X
	SEP #PROC_FLAGS::ACCUM8
	LDY #$003A
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+51,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	LDX $02
	STA a:.LOWORD(RAM)+40,X
	SEP #PROC_FLAGS::ACCUM8
	LDY #$003C
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+52,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	LDX $02
	STA a:.LOWORD(RAM)+42,X
	SEP #PROC_FLAGS::ACCUM8
	LDY #$003D
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+53,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	LDX $02
	STA a:.LOWORD(RAM)+44,X
	SEP #PROC_FLAGS::ACCUM8
	LDY #$003E
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+54,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	LDX $02
	STA a:.LOWORD(RAM)+46,X
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	STZ a:.LOWORD(RAM)+48,X
	LDY #$0055
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+49,X
	LDY #$003F
	LDA [$06],Y
	JSL CALC_PSI_DMG_MODIFIERS
	LDX $02
	STA a:.LOWORD(RAM)+58,X
	LDY #$0040
	LDA [$06],Y
	JSL CALC_PSI_DMG_MODIFIERS
	LDX $02
	STA a:.LOWORD(RAM)+56,X
	LDY #$0041
	LDA [$06],Y
	JSL CALC_PSI_RES_MODIFIERS
	LDX $02
	STA a:.LOWORD(RAM)+57,X
	LDY #$0042
	LDA [$06],Y
	JSL CALC_PSI_RES_MODIFIERS
	LDX $02
	STA a:.LOWORD(RAM)+55,X
	REP #PROC_FLAGS::ACCUM8
	LDA #$0043
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	SEP #PROC_FLAGS::ACCUM8
	LDA [$0A]
	JSL CALC_PSI_RES_MODIFIERS
	LDX $02
	STA a:.LOWORD(RAM)+60,X
	LDA [$0A]
	STA $00
	LDA #$0003
	SEC
	SBC $00
	JSL CALC_PSI_RES_MODIFIERS
	LDX $02
	STA a:.LOWORD(RAM)+59,X
	REP #PROC_FLAGS::ACCUM8
	LDY #$0029
	LDA [$06],Y
	LDX $02
	STA a:.LOWORD(RAM)+61,X
	LDY #$0025
	LDA [$06],Y
	PHA
	INY
	INY
	LDA [$06],Y
	STA $0C
	PLA
	STA $0A
	LDA $02
	CLC
	ADC #$003F
	TAY
	LDA $0A
	STA a:.LOWORD(RAM),Y
	LDA $0C
	STA a:.LOWORD(RAM)+2,Y
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0059
	LDA [$06],Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP #$0001
	BEQ BATTLE_INIT_ENEMY_STATS_UNKNOWN1
	CMP #$0002
	BEQ BATTLE_INIT_ENEMY_STATS_UNKNOWN2
	CMP #$0003
	BEQ BATTLE_INIT_ENEMY_STATS_UNKNOWN3
	CMP #$0004
	BEQ BATTLE_INIT_ENEMY_STATS_UNKNOWN4
	CMP #$0005
	BEQ BATTLE_INIT_ENEMY_STATS_UNKNOWN5
	CMP #$0006
	BEQ BATTLE_INIT_ENEMY_STATS_UNKNOWN6
	CMP #$0007
	BEQ BATTLE_INIT_ENEMY_STATS_UNKNOWN7
	BRA BATTLE_INIT_ENEMY_STATS_UNKNOWN8
BATTLE_INIT_ENEMY_STATS_UNKNOWN1:
	LDX #$0002
	LDA $02
	JSR a:.LOWORD(SHIELDS_COMMON)
	BRA BATTLE_INIT_ENEMY_STATS_UNKNOWN8
BATTLE_INIT_ENEMY_STATS_UNKNOWN2:
	LDX #$0001
	LDA $02
	JSR a:.LOWORD(SHIELDS_COMMON)
	BRA BATTLE_INIT_ENEMY_STATS_UNKNOWN8
BATTLE_INIT_ENEMY_STATS_UNKNOWN3:
	LDX #$0004
	LDA $02
	JSR a:.LOWORD(SHIELDS_COMMON)
	BRA BATTLE_INIT_ENEMY_STATS_UNKNOWN8
BATTLE_INIT_ENEMY_STATS_UNKNOWN4:
	LDX #$0003
	LDA $02
	JSR a:.LOWORD(SHIELDS_COMMON)
	BRA BATTLE_INIT_ENEMY_STATS_UNKNOWN8
BATTLE_INIT_ENEMY_STATS_UNKNOWN5:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	LDX $02
	STA a:.LOWORD(RAM)+31,X
	BRA BATTLE_INIT_ENEMY_STATS_UNKNOWN8
BATTLE_INIT_ENEMY_STATS_UNKNOWN6:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0004
	LDX $02
	STA a:.LOWORD(RAM)+33,X
	BRA BATTLE_INIT_ENEMY_STATS_UNKNOWN8
BATTLE_INIT_ENEMY_STATS_UNKNOWN7:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	LDX $02
	STA a:.LOWORD(RAM)+32,X
BATTLE_INIT_ENEMY_STATS_UNKNOWN8:
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

BATTLE_INIT_PLAYER_STATS: ;$C2B930
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE6
	TCD
	PLA
	TXY
	STY $18
	STA $04
	DEC
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	STA $02
	SEP #PROC_FLAGS::ACCUM8
	STZ $0E
	LDX #$004E
	LDY $18
	REP #PROC_FLAGS::ACCUM8
	TYA
	JSL MEMSET16
	LDA $04
	LDY $18
	STA a:.LOWORD(RAM),Y
	TYX
	STZ a:.LOWORD(RAM)+2,X
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA a:.LOWORD(RAM)+12,Y
	TYX
	STZ a:.LOWORD(RAM)+14,X
	TYX
	STZ a:.LOWORD(RAM)+15,X
	LDX $02
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+69,X
	STA a:.LOWORD(RAM)+17,Y
	LDX $02
	LDA a:.LOWORD(RAM)+71,X
	STA a:.LOWORD(RAM)+19,Y
	LDX $02
	LDA a:.LOWORD(RAM)+10,X
	STA a:.LOWORD(RAM)+21,Y
	LDX $02
	LDA a:.LOWORD(RAM)+75,X
	STA a:.LOWORD(RAM)+23,Y
	LDX $02
	LDA a:.LOWORD(RAM)+77,X
	STA a:.LOWORD(RAM)+25,Y
	LDX $02
	LDA a:.LOWORD(RAM)+12,X
	STA a:.LOWORD(RAM)+27,Y
	TYA
	CLC
	ADC #$001D
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $02
	CLC
	ADC #$000E
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $12
	LDA $08
	STA $14
	LDA #$0007
	JSL MEMCPY24
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+21,X
	LDY $18
	STA a:.LOWORD(RAM)+50,Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA a:.LOWORD(RAM)+38,Y
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+22,X
	STA a:.LOWORD(RAM)+51,Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA a:.LOWORD(RAM)+40,Y
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+23,X
	STA a:.LOWORD(RAM)+52,Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA a:.LOWORD(RAM)+42,Y
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+24,X
	STA a:.LOWORD(RAM)+53,Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA a:.LOWORD(RAM)+44,Y
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+25,X
	STA a:.LOWORD(RAM)+54,Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA a:.LOWORD(RAM)+46,Y
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+26,X
	STA a:.LOWORD(RAM)+48,Y
	LDX $02
	LDA a:.LOWORD(RAM)+27,X
	STA a:.LOWORD(RAM)+49,Y
	LDX $02
	LDA a:.LOWORD(RAM)+82,X
	JSL CALC_PSI_DMG_MODIFIERS
	LDY $18
	STA a:.LOWORD(RAM)+58,Y
	LDX $02
	LDA a:.LOWORD(RAM)+83,X
	JSL CALC_PSI_DMG_MODIFIERS
	LDY $18
	STA a:.LOWORD(RAM)+56,Y
	LDX $02
	LDA a:.LOWORD(RAM)+84,X
	JSL CALC_PSI_RES_MODIFIERS
	LDY $18
	STA a:.LOWORD(RAM)+57,Y
	LDX $02
	LDA a:.LOWORD(RAM)+85,X
	JSL CALC_PSI_RES_MODIFIERS
	LDY $18
	STA a:.LOWORD(RAM)+55,Y
	REP #PROC_FLAGS::ACCUM8
	LDA $02
	CLC
	ADC #$0056
	TAX
	STX $16
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	JSL CALC_PSI_RES_MODIFIERS
	LDY $18
	STA a:.LOWORD(RAM)+60,Y
	LDX $16
	LDA a:.LOWORD(RAM),X
	STA $00
	LDA #$0003
	SEC
	SBC $00
	JSL CALC_PSI_RES_MODIFIERS
	LDY $18
	STA a:.LOWORD(RAM)+59,Y
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	SEP #PROC_FLAGS::ACCUM8
	DEC
	STA a:.LOWORD(RAM)+16,Y
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

COUNT_CHARS: ;$C2BAC5
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF2
	TCD
	PLA
	STA $04
	LDA #$0000
	STA $02
	LDX #.LOWORD(BATTLERS_TABLE)
	TAY
	BRA @UNKNOWN2
@UNKNOWN0:
	LDA a:.LOWORD(RAM)+battler::consciousness,X
	AND #$00FF
	BEQ @UNKNOWN1
	LDA a:.LOWORD(RAM)+battler::ally_or_enemy,X
	AND #$00FF
	CMP $04
	BNE @UNKNOWN1
	LDA a:.LOWORD(RAM)+battler::npc_id,X
	AND #$00FF
	BNE @UNKNOWN1
	LDA a:.LOWORD(RAM)+battler::afflictions,X
	AND #$00FF
	CMP #$0001
	BEQ @UNKNOWN1
	CMP #$0002
	BEQ @UNKNOWN1
	INC $02
@UNKNOWN1:
	TXA
	CLC
	ADC #.SIZEOF(battler)
	TAX
	INY
@UNKNOWN2:
	CPY #$0020
	BCC @UNKNOWN0
	LDA $02
	PLD
	RTL

CHECK_DEAD_PLAYERS: ;$C2BB18
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA #$0000
	STA $04
	JMP a:.LOWORD(CHECK_DEAD_PLAYERS_UNKNOWN9)
CHECK_DEAD_PLAYERS_UNKNOWN0:
	LDA $04
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAY
	STY $16
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,Y
	AND #$00FF
	BNE CHECK_DEAD_PLAYERS_UNKNOWN1
	JMP a:.LOWORD(CHECK_DEAD_PLAYERS_UNKNOWN8)
CHECK_DEAD_PLAYERS_UNKNOWN1:
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,Y
	AND #$00FF
	BEQ CHECK_DEAD_PLAYERS_UNKNOWN2
	JMP a:.LOWORD(CHECK_DEAD_PLAYERS_UNKNOWN8)
CHECK_DEAD_PLAYERS_UNKNOWN2:
	LDA .LOWORD(BATTLERS_TABLE)+battler::npc_id,Y
	AND #$00FF
	BEQ CHECK_DEAD_PLAYERS_UNKNOWN3
	JMP a:.LOWORD(CHECK_DEAD_PLAYERS_UNKNOWN8)
CHECK_DEAD_PLAYERS_UNKNOWN3:
	LDA .LOWORD(BATTLERS_TABLE)+16,Y
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	STA $02
	STA $14
	LDY $16
	TYA
	CLC
	ADC #.LOWORD(BATTLERS_TABLE)+battler::hp
	TAX
	STX $12
	LDX $02
	LDA a:.LOWORD(RAM)+69,X
	LDX $12
	STA a:.LOWORD(RAM),X
	LDX $02
	LDA a:.LOWORD(RAM)+75,X
	STA .LOWORD(BATTLERS_TABLE)+battler::pp,Y
	LDX $12
	LDA a:.LOWORD(RAM),X
	BNE CHECK_DEAD_PLAYERS_UNKNOWN4
	LDA .LOWORD(BATTLERS_TABLE)+battler::afflictions,Y
	AND #$00FF
	CMP #STATUS_0::UNCONSCIOUS
	BEQ CHECK_DEAD_PLAYERS_UNKNOWN4
	TYA
	CLC
	ADC #.LOWORD(BATTLERS_TABLE)
	STA .LOWORD(CURRENT_TARGET)
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA a:.LOWORD(RAM)+29,X
	LDX .LOWORD(CURRENT_TARGET)
	STZ a:.LOWORD(RAM)+35,X
	LDX .LOWORD(CURRENT_TARGET)
	STZ a:.LOWORD(RAM)+34,X
	LDX .LOWORD(CURRENT_TARGET)
	STZ a:.LOWORD(RAM)+33,X
	LDX .LOWORD(CURRENT_TARGET)
	STZ a:.LOWORD(RAM)+32,X
	LDX .LOWORD(CURRENT_TARGET)
	STZ a:.LOWORD(RAM)+31,X
	LDX .LOWORD(CURRENT_TARGET)
	STZ a:.LOWORD(RAM)+30,X
	JSL FIX_TARGET_NAME
	.A16
	LDX .LOWORD(WINDOW_EXISTENCE_TABLE)+28
	STX $16
	LDA #$000E
	JSL REDIRECT_CREATE_WINDOW
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF6C6B
	LDX $16
	CPX #$FFFF
	BNE CHECK_DEAD_PLAYERS_UNKNOWN4
	JSL REDIRECT_CLOSE_FOCUS_WINDOW
CHECK_DEAD_PLAYERS_UNKNOWN4:
	LDX #$0000
	STX $12
	BRA CHECK_DEAD_PLAYERS_UNKNOWN6
CHECK_DEAD_PLAYERS_UNKNOWN5:
	REP #PROC_FLAGS::ACCUM8
	LDA $14
	STA $02
	STX $02
	CLC
	ADC $02
	PHA
	STX $02
	LDA $04
	LDY #.SIZEOF(battler)
	JSL MULT168
	CLC
	ADC #.LOWORD(BATTLERS_TABLE)+battler::afflictions
	CLC
	ADC $02
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	PLX
	STA a:.LOWORD(RAM)+14,X
	LDX $12
	INX
	STX $12
CHECK_DEAD_PLAYERS_UNKNOWN6:
	CPX #$0007
	BCC CHECK_DEAD_PLAYERS_UNKNOWN5
	REP #PROC_FLAGS::ACCUM8
	LDA $14
	STA $02
	CLC
	ADC #$0012
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BEQ CHECK_DEAD_PLAYERS_UNKNOWN7
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA a:.LOWORD(RAM),X
CHECK_DEAD_PLAYERS_UNKNOWN7:
	JSL UNKNOWN_C034D6
CHECK_DEAD_PLAYERS_UNKNOWN8:
	INC $04
CHECK_DEAD_PLAYERS_UNKNOWN9:
	.A16
	LDA $04
	CMP #TOTAL_PARTY_COUNT
	BCS CHECK_DEAD_PLAYERS_UNKNOWN10
	BEQ CHECK_DEAD_PLAYERS_UNKNOWN10
	JMP a:.LOWORD(CHECK_DEAD_PLAYERS_UNKNOWN0)
CHECK_DEAD_PLAYERS_UNKNOWN10:
	PLD
	RTL

RESET_POST_BATTLE_STATS: ;$C2BC5C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDA #$0000
	STA $0E
	BRA RESET_POST_BATTLE_STATS_UNKNOWN2
RESET_POST_BATTLE_STATS_UNKNOWN0:
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ RESET_POST_BATTLE_STATS_UNKNOWN1
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,X
	AND #$00FF
	BNE RESET_POST_BATTLE_STATS_UNKNOWN1
	LDA .LOWORD(BATTLERS_TABLE)+battler::npc_id,X
	AND #$00FF
	BNE RESET_POST_BATTLE_STATS_UNKNOWN1
	LDA .LOWORD(BATTLERS_TABLE)+16,X
	AND #$00FF
	LDY #.SIZEOF(char_struct)
	JSL MULT168
	CLC
	ADC #.LOWORD(CHAR_STRUCT)
	TAX
	SEP #PROC_FLAGS::ACCUM8
	STZ a:char_struct::afflictions+6,X
	STZ a:char_struct::afflictions+4,X
	STZ a:char_struct::afflictions+3,X
	STZ a:char_struct::afflictions+2,X
RESET_POST_BATTLE_STATS_UNKNOWN1:
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	INC
	STA $0E
RESET_POST_BATTLE_STATS_UNKNOWN2:
	CMP #TOTAL_PARTY_COUNT
	BCC RESET_POST_BATTLE_STATS_UNKNOWN0
	PLD
	RTL

UNKNOWN_C2BCB9: ;$C2BCB9
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STX $02
	TAY
	LDA a:.LOWORD(RAM)+25,Y
	STA $0E
	STA $04
	LDA $02
	CMP $04
	BCC UNKNOWN_C2BCB9_UNKNOWN0
	BEQ UNKNOWN_C2BCB9_UNKNOWN0
	LDA #$0000
	BRA UNKNOWN_C2BCB9_UNKNOWN1
UNKNOWN_C2BCB9_UNKNOWN0:
	LDA $0E
	SEC
	SBC $02
UNKNOWN_C2BCB9_UNKNOWN1:
	TAX
	TYA
	JSR a:.LOWORD(SET_PP)
	PLD
	RTL

LOSE_HP_STATUS: ;$C2BCE6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	STX $02
	TAY
	LDA a:.LOWORD(RAM)+19,Y
	STA $0E
	STA $04
	LDA $02
	CMP $04
	BCC LOSE_HP_STATUS_UNKNOWN0
	BEQ LOSE_HP_STATUS_UNKNOWN0
	LDA #$0000
	BRA LOSE_HP_STATUS_UNKNOWN1
LOSE_HP_STATUS_UNKNOWN0:
	LDA $0E
	SEC
	SBC $02
LOSE_HP_STATUS_UNKNOWN1:
	TAX
	TYA
	JSR a:.LOWORD(SET_HP)
	PLD
	RTL

UNKNOWN_C2BD13: ;$C2BD13
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA #$0000
	STA $02
	LDX #$A21C
	STX $10
	LDY #$0008
	STY $0E
	BRA UNKNOWN_C2BD13_UNKNOWN2
UNKNOWN_C2BD13_UNKNOWN0:
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	CMP #$0001
	BNE UNKNOWN_C2BD13_UNKNOWN1
	LDA a:.LOWORD(RAM)+2,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	STA $04
	LDA $02
	CLC
	ADC $04
	STA $02
UNKNOWN_C2BD13_UNKNOWN1:
	LDX $10
	TXA
	CLC
	ADC #$004E
	TAX
	STX $10
	LDY $0E
	INY
	STY $0E
UNKNOWN_C2BD13_UNKNOWN2:
	CPY #$0020
	BCC UNKNOWN_C2BD13_UNKNOWN0
	LDA $02
	PLD
	RTS

CALL_FOR_HELP_COMMON: ;$C2BD5E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFD6
	TCD
	PLA
	STA $28
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN2
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+8,X
	AND #$00FF
	STA $26
	LOADPTR BTL_ENTRY_PTR_TABLE, $0A
	LDA .LOWORD(CURRENT_BATTLE_GROUP)
	ASL
	ASL
	ASL
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	BRA CALL_FOR_HELP_COMMON_UNKNOWN1
CALL_FOR_HELP_COMMON_UNKNOWN0:
	LDY #$0001
	LDA [$06],Y
	CMP $26
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN4
	LDA #$0003
	CLC
	ADC $06
	STA $06
CALL_FOR_HELP_COMMON_UNKNOWN1:
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	LDA [$0A]
	AND #$00FF
	CMP #$00FF
	BNE CALL_FOR_HELP_COMMON_UNKNOWN0
CALL_FOR_HELP_COMMON_UNKNOWN2:
	LDA $28
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN3
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7830
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN33)
CALL_FOR_HELP_COMMON_UNKNOWN3:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7824
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN33)
CALL_FOR_HELP_COMMON_UNKNOWN4:
	LDX #$9FAC
	LDA #$0000
	STA $24
	LDY #$0008
	BRA CALL_FOR_HELP_COMMON_UNKNOWN7
CALL_FOR_HELP_COMMON_UNKNOWN5:
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	CMP #$0001
	BNE CALL_FOR_HELP_COMMON_UNKNOWN6
	LDA a:.LOWORD(RAM)+29,X
	AND #$00FF
	CMP #$0001
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN6
	LDA a:.LOWORD(RAM)+76,X
	CMP $26
	BNE CALL_FOR_HELP_COMMON_UNKNOWN6
	LDA $24
	INC
	STA $24
CALL_FOR_HELP_COMMON_UNKNOWN6:
	TXA
	CLC
	ADC #$004E
	TAX
	INY
CALL_FOR_HELP_COMMON_UNKNOWN7:
	CPY #$0020
	BCC CALL_FOR_HELP_COMMON_UNKNOWN5
	LOADPTR ENEMY_CONFIGURATION_TABLE, $06
	LDA $26
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	TAX
	STX $22
	TXA
	CLC
	ADC #$005C
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	AND #$00FF
	TAY
	STY $20
	LDA $24
	STA $02
	TYA
	SEC
	SBC $02
	LDY #$00CD
	JSL MULT168
	LDY $20
	JSL DIVISION16S_DIVISOR_POSITIVE
	SEP #PROC_FLAGS::ACCUM8
	JSR a:.LOWORD(SUCCESS_255)
	.A16
	CMP #$0000
	BNE CALL_FOR_HELP_COMMON_UNKNOWN8
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN2)
CALL_FOR_HELP_COMMON_UNKNOWN8:
	LDX $22
	TXA
	CLC
	ADC #$001C
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	STA $20
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	ASL
	ASL
	ASL
	CLC
	ADC #$0010
	STA $1E
	LDX $22
	TXA
	CLC
	ADC #$005B
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	STA $1C
	JSR a:.LOWORD(UNKNOWN_C2BD13)
	TAX
	STX $1A
	LDA $20
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	STA $02
	LDX $1A
	TXA
	CLC
	ADC $02
	CMP #$0020
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN9
	BCC CALL_FOR_HELP_COMMON_UNKNOWN9
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN21)
CALL_FOR_HELP_COMMON_UNKNOWN9:
	LDA #$0080
	STA $1A
	STA $18
	STA $04
	LDY $04
	STY $16
	LDX #$A21C
	STX $14
	LDA #$0008
	STA $22
	BRA CALL_FOR_HELP_COMMON_UNKNOWN16
CALL_FOR_HELP_COMMON_UNKNOWN10:
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN15
	LDA a:.LOWORD(RAM)+2,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	ASL
	ASL
	ASL
	LSR
	STA $02
	STA $12
	LDX $14
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	CMP $1C
	BNE CALL_FOR_HELP_COMMON_UNKNOWN12
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	SEC
	SBC $02
	LDY $16
	STY $02
	CMP $02
	BCS CALL_FOR_HELP_COMMON_UNKNOWN11
	TAY
	STY $16
CALL_FOR_HELP_COMMON_UNKNOWN11:
	LDA $12
	STA $02
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	CLC
	ADC $02
	CMP $04
	BCC CALL_FOR_HELP_COMMON_UNKNOWN15
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN15
	STA $04
	BRA CALL_FOR_HELP_COMMON_UNKNOWN15
CALL_FOR_HELP_COMMON_UNKNOWN12:
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	SEC
	SBC $02
	CMP $18
	BCS CALL_FOR_HELP_COMMON_UNKNOWN13
	STA $18
CALL_FOR_HELP_COMMON_UNKNOWN13:
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	CLC
	ADC $02
	CMP $1A
	BCC CALL_FOR_HELP_COMMON_UNKNOWN15
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN15
	STA $1A
CALL_FOR_HELP_COMMON_UNKNOWN15:
	TXA
	CLC
	ADC #$004E
	TAX
	STX $14
	INC $22
CALL_FOR_HELP_COMMON_UNKNOWN16:
	LDA $22
	CMP #$0020
	BCS CALL_FOR_HELP_COMMON_UNKNOWN17
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN17
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN10)
CALL_FOR_HELP_COMMON_UNKNOWN17:
	LDA $04
	SEC
	SBC #$0080
	PHA
	LDY $16
	STY $02
	LDA #$0080
	SEC
	SBC $02
	PLX
	STX $02
	CMP $02
	BCS CALL_FOR_HELP_COMMON_UNKNOWN18
	CPY $1E
	BCC CALL_FOR_HELP_COMMON_UNKNOWN19
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN19
	LDA $1E
	LSR
	STA $02
	TYA
	SEC
	SBC $02
	TAY
	STY $24
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN25)
CALL_FOR_HELP_COMMON_UNKNOWN18:
	.A16
	LDA $04
	CLC
	ADC $1E
	CMP #$0100
	BCS CALL_FOR_HELP_COMMON_UNKNOWN19
	LDA $1E
	LSR
	STA $02
	LDA $04
	CLC
	ADC $02
	TAY
	STY $24
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN25)
CALL_FOR_HELP_COMMON_UNKNOWN19:
	LDA #$0001
	SEC
	SBC $1C
	STA $1C
	LDA $1A
	SEC
	SBC #$0080
	STA $02
	LDA #$0080
	SEC
	SBC $18
	CMP $02
	BCS CALL_FOR_HELP_COMMON_UNKNOWN20
	LDA $18
	CMP $1E
	BCC CALL_FOR_HELP_COMMON_UNKNOWN21
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN21
	LDA $1E
	LSR
	STA $02
	LDA $18
	SEC
	SBC $02
	TAY
	STY $24
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN25)
CALL_FOR_HELP_COMMON_UNKNOWN20:
	LDA $1A
	CLC
	ADC $1E
	CMP #$0100
	BCS CALL_FOR_HELP_COMMON_UNKNOWN21
	LDA $1E
	LSR
	CLC
	ADC $1A
	TAY
	STY $24
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN25)
CALL_FOR_HELP_COMMON_UNKNOWN21:
	LDX #$A21C
	STX $12
	LDA #$0008
	STA $02
	BRA CALL_FOR_HELP_COMMON_UNKNOWN24
CALL_FOR_HELP_COMMON_UNKNOWN22:
	TXA
	CLC
	ADC #$000C
	TAY
	STY $14
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	CMP #$0001
	BNE CALL_FOR_HELP_COMMON_UNKNOWN23
	LDA a:.LOWORD(RAM)+29,X
	AND #$00FF
	CMP #$0001
	BNE CALL_FOR_HELP_COMMON_UNKNOWN23
	LDA $20
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	STA $04
	LDX $12
	LDA a:.LOWORD(RAM)+2,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	PHA
	LDA $04
	PLY
	STY $04
	CMP $04
	BNE CALL_FOR_HELP_COMMON_UNKNOWN23
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	LDY $14
	STA a:.LOWORD(RAM),Y
	LDX $12
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	TAY
	STY $24
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	STA $1C
	BRA CALL_FOR_HELP_COMMON_UNKNOWN25
CALL_FOR_HELP_COMMON_UNKNOWN23:
	LDX $12
	TXA
	CLC
	ADC #$004E
	TAX
	STX $12
	INC $02
CALL_FOR_HELP_COMMON_UNKNOWN24:
	LDA $02
	CMP #$0020
	BCC CALL_FOR_HELP_COMMON_UNKNOWN22
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN2)
CALL_FOR_HELP_COMMON_UNKNOWN25:
	JSR a:.LOWORD(UNKNOWN_C2BD13)
	TAX
	STX $22
	LDA $20
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	STA $02
	LDX $22
	TXA
	CLC
	ADC $02
	CMP #$0020
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN26
	BCC CALL_FOR_HELP_COMMON_UNKNOWN26
	JMP a:.LOWORD(CALL_FOR_HELP_COMMON_UNKNOWN2)
CALL_FOR_HELP_COMMON_UNKNOWN26:
	LDA #$A21C
	STA $22
	LDX #$0008
	STX $20
	BRA CALL_FOR_HELP_COMMON_UNKNOWN28
CALL_FOR_HELP_COMMON_UNKNOWN27:
	TAX
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN29
	LDA $22
	CLC
	ADC #$004E
	STA $22
	LDX $20
	INX
	STX $20
CALL_FOR_HELP_COMMON_UNKNOWN28:
	CPX #$0020
	BCC CALL_FOR_HELP_COMMON_UNKNOWN27
CALL_FOR_HELP_COMMON_UNKNOWN29:
	LDA $22
	STA .LOWORD(CURRENT_TARGET)
	LDX .LOWORD(CURRENT_TARGET)
	LDA $26
	JSL BATTLE_INIT_ENEMY_STATS
	LDY $24
	TYA
	SEP #PROC_FLAGS::ACCUM8
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+68,X
	REP #PROC_FLAGS::ACCUM8
	LDA $1C
	SEP #PROC_FLAGS::ACCUM8
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+16,X
	LDX .LOWORD(CURRENT_TARGET)
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN30
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0080
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+69,X
	BRA CALL_FOR_HELP_COMMON_UNKNOWN31
CALL_FOR_HELP_COMMON_UNKNOWN30:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0090
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+69,X
CALL_FOR_HELP_COMMON_UNKNOWN31:
	REP #PROC_FLAGS::ACCUM8
	LDA $26
	JSR a:.LOWORD(UNKNOWN_C2F09F)
	SEP #PROC_FLAGS::ACCUM8
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+67,X
	LDA #$0001
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+13,X
	JSL FIX_TARGET_NAME
	.A16
	LDA $28
	BEQ CALL_FOR_HELP_COMMON_UNKNOWN32
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF7810
	BRA CALL_FOR_HELP_COMMON_UNKNOWN33
CALL_FOR_HELP_COMMON_UNKNOWN32:
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_EF77FD
CALL_FOR_HELP_COMMON_UNKNOWN33:
	PLD
	RTS

BTLACT_SOW_SEEDS: ;$C2C13C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0001
	JSR a:.LOWORD(CALL_FOR_HELP_COMMON)
	RTL

BTLACT_CALL_FOR_HELP: ;$C2C145
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0000
	JSR a:.LOWORD(CALL_FOR_HELP_COMMON)
	RTL

BTLACT_RAINBOW_OF_COLOURS: ;$C2C14E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	STA $02
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+69,X
	AND #$00FF
	TAY
	STY $10
	LDX .LOWORD(CURRENT_ATTACKER)
	STX $0E
	LDX .LOWORD(CURRENT_ATTACKER)
	LDA a:.LOWORD(RAM)+8,X
	AND #$00FF
	LDX $0E
	JSL BATTLE_INIT_ENEMY_STATS
	LDA $02
	SEP #PROC_FLAGS::ACCUM8
	LDX .LOWORD(CURRENT_ATTACKER)
	STA a:.LOWORD(RAM)+68,X
	LDY $10
	REP #PROC_FLAGS::ACCUM8
	TYA
	SEP #PROC_FLAGS::ACCUM8
	LDX .LOWORD(CURRENT_ATTACKER)
	STA a:.LOWORD(RAM)+69,X
	LDX .LOWORD(CURRENT_ATTACKER)
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	JSR a:.LOWORD(UNKNOWN_C2F09F)
	SEP #PROC_FLAGS::ACCUM8
	LDX .LOWORD(CURRENT_ATTACKER)
	STA a:.LOWORD(RAM)+67,X
	LDA #$0001
	LDX .LOWORD(CURRENT_ATTACKER)
	STA a:.LOWORD(RAM)+13,X
	REP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA .LOWORD(UNKNOWN_7EAA92)
	PLD
	RTL

BTLACT_FLY_HONEY: ;$C2C1BD
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDX #.LOWORD(BATTLERS_TABLE) + .SIZEOF(battler) * 8
	LDY #$0008
	BRA @STARTLOOP
@NEXTBATTLER:
	LDA a:.LOWORD(RAM)+battler::consciousness,X
	AND #$00FF
	BEQ @BATTLERNOTBELCH
	LDA a:.LOWORD(RAM)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BNE @BATTLERNOTBELCH
	LDA a:.LOWORD(RAM)+battler::id,X
	CMP #ENEMY::MASTER_BELCH_3
	BEQ @BATTLERISBELCH
	CMP #ENEMY::MASTER_BELCH_1
	BNE @BATTLERNOTBELCH
@BATTLERISBELCH:
	LDA #ENEMY::MASTER_BELCH_2
	STA a:.LOWORD(RAM)+battler::id,X
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C8F8C0
	BRA @RETURN
@BATTLERNOTBELCH:
	TXA
	CLC
	ADC #.SIZEOF(battler)
	TAX
	INY
@STARTLOOP:
	CPY #BATTLER_COUNT
	BCC @NEXTBATTLER
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C8F8FD
@RETURN:
	PLD
	RTL

UNKNOWN_C2C21F: ;$C2C21F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEA
	TCD
	PLA
	STX $14
	STA $12
	STZ $10
	LDA .LOWORD(BATTLE_MODE_FLAG)
	BEQ @UNKNOWN0
	LDA $12
	CMP #$01E3
	BNE @UNKNOWN1
@UNKNOWN0:
	LDA #$0001
	STA $10
@UNKNOWN1:
	LDA $10
	BNE @UNKNOWN4
	LDY #$001E
	LDX #$0001
	LDA #$0006
	JSL UNKNOWN_C2E8C4
	BRA @UNKNOWN3
@UNKNOWN2:
	JSL UNKNOWN_C12DD5
@UNKNOWN3:
	JSL UNKNOWN_C2E9C8
	CMP #$0000
	BNE @UNKNOWN2
@UNKNOWN4:
	LDA $12
	STA .LOWORD(CURRENT_BATTLE_GROUP)
	LOADPTR BTL_ENTRY_BG_TABLE, $06
	LDA .LOWORD(CURRENT_BATTLE_GROUP)
	ASL
	ASL
	STA $0E
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	STA $04
	LDA $0E
	INC
	INC
	CLC
	ADC $06
	STA $06
	LDA [$06]
	STA $02
	LDA .LOWORD(CURRENT_BATTLE_GROUP)
	ASL
	ASL
	ASL
	CLC
	ADC #battle_entry_ptr_entry::letterbox_style
	TAX
	LDA f:BTL_ENTRY_PTR_TABLE,X
	AND #$00FF
	TAX
	STX $0E
	JSL UNKNOWN_C08726
	JSL LOAD_ENEMY_BATTLE_SPRITES
	JSL LOAD_WINDOW_GFX
	LDA #$0001
	JSL UNKNOWN_C44963
	LDX $0E
	TXY
	LDX $02
	LDA $04
	JSL LOAD_BATTLE_BG
	JSL UNKNOWN_C2EEE7
	LDA #$0018
	JSL UNKNOWN_C0856B
	JSL UNKNOWN_C2F8F9
	LDA #$0001
	STA .LOWORD(BATTLE_MODE_FLAG)
	LDA $14
	BEQ @UNKNOWN5
	LDA $14
	JSL CHANGE_MUSIC
@UNKNOWN5:
	JSL UNKNOWN_C08744
	LDA $10
	BEQ @UNKNOWN6
	LDX #$0004
	LDA #$0001
	JSL UNKNOWN_C0886C
	JSR a:.LOWORD(UNKNOWN_C269DE)
	BRA @UNKNOWN9
@UNKNOWN6:
	LDX #$0001
	LDA #$000F
	JSL UNKNOWN_C0886C
	LDA $12
	CMP #$01E3
	BEQ @UNKNOWN9
	LDY #$0005
	LDX #$0000
	LDA #$0006
	JSL UNKNOWN_C2E8C4
	BRA @UNKNOWN8
@UNKNOWN7:
	JSL UNKNOWN_C12DD5
@UNKNOWN8:
	JSL UNKNOWN_C2E9C8
	CMP #$0000
	BNE @UNKNOWN7
@UNKNOWN9:
	PLD
	RTS

UNKNOWN_C2C32C: ;$C2C32C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEC
	TCD
	PLA
	STA $12
	LDA #$A260
	STA $02
	LDX $02
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	STA $10
	LDY #$A261
	STY $0E
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	STA $04
	LDX #$A21C
	LDA $12
	JSL BATTLE_INIT_ENEMY_STATS
	LDA $10
	SEP #PROC_FLAGS::ACCUM8
	LDX $02
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	SEP #PROC_FLAGS::ACCUM8
	LDY $0E
	STA a:.LOWORD(RAM),Y
	LDA #$0001
	STA .LOWORD(BATTLERS_TABLE)+637
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTS

UNKNOWN_C2C37A: ;$C2C37A
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEC
	TCD
	PLA
	STX $02
	TAY
	STY $12
	LDA $22
	STA $06
	LDA $24
	STA $08
	LDX #$0004
	LDA #$0001
	JSL UNKNOWN_C0887A
	JSR a:.LOWORD(UNKNOWN_C269DE)
	STZ .LOWORD(BATTLE_MODE_FLAG)
	STZ .LOWORD(UNKNOWN_7E5DD4)
	JSL UNKNOWN_C1DD5F
	LDA $06
	STA $0E
	LDA $08
	STA $10
	JSL DISPLAY_IN_BATTLE_TEXT
	LDX #$0002
	LDA #$0001
	JSL UNKNOWN_C0887A
	JSR a:.LOWORD(UNKNOWN_C269DE)
	LDX $02
	LDY $12
	TYA
	JSR a:.LOWORD(UNKNOWN_C2C21F)
	LDA #$0001
	STA .LOWORD(BATTLE_MODE_FLAG)
	JSL REDIRECT_SHOW_HPPP_WINDOWS
	LDA #$000E
	JSL REDIRECT_CREATE_WINDOW
	LDA #1*SECOND
	JSR a:.LOWORD(WAIT)
	PLD
	RTS

GIYGAS_HURT_PRAYER: ;$C2C3E2
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAX
	STX $0E
	LDA #1*SECOND
	JSR a:.LOWORD(WAIT)
	LDA #$A21C
	STA .LOWORD(CURRENT_TARGET)
	JSL FIX_TARGET_NAME
	LDA #1*SECOND
	STA .LOWORD(GREEN_FLASH_DURATION)
	LDA #$0001
	STA .LOWORD(UNKNOWN_7EAA8E)
	LDX $0E
	TXA
	JSR a:.LOWORD(TWENTY_FIVE_PERCENT_VARIANCE)
	LDX #$00FF
	JSR a:.LOWORD(CALC_RESIST_DAMAGE)
	LDA #1*SECOND
	JSR a:.LOWORD(WAIT)
	PLD
	RTS

UNKNOWN_C2C41F: ;$C2C41F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEC
	TCD
	PLA
	TAY
	STY $12
	LDA $22
	STA $06
	LDA $24
	STA $08
	LDX #$0001
	TXA
	JSL UNKNOWN_C0887A
	LDA #$0002
	JSL UNKNOWN_C0AC0C
	JSR a:.LOWORD(UNKNOWN_C269DE)
	STZ .LOWORD(BATTLE_MODE_FLAG)
	JSL UNKNOWN_C1DD5F
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0004
	STA a:.LOWORD(TM_MIRROR)
	REP #PROC_FLAGS::ACCUM8
	LDA #MUSIC::GIYGAS_WEAKENED
	JSL CHANGE_MUSIC
	LDX #$0001
	TXA
	JSL UNKNOWN_C0886C
	JSR a:.LOWORD(UNKNOWN_C269DE)
	LDA #2*SIXTHS_OF_A_SECOND
	JSR a:.LOWORD(WAIT)
	LDA $06
	STA $0E
	LDA $08
	STA $10
	JSL DISPLAY_IN_BATTLE_TEXT
	LDA #$0001
	STA .LOWORD(BATTLE_MODE_FLAG)
	LDA #2*SIXTHS_OF_A_SECOND
	JSR a:.LOWORD(WAIT)
	LDA #$0002
	JSL UNKNOWN_C0AC0C
	LDX #$0001
	TXA
	JSL UNKNOWN_C0887A
	JSR a:.LOWORD(UNKNOWN_C269DE)
	JSL REDIRECT_SHOW_HPPP_WINDOWS
	LDA #$000E
	JSL REDIRECT_CREATE_WINDOW
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0017
	STA a:.LOWORD(TM_MIRROR)
	LDY $12
	REP #PROC_FLAGS::ACCUM8
	TYA
	JSL CHANGE_MUSIC
	LDX #$0001
	TXA
	JSL UNKNOWN_C0886C
	JSR a:.LOWORD(UNKNOWN_C269DE)
	PLD
	RTS

.INCLUDE "battle/actions/pokey_speech_1.asm"

.INCLUDE "battle/actions/null12.asm"

.INCLUDE "battle/actions/pokey_speech_2.asm"

BTLACT_GIYGAS_PRAYER_1: ;$C2C572
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LOADPTR TEXT_BLOCK_C7BC96, $0E
	LDX #MUSIC::GIYGAS_PHASE3
	LDA #$01DE
	JSR a:.LOWORD(UNKNOWN_C2C37A)
	LDA #2*SECONDS
	JSR a:.LOWORD(WAIT)
	LDA #SFX::PSI_STARSTORM
	JSL PLAY_SOUND
	LDA #1*HALF_OF_A_SECOND
	JSR a:.LOWORD(WAIT)
	LDA #1*SECOND
	STA .LOWORD(VERTICAL_SHAKE_DURATION)
	LDA #1*FIFTH_OF_A_SECOND
	STA .LOWORD(VERTICAL_SHAKE_HOLD_DURATION)
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C9F86A
	LDA #GIYGAS_PHASES::PRAYER_1_USED
	STA .LOWORD(GIYGAS_PHASE)
	LDA #$00E5
	JSR a:.LOWORD(UNKNOWN_C2C32C)
	LDX #MUSIC::NONE
	LDA #$01DF
	JSR a:.LOWORD(UNKNOWN_C2C21F)
	PLD
	RTL

BTLACT_GIYGAS_PRAYER_2: ;$C2C5D1
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LOADPTR TEXT_BLOCK_C7BA2C, $0E
	LDX #MUSIC::GIYGAS_PHASE3
	LDA #$01DF
	JSR a:.LOWORD(UNKNOWN_C2C37A)
	LDA #GIYGAS_PRAYER_DAMAGE_1
	JSR a:.LOWORD(GIYGAS_HURT_PRAYER)
	LDA #GIYGAS_PHASES::PRAYER_2_USED
	STA .LOWORD(GIYGAS_PHASE)
	PLD
	RTL

BTLACT_GIYGAS_PRAYER_3: ;$C2C5FA
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LOADPTR TEXT_BLOCK_C7BAC7, $0E
	LDX #MUSIC::GIYGAS_PHASE3
	LDA #$01DF
	JSR a:.LOWORD(UNKNOWN_C2C37A)
	LDA #GIYGAS_PRAYER_DAMAGE_2
	JSR a:.LOWORD(GIYGAS_HURT_PRAYER)
	LDA #GIYGAS_PHASES::PRAYER_3_USED
	STA .LOWORD(GIYGAS_PHASE)
	PLD
	RTL

BTLACT_GIYGAS_PRAYER_4: ;$C2C623
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LOADPTR TEXT_BLOCK_C7BB38, $0E
	LDX #MUSIC::GIYGAS_PHASE3
	LDA #$01DF
	JSR a:.LOWORD(UNKNOWN_C2C37A)
	LDA #GIYGAS_PRAYER_DAMAGE_3
	JSR a:.LOWORD(GIYGAS_HURT_PRAYER)
	LDA #GIYGAS_PHASES::PRAYER_4_USED
	STA .LOWORD(GIYGAS_PHASE)
	PLD
	RTL

BTLACT_GIYGAS_PRAYER_5: ;$C2C64C
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LOADPTR TEXT_BLOCK_C7BBF3, $0E
	LDX #MUSIC::GIYGAS_PHASE3
	LDA #$01DF
	JSR a:.LOWORD(UNKNOWN_C2C37A)
	LDA #GIYGAS_PRAYER_DAMAGE_4
	JSR a:.LOWORD(GIYGAS_HURT_PRAYER)
	LDA #GIYGAS_PHASES::PRAYER_5_USED
	STA .LOWORD(GIYGAS_PHASE)
	PLD
	RTL

BTLACT_GIYGAS_PRAYER_6: ;$C2C675
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LOADPTR TEXT_BLOCK_C7BC56, $0E
	LDX #MUSIC::GIYGAS_PHASE3
	LDA #$01DF
	JSR a:.LOWORD(UNKNOWN_C2C37A)
	LDA #GIYGAS_PRAYER_DAMAGE_5
	JSR a:.LOWORD(GIYGAS_HURT_PRAYER)
	LDA #GIYGAS_PHASES::PRAYER_6_USED
	STA .LOWORD(GIYGAS_PHASE)
	PLD
	RTL

BTLACT_GIYGAS_PRAYER_7: ;$C2C69E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LOADPTR TEXT_BLOCK_C7B9A1, $0E
	LDX #MUSIC::GIYGAS_PHASE3
	LDA #$01DF
	JSR a:.LOWORD(UNKNOWN_C2C37A)
	LDA #GIYGAS_PRAYER_DAMAGE_6
	JSR a:.LOWORD(GIYGAS_HURT_PRAYER)
	LDA #GIYGAS_PHASES::PRAYER_7_USED
	STA .LOWORD(GIYGAS_PHASE)
	LDX #MUSIC::GIYGAS_WEAKENED2
	LDA #$01E0
	JSR a:.LOWORD(UNKNOWN_C2C21F)
	PLD
	RTL

BTLACT_GIYGAS_PRAYER_8: ;$C2C6D0
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LOADPTR TEXT_BLOCK_C9F6DE, $0E
	LDA #$004A
	JSR a:.LOWORD(UNKNOWN_C2C41F)
	LDA #GIYGAS_PHASES::PRAYER_8_USED
	STA .LOWORD(GIYGAS_PHASE)
	PLD
	RTL

BTLACT_GIYGAS_PRAYER_9: ;$C2C6F0
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE6
	TCD
	JSL UNKNOWN_C20F9A
	LOADPTR TEXT_BLOCK_C9F70C, $0E
	LDA #$004A
	JSR a:.LOWORD(UNKNOWN_C2C41F)
	LDA #GIYGAS_PRAYER_DAMAGE_7
	JSR a:.LOWORD(GIYGAS_HURT_PRAYER)
	LOADPTR TEXT_BLOCK_C9F7BB, $0E
	LDA #$004A
	JSR a:.LOWORD(UNKNOWN_C2C41F)
	LDA #GIYGAS_PRAYER_DAMAGE_8
	JSR a:.LOWORD(GIYGAS_HURT_PRAYER)
	LOADPTR TEXT_BLOCK_C9F804, $0E
	LDA #$004A
	JSR a:.LOWORD(UNKNOWN_C2C41F)
	LDA #GIYGAS_PRAYER_DAMAGE_9
	JSR a:.LOWORD(GIYGAS_HURT_PRAYER)
	LOADPTR TEXT_BLOCK_C9F84D, $0E
	LDA #$004A
	JSR a:.LOWORD(UNKNOWN_C2C41F)
	LDA #GIYGAS_PRAYER_DAMAGE_10
	JSR a:.LOWORD(GIYGAS_HURT_PRAYER)
	JSL REDIRECT_CLOSE_FOCUS_WINDOW
	STZ .LOWORD(BATTLE_MODE_FLAG)
	JSL REDIRECT_HIDE_HPPP_WINDOWS
	LDA #$0001
	STA .LOWORD(BATTLE_MODE_FLAG)
	JSL UNKNOWN_C12DD5
	LDA #GIYGAS_PHASES::DEFEATED
	STA .LOWORD(GIYGAS_PHASE)
	LDA #MUSIC::GIYGAS_DEATH
	JSL CHANGE_MUSIC
	LDY #$0000
	STY $18
@UNKNOWN0:
	LOADPTR FINAL_GIYGAS_PRAYER_NOISE_TABLE, $06
	LDY $18
	TYA
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	AND #$00FF
	TAX
	INY
	STY $18
	TXA
	JSL PLAY_SOUND
	LDY $18
	TYA
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	TAX
	BEQ @UNKNOWN1
	INY
	STY $18
	TXA
	JSR a:.LOWORD(WAIT)
	BRA @UNKNOWN0
@UNKNOWN1:
	LDA #MUSIC::GIYGAS_DEATH2
	JSL CHANGE_MUSIC
	STZ .LOWORD(GIYGAS_PHASE)
	LDA #8*SECONDS
	JSR a:.LOWORD(WAIT)
	LDX #$A276
	STX $16
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA a:.LOWORD(RAM),X
	JSL UNKNOWN_C2F8F9
	.A16
	DISPLAY_BATTLE_TEXT_PTR TEXT_BLOCK_C8FF31
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	LDX $16
	STA a:.LOWORD(RAM),X
	JSL UNKNOWN_C2F8F9
	.A16
	LDA #1*SECOND
	JSR a:.LOWORD(WAIT)
	.A16
	LDY #$0002
	STY $14
	TYA
	STA $04
	LDA #$002D
	STA $02
	LDA #1*SECOND
	STA .LOWORD(VERTICAL_SHAKE_DURATION)
	LDX #$0000
	STX $12
	BRA @UNKNOWN8
@UNKNOWN2:
	.A16
	LDA #$0000
	STA $18
	BRA @UNKNOWN5
@UNKNOWN3:
	JSL UNKNOWN_C12DD5
	.A16
	LDA $04
	BEQ @UNKNOWN4
	LDA $02
	DEC
	STA $02
	BNE @UNKNOWN4
	LDA $04
	DEC
	STA $04
	LDA #$002D
	STA $02
	LDA #1*SECOND
	STA .LOWORD(VERTICAL_SHAKE_DURATION)
@UNKNOWN4:
	LDA $18
	INC
	STA $18
@UNKNOWN5:
	LDX $12
	TXA
	ASL
	TAX
	LDA $18
	CMP f:GIYGAS_DEATH_STATIC_TRANSITION_DELAYS,X
	BCC @UNKNOWN3
	JSL UNKNOWN_C2DAE3
	LDY $14
	TYA
	JSL UNKNOWN_C0AC3A
	LDY $14
	CPY #$0002
	BNE @UNKNOWN6
	LDY #$0001
	STY $14
	BRA @UNKNOWN7
@UNKNOWN6:
	LDY #$0002
	STY $14
@UNKNOWN7:
	LDX $12
	INX
	STX $12
@UNKNOWN8:
	TXA
	ASL
	TAX
	LDA f:GIYGAS_DEATH_STATIC_TRANSITION_DELAYS,X
	BNE @UNKNOWN2
	LDA #MUSIC::GIYGAS_STATIC
	JSL CHANGE_MUSIC
	.A16
	LDA #10*SECONDS
	JSR a:.LOWORD(WAIT)
	LDA #SFX::PSI_THUNDER_DAMAGE
	JSL PLAY_SOUND
	JSL STOP_MUSIC
	LDY #$0005
	LDX #$0000
	TYA
	JSL UNKNOWN_C2E8C4
	BRA @UNKNOWN10
@UNKNOWN9:
	JSL UNKNOWN_C12DD5
@UNKNOWN10:
	JSL UNKNOWN_C2E9C8
	CMP #$0000
	BNE @UNKNOWN9
	JSL STOP_MUSIC
	LDX #MUSIC::NONE
	LDA #$01E3
	JSR a:.LOWORD(UNKNOWN_C2C21F)
	LDA #8*SECONDS
	JSR a:.LOWORD(WAIT)
	LDA #$0003
	STA .LOWORD(UNKNOWN_7EAA0E)
	PLD
	RTL

LOAD_ENEMY_BATTLE_SPRITES: ;$C2C8C8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA #$0009
	JSL UNKNOWN_C08D79
	LDY #$0000
	LDX #$5800
	TYA
	JSL SET_BG1_VRAM_LOCATION
	LDY #$1000
	LDX #$5C00
	LDA #$0000
	JSL SET_BG2_VRAM_LOCATION
	LDY #$6000
	LDX #$7C00
	LDA #$0000
	JSL SET_BG3_VRAM_LOCATION
	LDA #$0061
	JSL SET_OAM_SIZE
	LOADPTR UNKNOWN_7F8000, $06
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA [$06]
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$7C00
	LDX #$0800
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0003
	JSL UNKNOWN_C08616
	PLD
	RTL

UNKNOWN_C2C92D: ;$C2C92D
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE1
	TCD
	PLA
	STX $1D
	STA $1B
	LDA ($1B)
	AND #$00FF
	STA $19
	LDY #$0002
	LDA ($1B),Y
	AND #$00FF
	BEQ UNKNOWN_C2C92D_UNKNOWN0
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN34)
UNKNOWN_C2C92D_UNKNOWN0:
	LDA $1B
	CLC
	ADC #$000B
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $18
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BNE UNKNOWN_C2C92D_UNKNOWN1
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN23)
UNKNOWN_C2C92D_UNKNOWN1:
	SEP #PROC_FLAGS::ACCUM8
	LDA $18
	DEC
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BEQ UNKNOWN_C2C92D_UNKNOWN2
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN23)
UNKNOWN_C2C92D_UNKNOWN2:
	LDY #$000A
	SEP #PROC_FLAGS::ACCUM8
	LDA ($1B),Y
	STA a:.LOWORD(RAM),X
	LDY #$0003
	REP #PROC_FLAGS::ACCUM8
	LDA ($1B),Y
	AND #$00FF
	CMP #$0002
	BEQ UNKNOWN_C2C92D_UNKNOWN5
	CMP #$0001
	BNE UNKNOWN_C2C92D_UNKNOWN3
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN10)
UNKNOWN_C2C92D_UNKNOWN3:
	CMP #$0003
	BNE UNKNOWN_C2C92D_UNKNOWN4
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN16)
UNKNOWN_C2C92D_UNKNOWN4:
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN22)
UNKNOWN_C2C92D_UNKNOWN5:
	LDY #$0007
	SEP #PROC_FLAGS::ACCUM8
	LDA ($1B),Y
	LDY #$0006
	SEC
	SBC ($1B),Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	INC $02
	LDX #$0000
	STX $16
	BRA UNKNOWN_C2C92D_UNKNOWN9
UNKNOWN_C2C92D_UNKNOWN6:
	LDY #$0009
	LDA ($1B),Y
	AND #$00FF
	STA $04
	TXA
	CMP $04
	BCS UNKNOWN_C2C92D_UNKNOWN7
	TXA
	CLC
	ADC $02
	SEC
	SBC $04
	STA $14
	BRA UNKNOWN_C2C92D_UNKNOWN8
UNKNOWN_C2C92D_UNKNOWN7:
	TXA
	SEC
	SBC $04
	STA $14
UNKNOWN_C2C92D_UNKNOWN8:
	LDY #$0006
	LDA ($1B),Y
	AND #$00FF
	TAY
	STY $12
	STX $04
	TYA
	CLC
	ADC $04
	ASL
	LDY #$004C
	CLC
	ADC ($1B),Y
	PHA
	LDA $14
	STA $04
	LDY $12
	TYA
	CLC
	ADC $04
	ASL
	CLC
	ADC $1B
	TAX
	LDA a:.LOWORD(RAM)+12,X
	PLX
	STA a:.LOWORD(RAM),X
	LDX $16
	INX
	STX $16
UNKNOWN_C2C92D_UNKNOWN9:
	TXA
	CMP $02
	BCC UNKNOWN_C2C92D_UNKNOWN6
	LDA $1B
	CLC
	ADC #$0009
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	INC
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP $02
	BCC UNKNOWN_C2C92D_UNKNOWN10
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
UNKNOWN_C2C92D_UNKNOWN10:
	LDY #$0005
	SEP #PROC_FLAGS::ACCUM8
	LDA ($1B),Y
	LDY #$0004
	SEC
	SBC ($1B),Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	INC $02
	LDX #$0000
	STX $16
	BRA UNKNOWN_C2C92D_UNKNOWN14
UNKNOWN_C2C92D_UNKNOWN11:
	LDY #$0008
	LDA ($1B),Y
	AND #$00FF
	STA $04
	TXA
	CMP $04
	BCS UNKNOWN_C2C92D_UNKNOWN12
	TXA
	CLC
	ADC $02
	SEC
	SBC $04
	STA $14
	BRA UNKNOWN_C2C92D_UNKNOWN13
UNKNOWN_C2C92D_UNKNOWN12:
	TXA
	SEC
	SBC $04
	STA $14
UNKNOWN_C2C92D_UNKNOWN13:
	LDY #$0004
	LDA ($1B),Y
	AND #$00FF
	TAY
	STY $12
	STX $04
	TYA
	CLC
	ADC $04
	ASL
	LDY #$004C
	CLC
	ADC ($1B),Y
	PHA
	LDA $14
	STA $04
	LDY $12
	TYA
	CLC
	ADC $04
	ASL
	CLC
	ADC $1B
	TAX
	LDA a:.LOWORD(RAM)+12,X
	PLX
	STA a:.LOWORD(RAM),X
	LDX $16
	INX
	STX $16
UNKNOWN_C2C92D_UNKNOWN14:
	TXA
	CMP $02
	BCC UNKNOWN_C2C92D_UNKNOWN11
	LDA $1B
	CLC
	ADC #$0008
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	INC
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP $02
	BCS UNKNOWN_C2C92D_UNKNOWN15
	BEQ UNKNOWN_C2C92D_UNKNOWN15
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN22)
UNKNOWN_C2C92D_UNKNOWN15:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN22)
UNKNOWN_C2C92D_UNKNOWN16:
	LDY #$0005
	SEP #PROC_FLAGS::ACCUM8
	LDA ($1B),Y
	LDY #$0004
	SEC
	SBC ($1B),Y
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	INC
	STA $10
	LDY #$0000
	STY $0E
	BRA UNKNOWN_C2C92D_UNKNOWN20
UNKNOWN_C2C92D_UNKNOWN17:
	LDY #$0008
	LDA ($1B),Y
	AND #$00FF
	STA $04
	LDY $0E
	TYA
	CLC
	ADC $04
	STA $02
	STA $14
	LDA $10
	ASL
	STA $04
	LDA $02
	CMP $04
	BCC UNKNOWN_C2C92D_UNKNOWN18
	LDA $02
	SEC
	SBC $04
	STA $02
	STA $14
	BRA UNKNOWN_C2C92D_UNKNOWN19
UNKNOWN_C2C92D_UNKNOWN18:
	LDA $10
	PHA
	LDA $02
	PLY
	STY $02
	CMP $02
	BCC UNKNOWN_C2C92D_UNKNOWN19
	LDA $14
	STA $02
	LDA $04
	DEC
	SEC
	SBC $02
	STA $02
	STA $14
UNKNOWN_C2C92D_UNKNOWN19:
	LDY #$0004
	LDA ($1B),Y
	AND #$00FF
	TAX
	LDY $0E
	STY $02
	TXA
	CLC
	ADC $02
	ASL
	LDY #$004C
	CLC
	ADC ($1B),Y
	PHA
	LDA $14
	STA $02
	TXA
	CLC
	ADC $02
	ASL
	CLC
	ADC $1B
	TAX
	LDA a:.LOWORD(RAM)+12,X
	PLX
	STA a:.LOWORD(RAM),X
	LDY $0E
	INY
	STY $0E
UNKNOWN_C2C92D_UNKNOWN20:
	LDA $10
	STA $02
	TYA
	CMP $02
	BCS UNKNOWN_C2C92D_UNKNOWN21
	BEQ UNKNOWN_C2C92D_UNKNOWN21
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN17)
UNKNOWN_C2C92D_UNKNOWN21:
	LDA $1B
	CLC
	ADC #$0008
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $00
	INC $00
	LDA $00
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	LDA $10
	ASL
	STA $02
	LDA $00
	AND #$00FF
	CMP $02
	BCC UNKNOWN_C2C92D_UNKNOWN22
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
UNKNOWN_C2C92D_UNKNOWN22:
	REP #PROC_FLAGS::ACCUM8
	LDA #$0018
	JSL UNKNOWN_C0856B
UNKNOWN_C2C92D_UNKNOWN23:
	LDA .LOWORD(GIYGAS_PHASE)
	CMP #GIYGAS_PHASES::DEFEATED
	BNE UNKNOWN_C2C92D_UNKNOWN24
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN43)
UNKNOWN_C2C92D_UNKNOWN24:
	LDA $1B
	CLC
	ADC #$0053
	TAX
	LDA a:.LOWORD(RAM),X
	BNE UNKNOWN_C2C92D_UNKNOWN25
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN29)
UNKNOWN_C2C92D_UNKNOWN25:
	DEC
	STA a:.LOWORD(RAM),X
	BEQ UNKNOWN_C2C92D_UNKNOWN26
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN29)
UNKNOWN_C2C92D_UNKNOWN26:
	LDA $1B
	CLC
	ADC #$0052
	TAX
	STX $0E
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	INC
	AND #$0003
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CLC
	ADC $1B
	TAX
	LDA a:.LOWORD(RAM)+78,X
	AND #$00FF
	STA $10
	BNE UNKNOWN_C2C92D_UNKNOWN27
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	LDX $0E
	STA a:.LOWORD(RAM),X
	LDY #$004E
	REP #PROC_FLAGS::ACCUM8
	LDA ($1B),Y
	AND #$00FF
	STA $10
UNKNOWN_C2C92D_UNKNOWN27:
	CMP #$0000
	BNE UNKNOWN_C2C92D_UNKNOWN28
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN29)
UNKNOWN_C2C92D_UNKNOWN28:
	LOADPTR BG_SCROLLING_TABLE, $06
	LDA $10
	STA $04
	ASL
	ASL
	ADC $04
	ASL
	STA $12
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	LDY #$0053
	STA ($1B),Y
	LDA $12
	INC
	INC
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	LDY #$0059
	STA ($1B),Y
	LDA $12
	INC
	INC
	INC
	INC
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	LDY #$005B
	STA ($1B),Y
	LDA $12
	CLC
	ADC #$0006
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	LDY #$005D
	STA ($1B),Y
	LDA $12
	CLC
	ADC #$0008
	CLC
	ADC $06
	STA $06
	LDA [$06]
	LDY #$005F
	STA ($1B),Y
UNKNOWN_C2C92D_UNKNOWN29:
	LDA $1B
	CLC
	ADC #$0055
	STA $02
	LDA $1B
	CLC
	ADC #$0059
	TAX
	LDY #$005D
	LDA a:.LOWORD(RAM),X
	CLC
	ADC ($1B),Y
	STA a:.LOWORD(RAM),X
	STA $04
	LDX $02
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $04
	LDX $02
	STA a:.LOWORD(RAM),X
	LDA $1B
	CLC
	ADC #$0057
	TAY
	STY $16
	LDA $1B
	CLC
	ADC #$005B
	TAX
	LDY #$005F
	LDA a:.LOWORD(RAM),X
	CLC
	ADC ($1B),Y
	STA a:.LOWORD(RAM),X
	STA $04
	LDY $16
	LDA a:.LOWORD(RAM),Y
	CLC
	ADC $04
	STA a:.LOWORD(RAM),Y
	LDA $19
	CMP #$0001
	BEQ UNKNOWN_C2C92D_UNKNOWN30
	CMP #$0002
	BEQ UNKNOWN_C2C92D_UNKNOWN31
	CMP #$0003
	BEQ UNKNOWN_C2C92D_UNKNOWN32
	CMP #$0004
	BEQ UNKNOWN_C2C92D_UNKNOWN33
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN34)
UNKNOWN_C2C92D_UNKNOWN30:
	LDX $02
	LDA a:.LOWORD(RAM),X
	XBA
	AND #$00FF
	CLC
	ADC .LOWORD(UNKNOWN_7EAD96)
	STA a:.LOWORD(BG1_X_POS)
	LDA a:.LOWORD(RAM),Y
	XBA
	AND #$00FF
	CLC
	ADC .LOWORD(UNKNOWN_7EAD98)
	STA a:.LOWORD(BG1_Y_POS)
	BRA UNKNOWN_C2C92D_UNKNOWN34
UNKNOWN_C2C92D_UNKNOWN31:
	LDX $02
	LDA a:.LOWORD(RAM),X
	XBA
	AND #$00FF
	CLC
	ADC .LOWORD(UNKNOWN_7EAD96)
	STA a:.LOWORD(BG2_X_POS)
	LDA a:.LOWORD(RAM),Y
	XBA
	AND #$00FF
	CLC
	ADC .LOWORD(UNKNOWN_7EAD98)
	STA a:.LOWORD(BG2_Y_POS)
	BRA UNKNOWN_C2C92D_UNKNOWN34
UNKNOWN_C2C92D_UNKNOWN32:
	LDX $02
	LDA a:.LOWORD(RAM),X
	XBA
	AND #$00FF
	CLC
	ADC .LOWORD(UNKNOWN_7EAD96)
	STA a:.LOWORD(BG3_X_POS)
	LDA a:.LOWORD(RAM),Y
	XBA
	AND #$00FF
	CLC
	ADC .LOWORD(UNKNOWN_7EAD98)
	STA a:.LOWORD(BG3_Y_POS)
	BRA UNKNOWN_C2C92D_UNKNOWN34
UNKNOWN_C2C92D_UNKNOWN33:
	LDX $02
	LDA a:.LOWORD(RAM),X
	XBA
	AND #$00FF
	CLC
	ADC .LOWORD(UNKNOWN_7EAD96)
	STA a:.LOWORD(BG4_X_POS)
	LDA a:.LOWORD(RAM),Y
	XBA
	AND #$00FF
	CLC
	ADC .LOWORD(UNKNOWN_7EAD98)
	STA a:.LOWORD(BG4_Y_POS)
UNKNOWN_C2C92D_UNKNOWN34:
	LDA $1B
	CLC
	ADC #$0066
	TAX
	LDA a:.LOWORD(RAM),X
	BNE UNKNOWN_C2C92D_UNKNOWN35
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN40)
UNKNOWN_C2C92D_UNKNOWN35:
	DEC
	STA a:.LOWORD(RAM),X
	BEQ UNKNOWN_C2C92D_UNKNOWN36
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN40)
UNKNOWN_C2C92D_UNKNOWN36:
	LDA $1B
	CLC
	ADC #$0065
	TAX
	STX $0E
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	INC
	AND #$0003
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CLC
	ADC $1B
	TAX
	LDA a:.LOWORD(RAM)+97,X
	AND #$00FF
	STA $10
	BNE UNKNOWN_C2C92D_UNKNOWN37
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	LDX $0E
	STA a:.LOWORD(RAM),X
	LDY #$0061
	REP #PROC_FLAGS::ACCUM8
	LDA ($1B),Y
	AND #$00FF
	STA $10
UNKNOWN_C2C92D_UNKNOWN37:
	CMP #$0000
	BNE UNKNOWN_C2C92D_UNKNOWN38
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN40)
UNKNOWN_C2C92D_UNKNOWN38:
	LOADPTR BG_DISTORTION_TABLE, $06
	LDA $10
	STA $04
	ASL
	ASL
	ASL
	ASL
	ADC $04
	STA $10
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	LDY #$0066
	STA ($1B),Y
	LDA $1B
	CLC
	ADC #$0068
	TAX
	LDA $10
	INC
	INC
	LDY $06
	STY $0A
	LDY $08
	STY $0C
	CLC
	ADC $0A
	STA $0A
	SEP #PROC_FLAGS::ACCUM8
	LDA [$0A]
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	LDA $10
	INC
	INC
	INC
	LDY $06
	STY $0A
	LDY $08
	STY $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	LDY #$0069
	STA ($1B),Y
	LDA $10
	CLC
	ADC #$0005
	LDY $06
	STY $0A
	LDY $08
	STY $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	LDY #$006B
	STA ($1B),Y
	LDA $10
	CLC
	ADC #$0007
	LDY $06
	STY $0A
	LDY $08
	STY $0C
	CLC
	ADC $0A
	STA $0A
	SEP #PROC_FLAGS::ACCUM8
	LDA [$0A]
	LDY #$006D
	STA ($1B),Y
	REP #PROC_FLAGS::ACCUM8
	LDA $10
	CLC
	ADC #$0008
	LDY $06
	STY $0A
	LDY $08
	STY $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	LDY #$006E
	STA ($1B),Y
	LDA $10
	CLC
	ADC #$000A
	LDY $06
	STY $0A
	LDY $08
	STY $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	LDY #$0070
	STA ($1B),Y
	LDA $10
	CLC
	ADC #$000C
	LDY $06
	STY $0A
	LDY $08
	STY $0C
	CLC
	ADC $0A
	STA $0A
	LDA [$0A]
	LDY #$0072
	STA ($1B),Y
	LDA $10
	CLC
	ADC #$000E
	LDY $06
	STY $0A
	LDY $08
	STY $0C
	CLC
	ADC $0A
	STA $0A
	SEP #PROC_FLAGS::ACCUM8
	LDA [$0A]
	LDY #$0074
	STA ($1B),Y
	REP #PROC_FLAGS::ACCUM8
	LDA $10
	CLC
	ADC #$000F
	CLC
	ADC $06
	STA $06
	LDA [$06]
	LDY #$0075
	STA ($1B),Y
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	CMP #$0003
	BNE UNKNOWN_C2C92D_UNKNOWN39
	LDY $1D
	LDX $19
	INX
	INX
	INX
	INX
	LDA $1D
	CLC
	ADC #$0005
	JSL UNKNOWN_C0ADB2
	BRA UNKNOWN_C2C92D_UNKNOWN40
UNKNOWN_C2C92D_UNKNOWN39:
	LDY $1D
	LDX $19
	LDA $1D
	CLC
	ADC #$0005
	JSL UNKNOWN_C0ADB2
UNKNOWN_C2C92D_UNKNOWN40:
	LDA $1B
	CLC
	ADC #$0068
	STA $0E
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BNE UNKNOWN_C2C92D_UNKNOWN41
	JMP a:.LOWORD(UNKNOWN_C2C92D_UNKNOWN43)
UNKNOWN_C2C92D_UNKNOWN41:
	LDA $1B
	CLC
	ADC #$0069
	TAX
	LDY #$0070
	LDA a:.LOWORD(RAM),X
	CLC
	ADC ($1B),Y
	STA a:.LOWORD(RAM),X
	LDA $1B
	CLC
	ADC #$006B
	TAX
	LDY #$0072
	LDA a:.LOWORD(RAM),X
	CLC
	ADC ($1B),Y
	STA a:.LOWORD(RAM),X
	LDA $1B
	CLC
	ADC #$006D
	TAX
	LDY #$0074
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CLC
	ADC ($1B),Y
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	LDA $1B
	CLC
	ADC #$006E
	STA $02
	LDY #$0075
	LDX $02
	LDA a:.LOWORD(RAM),X
	CLC
	ADC ($1B),Y
	LDX $02
	STA a:.LOWORD(RAM),X
	LDY $1D
	LDX $19
	STX $14
	LDA $0E
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	DEC
	LDX $14
	JSL UNKNOWN_C0AE44+8
	LDX $02
	LDA a:.LOWORD(RAM),X
	JSL UNKNOWN_C0AE44+18
	LDA a:.LOWORD(UNKNOWN_7E0002)
	AND #$00FF
	AND #$0001
	CMP $1D
	BEQ UNKNOWN_C2C92D_UNKNOWN42
	LDA .LOWORD(UNKNOWN_7EADAC)
	BNE UNKNOWN_C2C92D_UNKNOWN43
UNKNOWN_C2C92D_UNKNOWN42:
	LDY #$006D
	LDA ($1B),Y
	AND #$00FF
	TAY
	STY $10
	LDY #$006B
	LDA ($1B),Y
	XBA
	AND #$00FF
	TAX
	LDY #$0069
	LDA ($1B),Y
	LDY $10
	JSL UNKNOWN_C0AE5A
UNKNOWN_C2C92D_UNKNOWN43:
	PLD
	RTL

UNKNOWN_C2CFE5: ;$C2CFE5
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE8
	TCD
	PLA
	TAY
	STY $16
	LDA $26
	STA $06
	LDA $28
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	SEP #PROC_FLAGS::ACCUM8
	STZ $0E
	LDX #$0077
	REP #PROC_FLAGS::ACCUM8
	TYA
	JSL MEMSET16
	SEP #PROC_FLAGS::ACCUM8
	LDY #$0002
	LDA [$06],Y
	LDY $16
	STA a:.LOWORD(RAM)+1,Y
	LDY #$0003
	LDA [$06],Y
	LDY $16
	STA a:.LOWORD(RAM)+3,Y
	LDY #$0004
	LDA [$06],Y
	LDY $16
	STA a:.LOWORD(RAM)+4,Y
	LDY #$0005
	LDA [$06],Y
	LDY $16
	STA a:.LOWORD(RAM)+5,Y
	LDY #$0006
	LDA [$06],Y
	LDY $16
	STA a:.LOWORD(RAM)+6,Y
	LDY #$0007
	LDA [$06],Y
	LDY $16
	STA a:.LOWORD(RAM)+7,Y
	LDY #$0008
	LDA [$06],Y
	LDY $16
	STA a:.LOWORD(RAM)+10,Y
	REP #PROC_FLAGS::ACCUM8
	LDA #$0009
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0004
	TYA
	CLC
	ADC #$004E
	JSL MEMCPY16
	LDA #$000D
	LDX $12
	STX $06
	LDX $14
	STX $08
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0004
	LDY $16
	TYA
	CLC
	ADC #$0061
	JSL MEMCPY16
	LDA #$0001
	LDY $16
	STA a:.LOWORD(RAM)+83,Y
	STA a:.LOWORD(PAD_1_STATE)+1,Y
	SEP #PROC_FLAGS::ACCUM8
	STA a:.LOWORD(RAM)+11,Y
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

UNKNOWN_C2D0AC: ;$C2D0AC
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF0
	TCD
	LDX #.LOWORD(UNKNOWN_7EADB8)
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7EADB2)
	STA a:.LOWORD(RAM),X
	INX
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7EADB0)
	STA a:.LOWORD(RAM),X
	INX
	INX
	LDA .LOWORD(UNKNOWN_7EADB4)
	SEC
	SBC .LOWORD(UNKNOWN_7EADB2)
	STA $0E
	BRA UNKNOWN_C2D0AC_UNKNOWN1
UNKNOWN_C2D0AC_UNKNOWN0:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$007F
	STA a:.LOWORD(RAM),X
	INX
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7EADAE)
	STA a:.LOWORD(RAM),X
	INX
	INX
	LDA $0E
	SEC
	SBC #$007F
	STA $0E
UNKNOWN_C2D0AC_UNKNOWN1:
	CMP #$0080
	BCS UNKNOWN_C2D0AC_UNKNOWN0
	SEP #PROC_FLAGS::ACCUM8
	STA a:.LOWORD(RAM),X
	INX
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7EADAE)
	STA a:.LOWORD(RAM),X
	INX
	INX
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA a:.LOWORD(RAM),X
	INX
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7EADB0)
	STA a:.LOWORD(RAM),X
	INX
	INX
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

LOAD_BATTLE_BG: ;$C2D121
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFD0
	TCD
	PLA
	STY $2E
	STX $04
	STX $2C
	STA $02
	STZ .LOWORD(RED_FLASH_DURATION)
	STZ .LOWORD(GREEN_FLASH_DURATION)
	STZ .LOWORD(SHAKE_DURATION)
	STZ .LOWORD(WOBBLE_DURATION)
	STZ .LOWORD(UNKNOWN_7EAD90)
	STZ .LOWORD(VERTICAL_SHAKE_HOLD_DURATION)
	STZ .LOWORD(VERTICAL_SHAKE_DURATION)
	LDA $2E
	AND #$0003
	BEQ @NO_LETTERBOX
	CMP #LETTERBOX_STYLE::LARGE
	BEQ @LARGE_LETTERBOX
	CMP #LETTERBOX_STYLE::MEDIUM
	BEQ @MEDIUM_LETTERBOX
	CMP #LETTERBOX_STYLE::SMALL
	BEQ @SMALL_LETTERBOX
	BRA @LETTERBOX_SETUP_DONE
@NO_LETTERBOX:
	STZ .LOWORD(UNKNOWN_7EADB2)
	LDA #$00E0
	STA .LOWORD(UNKNOWN_7EADB4)
	BRA @LETTERBOX_SETUP_DONE
@LARGE_LETTERBOX:
	LDA #$002F
	STA .LOWORD(UNKNOWN_7EADB2)
	LDA #$00B0
	STA .LOWORD(UNKNOWN_7EADB4)
	BRA @LETTERBOX_SETUP_DONE
@MEDIUM_LETTERBOX:
	LDA #$0039
	STA .LOWORD(UNKNOWN_7EADB2)
	LDA #$00A6
	STA .LOWORD(UNKNOWN_7EADB4)
	BRA @LETTERBOX_SETUP_DONE
@SMALL_LETTERBOX:
	LDA #$0043
	STA .LOWORD(UNKNOWN_7EADB2)
	LDA #$009C
	STA .LOWORD(UNKNOWN_7EADB4)
@LETTERBOX_SETUP_DONE:
	STZ .LOWORD(UNKNOWN_7EADB6)
	LDX #$7000
	STX .LOWORD(UNKNOWN_7EADCE)
	STX .LOWORD(UNKNOWN_7EADCC)
	STZ .LOWORD(UNKNOWN_7EADD0)
	LDA #$FFFF
	STA .LOWORD(UNKNOWN_7EADD2)
	LOADPTR UNKNOWN_7F0000, $06
	LDA $06
	STA $28
	LDA $08
	STA $2A
	LOADPTR BATTLEBG_GFX_POINTERS, $0A
	LDA $02
	STA $04
	ASL
	ASL
	ASL
	ASL
	ADC $04
	TAX
	LDA f:BG_DATA_TABLE,X
	AND #$00FF
	ASL
	ASL
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $28
	STA $06
	LDA $2A
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DECOMP
	LDA .LOWORD(CURRENT_BATTLE_GROUP)
	CMP #$01DE
	BNE @UNKNOWN5
	LDY #$3000
	LDX #$5C00
	LDA #$0000
	JSL SET_BG2_VRAM_LOCATION
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$3000
	LDX #$5000
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616
	BRA @UNKNOWN6
@UNKNOWN5:
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$1000
	LDX #$2000
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616
@UNKNOWN6:
	.A16
	LOADPTR UNKNOWN_7F0000, $0A
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA [$0A]
	REP #PROC_FLAGS::ACCUM8
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$5800
	LDX #$0800
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0003
	JSL UNKNOWN_C08616
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$0000
	LDX #$0800
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0003
	JSL UNKNOWN_C08616
	.A16
	LOADPTR BG_DATA_TABLE, $06
	LDA $06
	STA $24
	LDA $08
	STA $26
	LDA $02
	STA $04
	ASL
	ASL
	ASL
	ASL
	ADC $04
	STA $22
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	ASL
	ASL
	PHA
	LOADPTR BATTLEBG_ARR_POINTERS, $06
	PLA
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DECOMP
	LDA $22
	INC
	INC
	LDX $24
	STX $06
	LDX $26
	STX $08
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	CMP #$0004
	BEQ @UNKNOWN7
	JMP a:.LOWORD(@UNKNOWN15)
@UNKNOWN7:
	LDA #$0009
	JSL UNKNOWN_C08D79
	LDA #$0000
	STA $22
	BRA @UNKNOWN9
@UNKNOWN8:
	STA $06
	STZ $08
	CLC
	LDA $06
	ADC #$0001
	STA $06
	LDA $08
	ADC #$007F
	STA $08
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	AND #$00DF
	ORA #$0008
	STA [$06]
	REP #PROC_FLAGS::ACCUM8
	LDA $22
	INC
	INC
	STA $22
@UNKNOWN9:
	CMP #$0800
	BCC @UNKNOWN8
	LOADPTR UNKNOWN_7F0000, $28
	LDA $28
	STA $06
	LDA $2A
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$5C00
	LDX #$0800
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616
	.A16
	LOADPTR BG_DATA_TABLE, $06
	LDA $06
	STA $24
	LDA $08
	STA $26
	LDA $02
	STA $04
	ASL
	ASL
	ASL
	ASL
	ADC $04
	TAX
	STX $20
	TXA
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDA #.LOWORD(UNKNOWN_7EADD4)
	JSL UNKNOWN_C2CFE5
	LDA #$AE20
	STA $02
	LDA #$0240
	LDX $02
	STA a:.LOWORD(RAM),X
	LDY #.LOWORD(UNKNOWN_7EADE0)
	STY $1E
	LOADPTR BATTLEBG_PALETTE_POINTERS, $1A
	LDX $20
	TXA
	INC
	LDX $24
	STX $06
	LDX $26
	STX $08
	LDX $06
	STX $0A
	LDX $08
	STX $0C
	CLC
	ADC $0A
	STA $0A
	LDA $1A
	STA $06
	LDA $1C
	STA $08
	LDA [$0A]
	AND #$00FF
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDY $1E
	TYA
	JSL MEMCPY16
	LDA [$0A]
	AND #$00FF
	ASL
	ASL
	PHA
	LDA $1A
	STA $0A
	LDA $1C
	STA $0C
	PLA
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA #$AE00
	JSL MEMCPY16
	LDY $1E
	TYA
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	STX $20
	LDX $02
	LDA a:.LOWORD(RAM),X
	LDX $20
	JSL MEMCPY16
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0002
	STA .LOWORD(UNKNOWN_7EADD4)
	LDX #$0000
	REP #PROC_FLAGS::ACCUM8
	LDA #.LOWORD(UNKNOWN_7EADD4)
	JSL UNKNOWN_C2C92D
	LDX #$AE4B
	STX $1E
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA .LOWORD(UNKNOWN_7EAD8A)
	JSL UNKNOWN_C0AFCD
	LDA #$0017
	STA .LOWORD(UNKNOWN_7EADAE)
	LDA #$0015
	STA .LOWORD(UNKNOWN_7EADB0)
	LDA $2C
	STA $04
	BNE @UNKNOWN10
	JMP a:.LOWORD(@UNKNOWN23)
@UNKNOWN10:
	LDA $2E
	AND #$0004
	BNE @UNKNOWN11
	JMP a:.LOWORD(@UNKNOWN14)
@UNKNOWN11:
	LDA #$0007
	STA .LOWORD(UNKNOWN_7EAD8A)
	JSL UNKNOWN_C0AFCD
	LDA $04
	STA $04
	ASL
	ASL
	ASL
	ASL
	ADC $04
	LDX $24
	STX $06
	LDX $26
	STX $08
	CLC
	ADC $06
	STA $06
	STA $16
	LDA $08
	STA $18
	LOADPTR BATTLEBG_GFX_POINTERS, $0A
	LDA [$06]
	AND #$00FF
	ASL
	ASL
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $28
	STA $06
	LDA $2A
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DECOMP
	LDA $28
	STA $06
	LDA $2A
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$0000
	LDX #$2000
	SEP #PROC_FLAGS::ACCUM8
	TYA
	JSL UNKNOWN_C08616
	.A16
	LOADPTR BATTLEBG_ARR_POINTERS, $0A
	LDA $16
	STA $06
	LDA $18
	STA $08
	LDA [$06]
	AND #$00FF
	ASL
	ASL
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $28
	STA $06
	LDA $2A
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DECOMP
	LDA #$0000
	STA $2E
	BRA @UNKNOWN13
@UNKNOWN12:
	STA $06
	STZ $08
	CLC
	LDA $06
	ADC #$0001
	STA $06
	LDA $08
	ADC #$007F
	STA $08
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	AND #$00DF
	ORA #$0010
	STA [$06]
	REP #PROC_FLAGS::ACCUM8
	LDA $2E
	INC
	INC
	STA $2E
@UNKNOWN13:
	CMP #$0800
	BCC @UNKNOWN12
	LOADPTR UNKNOWN_7F0000, $0E
	LDY #$5800
	LDX #$0800
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616
	.A16
	LOADPTR BG_DATA_TABLE, $06
	LDA $06
	STA $28
	LDA $08
	STA $2A
	LDA $2C
	STA $04
	STA $04
	ASL
	ASL
	ASL
	ASL
	ADC $04
	TAX
	STX $20
	LDA #$AE4B
	STA $04
	TXA
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDA $04
	JSL UNKNOWN_C2CFE5
	LDA #$AE97
	STA $02
	LDA #$0280
	LDX $02
	STA a:.LOWORD(RAM),X
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	LDX $04
	STA a:.LOWORD(RAM),X
	LDY #$AE57
	STY $2C
	REP #PROC_FLAGS::ACCUM8
	LOADPTR BATTLEBG_PALETTE_POINTERS, $0A
	LDX $20
	TXA
	INC
	LDX $28
	STX $06
	LDX $2A
	STX $08
	CLC
	ADC $06
	STA $06
	STA $16
	LDA $08
	STA $18
	LDA [$06]
	AND #$00FF
	ASL
	ASL
	LDX $0A
	STX $06
	LDX $0C
	STX $08
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDY $2C
	TYA
	JSL MEMCPY16
	LDA $16
	STA $06
	LDA $18
	STA $08
	LDA [$06]
	AND #$00FF
	ASL
	ASL
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA #$AE77
	JSL MEMCPY16
	LDY $2C
	TYA
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	STX $22
	LDX $02
	LDA a:.LOWORD(RAM),X
	LDX $22
	JSL MEMCPY16
	LDX #$0001
	LDA $04
	JSL UNKNOWN_C2C92D
	LDA #$0215
	STA .LOWORD(UNKNOWN_7EADAE)
	LDA #$0014
	STA .LOWORD(UNKNOWN_7EADB0)
	JMP a:.LOWORD(@UNKNOWN23)
@UNKNOWN14:
	LDA $04
	STA $04
	ASL
	ASL
	ASL
	ASL
	ADC $04
	LDX $24
	STX $06
	LDX $26
	STX $08
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDX $1E
	TXA
	JSL UNKNOWN_C2CFE5
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA $AE4D
	LDA #$0002
	LDX $1E
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(@UNKNOWN23)
@UNKNOWN15:
	.A16
	LDA #$0008
	JSL UNKNOWN_C08D79
	LDY #$6000
	LDX #$7C00
	LDA #$0000
	JSL SET_BG1_VRAM_LOCATION
	LDY #$0000
	LDX #$5800
	TYA
	JSL SET_BG2_VRAM_LOCATION
	LDY #$1000
	LDX #$5C00
	LDA #$0000
	JSL SET_BG3_VRAM_LOCATION
	LDY #$3000
	LDX #$0C00
	LDA #$0000
	JSL SET_BG4_VRAM_LOCATION
	LDA #$0000
	STA $2E
	BRA @UNKNOWN17
@UNKNOWN16:
	STA $06
	STZ $08
	CLC
	LDA $06
	ADC #$0001
	STA $06
	LDA $08
	ADC #$007F
	STA $08
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	AND #$00DF
	STA [$06]
	REP #PROC_FLAGS::ACCUM8
	LDA $2E
	INC
	INC
	STA $2E
@UNKNOWN17:
	CMP #$0800
	BCC @UNKNOWN16
	LOADPTR UNKNOWN_7F0000, $06
	LDA $06
	STA $24
	LDA $08
	STA $26
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$5C00
	LDX #$0800
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616
	.A16
	LOADPTR BG_DATA_TABLE, $28
	LDA $02
	STA $04
	ASL
	ASL
	ASL
	ASL
	ADC $04
	TAX
	STX $20
	LDA $28
	STA $06
	LDA $2A
	STA $08
	TXA
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDA #.LOWORD(UNKNOWN_7EADD4)
	JSL UNKNOWN_C2CFE5
	LDA #$AE20
	STA $02
	LDA #$0280
	LDX $02
	STA a:.LOWORD(RAM),X
	LDY #.LOWORD(UNKNOWN_7EADE0)
	STY $1E
	LOADPTR BATTLEBG_PALETTE_POINTERS, $1A
	LDA $28
	STA $0A
	LDA $2A
	STA $0C
	LDX $20
	TXA
	INC
	CLC
	ADC $0A
	STA $0A
	LDA $1A
	STA $06
	LDA $1C
	STA $08
	LDA [$0A]
	AND #$00FF
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDY $1E
	TYA
	JSL MEMCPY16
	LDA [$0A]
	AND #$00FF
	ASL
	ASL
	PHA
	LDA $1A
	STA $0A
	LDA $1C
	STA $0C
	PLA
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA #$AE00
	JSL MEMCPY16
	LDY $1E
	TYA
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	STX $20
	LDX $02
	LDA a:.LOWORD(RAM),X
	LDX $20
	JSL MEMCPY16
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0003
	STA .LOWORD(UNKNOWN_7EADD4)
	REP #PROC_FLAGS::ACCUM8
	LDA $2C
	STA $04
	BNE @UNKNOWN18
	JMP a:.LOWORD(@UNKNOWN21)
@UNKNOWN18:
	LDA #$0003
	STA .LOWORD(UNKNOWN_7EAD8A)
	JSL UNKNOWN_C0AFCD
	LDA $28
	STA $0A
	LDA $2A
	STA $0C
	LDA $04
	STA $04
	ASL
	ASL
	ASL
	ASL
	ADC $04
	CLC
	ADC $0A
	STA $0A
	LOADPTR BATTLEBG_GFX_POINTERS, $06
	LDA [$0A]
	AND #$00FF
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $24
	STA $06
	LDA $26
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DECOMP
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$3000
	LDX #$1800
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616
	.A16
	LDA [$0A]
	AND #$00FF
	ASL
	ASL
	PHA
	LOADPTR BATTLEBG_ARR_POINTERS, $0A
	PLA
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $24
	STA $06
	LDA $26
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DECOMP
	LDA #$0000
	STA $2E
	BRA @UNKNOWN20
@UNKNOWN19:
	STA $06
	STZ $08
	CLC
	LDA $06
	ADC #$0001
	STA $06
	LDA $08
	ADC #$007F
	STA $08
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	AND #$00DF
	STA [$06]
	REP #PROC_FLAGS::ACCUM8
	LDA $2E
	INC
	INC
	STA $2E
@UNKNOWN20:
	CMP #$0800
	BCC @UNKNOWN19
	LOADPTR UNKNOWN_7F0000, $0E
	LDY #$0C00
	LDX #$0800
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616
	.A16
	LOADPTR BG_DATA_TABLE, $06
	LDA $06
	STA $28
	LDA $08
	STA $2A
	LDA $2C
	STA $04
	STA $04
	ASL
	ASL
	ASL
	ASL
	ADC $04
	TAX
	STX $20
	LDA #$AE4B
	STA $04
	TXA
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDA $04
	JSL UNKNOWN_C2CFE5
	LDA #$AE97
	STA $02
	LDA #$02C0
	LDX $02
	STA a:.LOWORD(RAM),X
	LDY #$AE57
	STY $2C
	LOADPTR BATTLEBG_PALETTE_POINTERS, $0A
	LDX $20
	TXA
	INC
	LDX $28
	STX $06
	LDX $2A
	STX $08
	CLC
	ADC $06
	STA $06
	STA $16
	LDA $08
	STA $18
	LDA [$06]
	AND #$00FF
	ASL
	ASL
	LDX $0A
	STX $06
	LDX $0C
	STX $08
	CLC
	ADC $06
	STA $06
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDY $2C
	TYA
	JSL MEMCPY16
	LDA $16
	STA $06
	LDA $18
	STA $08
	LDA [$06]
	AND #$00FF
	ASL
	ASL
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA #$AE77
	JSL MEMCPY16
	LDY $2C
	TYA
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	STX $20
	LDX $02
	LDA a:.LOWORD(RAM),X
	LDX $20
	JSL MEMCPY16
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0004
	LDX $04
	STA a:.LOWORD(RAM),X
	BRA @UNKNOWN22
@UNKNOWN21:
	SEP #PROC_FLAGS::ACCUM8
	STZ $AE4B
@UNKNOWN22:
	REP #PROC_FLAGS::ACCUM8
	LDA #$0817
	STA .LOWORD(UNKNOWN_7EADAE)
	LDA #$0013
	STA .LOWORD(UNKNOWN_7EADB0)
@UNKNOWN23:
	REP #PROC_FLAGS::ACCUM8
	STZ .LOWORD(UNKNOWN_7EADAC)
	LDA $AE4B
	AND #$00FF
	BEQ @UNKNOWN24
	LDA $AEAC
	AND #$00FF
	BEQ @UNKNOWN24
	LDA #$0001
	STA .LOWORD(UNKNOWN_7EADAC)
@UNKNOWN24:
	JSL UNKNOWN_C2D0AC
	LDA .LOWORD(UNKNOWN_7EADB2)
	BEQ @UNKNOWN25
	LDA #$0002
	JSL UNKNOWN_C429E8
@UNKNOWN25:
	JSL UNKNOWN_C2E9ED
	PLD
	RTL

UNKNOWN_C2DAE3: ;$C2DAE3
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF1
	TCD
	LDX #$AE35
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $0E
	LDY #$AE38
	LDA a:.LOWORD(RAM),Y
	STA a:.LOWORD(RAM),X
	STZ $AE36
	REP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA $AE3A
	SEP #PROC_FLAGS::ACCUM8
	LDA $0E
	STA a:.LOWORD(RAM),Y
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

UNKNOWN_C2DB14: ;$C2DB14
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA $AE20
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA #.LOWORD(UNKNOWN_7EADE0)
	JSL MEMCPY16
	PLD
	RTL
UNKNOWN_C2DB3F: ;$C2DB3F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFF2
	TCD
	LDA .LOWORD(UNKNOWN_7EADD0)
	BEQ UNKNOWN_C2DB3F_UNKNOWN3
	LDA .LOWORD(UNKNOWN_7EADD2)
	SEC
	SBC #$0555
	STA .LOWORD(UNKNOWN_7EADD2)
	STA $0A
	STZ $0C
	LDA #$6000
	STA $06
	LDA #$0000
	STA $08
	CLC
	LDA $06
	SBC $0A
	LDA $08
	SBC $0C
	BVC UNKNOWN_C2DB3F_UNKNOWN0
	BPL UNKNOWN_C2DB3F_UNKNOWN2
	BRA UNKNOWN_C2DB3F_UNKNOWN1
UNKNOWN_C2DB3F_UNKNOWN0:
	BMI UNKNOWN_C2DB3F_UNKNOWN2
UNKNOWN_C2DB3F_UNKNOWN1:
	LDA #$6000
	STA .LOWORD(UNKNOWN_7EADD2)
	STZ .LOWORD(UNKNOWN_7EADD0)
UNKNOWN_C2DB3F_UNKNOWN2:
	SEP #PROC_FLAGS::INDEX8
	LDY #$0008
	LDA .LOWORD(UNKNOWN_7EADD2)
	JSL ASR8_UNKNOWN1
	JSR a:.LOWORD(UNKNOWN_C2E08E)
UNKNOWN_C2DB3F_UNKNOWN3:
	LDA .LOWORD(UNKNOWN_7EADA8)
	BEQ UNKNOWN_C2DB3F_UNKNOWN5
	LDA .LOWORD(UNKNOWN_7EADA8)
	DEC
	STA .LOWORD(UNKNOWN_7EADA8)
	AND #$0002
	BEQ UNKNOWN_C2DB3F_UNKNOWN4
	LDA #$FFFF
	JSR a:.LOWORD(UNKNOWN_C2E08E)
	BRA UNKNOWN_C2DB3F_UNKNOWN5
UNKNOWN_C2DB3F_UNKNOWN4:
	LDA #$0100
	JSR a:.LOWORD(UNKNOWN_C2E08E)
UNKNOWN_C2DB3F_UNKNOWN5:
	LDA .LOWORD(UNKNOWN_7EADAA)
	BEQ UNKNOWN_C2DB3F_UNKNOWN10
	STZ .LOWORD(CUR_TEXT_PAL)
	LDA .LOWORD(UNKNOWN_7EADAA)
	CMP #$0003
	BEQ UNKNOWN_C2DB3F_UNKNOWN6
	CMP #$0002
	BEQ UNKNOWN_C2DB3F_UNKNOWN7
	BRA UNKNOWN_C2DB3F_UNKNOWN8
UNKNOWN_C2DB3F_UNKNOWN6:
	LDA #$03E0
	STA .LOWORD(CUR_TEXT_PAL)
UNKNOWN_C2DB3F_UNKNOWN7:
	LDA #$0018
	JSL UNKNOWN_C0856B
UNKNOWN_C2DB3F_UNKNOWN8:
	LDA .LOWORD(UNKNOWN_7EADAA)
	DEC
	STA .LOWORD(UNKNOWN_7EADAA)
	AND #$0002
	BEQ UNKNOWN_C2DB3F_UNKNOWN9
	LDA #$0000
	JSR a:.LOWORD(UNKNOWN_C2E08E)
	BRA UNKNOWN_C2DB3F_UNKNOWN10
UNKNOWN_C2DB3F_UNKNOWN9:
	LDA #$0100
	JSR a:.LOWORD(UNKNOWN_C2E08E)
UNKNOWN_C2DB3F_UNKNOWN10:
	LDA .LOWORD(VERTICAL_SHAKE_DURATION)
	BNE UNKNOWN_C2DB3F_UNKNOWN11
	STZ .LOWORD(UNKNOWN_7EAD98)
	BRA UNKNOWN_C2DB3F_UNKNOWN12
UNKNOWN_C2DB3F_UNKNOWN11:
	LDA #1*SECOND
	SEC
	SBC .LOWORD(VERTICAL_SHAKE_DURATION)
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA f:UNKNOWN_C4A591,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	STA .LOWORD(UNKNOWN_7EAD98)
	LDX .LOWORD(VERTICAL_SHAKE_DURATION)
	DEX
	STX .LOWORD(VERTICAL_SHAKE_DURATION)
	BNE UNKNOWN_C2DB3F_UNKNOWN12
	LDA .LOWORD(VERTICAL_SHAKE_HOLD_DURATION)
	BEQ UNKNOWN_C2DB3F_UNKNOWN12
	DEC .LOWORD(VERTICAL_SHAKE_HOLD_DURATION)
	LDA #1*SIXTH_OF_A_SECOND
	STA .LOWORD(VERTICAL_SHAKE_DURATION)
UNKNOWN_C2DB3F_UNKNOWN12:
	.I16
	STZ .LOWORD(UNKNOWN_7EAD96)
	LDA .LOWORD(WOBBLE_DURATION)
	BEQ UNKNOWN_C2DB3F_UNKNOWN13
	LDY #6*FIFTHS_OF_A_SECOND
	LDA .LOWORD(WOBBLE_DURATION)
	JSL MODULUS16
	DEC .LOWORD(WOBBLE_DURATION)
	LDY #$0048
	XBA
	AND #$FF00
	JSL DIVISION16S_DIVISOR_POSITIVE
	.I16
	TAX
	LDY #$0100
	SEP #PROC_FLAGS::ACCUM8
	LDA f:SINE_LOOKUP_TABLE,X
	REP #PROC_FLAGS::ACCUM8
	SEC
	AND #$00FF
	SBC #$0080
	EOR #$FF80
	ASL
	ASL
	ASL
	ASL
	ASL
	ASL
	JSL DIVISION16
	STA .LOWORD(UNKNOWN_7EAD96)
UNKNOWN_C2DB3F_UNKNOWN13:
	LDA .LOWORD(SHAKE_DURATION)
	BEQ UNKNOWN_C2DB3F_UNKNOWN17
	LDA .LOWORD(SHAKE_DURATION)
	AND #$0003
	DEC .LOWORD(SHAKE_DURATION)
	CMP #$0000
	BEQ UNKNOWN_C2DB3F_UNKNOWN14
	CMP #$0002
	BEQ UNKNOWN_C2DB3F_UNKNOWN14
	CMP #$0001
	BEQ UNKNOWN_C2DB3F_UNKNOWN15
	CMP #$0003
	BEQ UNKNOWN_C2DB3F_UNKNOWN16
	BRA UNKNOWN_C2DB3F_UNKNOWN17
UNKNOWN_C2DB3F_UNKNOWN14:
	STZ .LOWORD(UNKNOWN_7EAD96)
	BRA UNKNOWN_C2DB3F_UNKNOWN17
UNKNOWN_C2DB3F_UNKNOWN15:
	LDA #$0002
	STA .LOWORD(UNKNOWN_7EAD96)
	BRA UNKNOWN_C2DB3F_UNKNOWN17
UNKNOWN_C2DB3F_UNKNOWN16:
	LDA #$FFFE
	STA .LOWORD(UNKNOWN_7EAD96)
UNKNOWN_C2DB3F_UNKNOWN17:
	LDA .LOWORD(UNKNOWN_7EADD5)
	AND #$00FF
	CMP #$0002
	BNE UNKNOWN_C2DB3F_UNKNOWN18
	LDA .LOWORD(UNKNOWN_7EAD96)
	STA a:.LOWORD(BG1_X_POS)
	LDA .LOWORD(UNKNOWN_7EAD98)
	STA a:.LOWORD(BG1_Y_POS)
	BRA UNKNOWN_C2DB3F_UNKNOWN19
UNKNOWN_C2DB3F_UNKNOWN18:
	LDA .LOWORD(BATTLE_MODE_FLAG)
	BEQ UNKNOWN_C2DB3F_UNKNOWN19
	LDA .LOWORD(UNKNOWN_7EAD96)
	STA a:.LOWORD(BG3_X_POS)
	LDA .LOWORD(UNKNOWN_7EAD98)
	STA a:.LOWORD(BG3_Y_POS)
UNKNOWN_C2DB3F_UNKNOWN19:
	LDA .LOWORD(UNKNOWN_7EAD90)
	BEQ UNKNOWN_C2DB3F_UNKNOWN20
	DEC .LOWORD(UNKNOWN_7EAD90)
UNKNOWN_C2DB3F_UNKNOWN20:
	LDA .LOWORD(BATTLE_MODE_FLAG)
	BEQ UNKNOWN_C2DB3F_UNKNOWN21
	JSL UNKNOWN_C2F8F9
UNKNOWN_C2DB3F_UNKNOWN21:
	LDX #$0000
	LDA #.LOWORD(UNKNOWN_7EADD4)
	JSL UNKNOWN_C2C92D
	LDY #$AE4B
	LDA a:.LOWORD(RAM),Y
	AND #$00FF
	BEQ UNKNOWN_C2DB3F_UNKNOWN22
	LDX #$0001
	TYA
	JSL UNKNOWN_C2C92D
UNKNOWN_C2DB3F_UNKNOWN22:
	JSL UNKNOWN_C2E6B3_ENTRY2
	LDA .LOWORD(RED_FLASH_DURATION)
	BEQ UNKNOWN_C2DB3F_UNKNOWN24
	LDA .LOWORD(RED_FLASH_DURATION)
	DEC
	STA .LOWORD(RED_FLASH_DURATION)
	LDY #$000C
	JSL DIVISION16S_DIVISOR_POSITIVE
	AND #$0001
	BEQ UNKNOWN_C2DB3F_UNKNOWN23
	LDY #$0004
	LDX #$0000
	LDA #$001F
	JSL SET_BATTLE_SWIRL_COLOUR
	LDX #$003F
	LDA #$0000
	JSL SET_COLOUR_ADDSUB_MODE
	BRA UNKNOWN_C2DB3F_UNKNOWN24
UNKNOWN_C2DB3F_UNKNOWN23:
	LDY #$0000
	TYX
	TYA
	JSL SET_BATTLE_SWIRL_COLOUR
	LDA .LOWORD(UNKNOWN_7EAD8A)
	JSL UNKNOWN_C0AFCD
UNKNOWN_C2DB3F_UNKNOWN24:
	LDA .LOWORD(GREEN_FLASH_DURATION)
	BEQ UNKNOWN_C2DB3F_UNKNOWN26
	LDA .LOWORD(GREEN_FLASH_DURATION)
	DEC
	STA .LOWORD(GREEN_FLASH_DURATION)
	LDY #$000C
	JSL DIVISION16S_DIVISOR_POSITIVE
	AND #$0001
	BEQ UNKNOWN_C2DB3F_UNKNOWN25
	LDY #$0004
	LDX #$001F
	LDA #$0000
	JSL SET_BATTLE_SWIRL_COLOUR
	LDX #$003F
	LDA #$0000
	JSL SET_COLOUR_ADDSUB_MODE
	BRA UNKNOWN_C2DB3F_UNKNOWN26
UNKNOWN_C2DB3F_UNKNOWN25:
	LDY #$0000
	TYX
	TYA
	JSL SET_BATTLE_SWIRL_COLOUR
	LDA .LOWORD(UNKNOWN_7EAD8A)
	JSL UNKNOWN_C0AFCD
UNKNOWN_C2DB3F_UNKNOWN26:
	LDA .LOWORD(HP_PP_BOX_BLINK_DURATION)
	BEQ UNKNOWN_C2DB3F_UNKNOWN28
	LDA .LOWORD(HP_PP_BOX_BLINK_DURATION)
	DEC
	STA .LOWORD(HP_PP_BOX_BLINK_DURATION)
	LDY #$0003
	JSL DIVISION16S_DIVISOR_POSITIVE
	AND #$0001
	BEQ UNKNOWN_C2DB3F_UNKNOWN27
	LDA .LOWORD(HP_PP_BOX_BLINK_TARGET)
	JSL UNKNOWN_C207E1
	BRA UNKNOWN_C2DB3F_UNKNOWN28
UNKNOWN_C2DB3F_UNKNOWN27:
	LDA .LOWORD(HP_PP_BOX_BLINK_TARGET)
	JSL UNKNOWN_C207B6
UNKNOWN_C2DB3F_UNKNOWN28:
	JSL UNKNOWN_C4A7B0
	JSL UNKNOWN_C2FD99
	LDA .LOWORD(UNKNOWN_7EADB6)
	BEQ UNKNOWN_C2DB3F_UNKNOWN33
	LDA .LOWORD(UNKNOWN_7EADB2)
	BEQ UNKNOWN_C2DB3F_UNKNOWN33
	LDA .LOWORD(UNKNOWN_7EADCC)
	CMP #$03BB
	BCS UNKNOWN_C2DB3F_UNKNOWN29
	STZ .LOWORD(UNKNOWN_7EADCC)
	LDA #$00E0
	STA .LOWORD(UNKNOWN_7EADCE)
	STZ .LOWORD(UNKNOWN_7EADB6)
	BRA UNKNOWN_C2DB3F_UNKNOWN30
UNKNOWN_C2DB3F_UNKNOWN29:
	LDA .LOWORD(UNKNOWN_7EADCC)
	SEC
	SBC #$03BB
	STA .LOWORD(UNKNOWN_7EADCC)
	LDA .LOWORD(UNKNOWN_7EADCE)
	CLC
	ADC #$03BB
	STA .LOWORD(UNKNOWN_7EADCE)
UNKNOWN_C2DB3F_UNKNOWN30:
	SEP #PROC_FLAGS::INDEX8
	LDY #$0008
	LDA .LOWORD(UNKNOWN_7EADCC)
	JSL ASR8_UNKNOWN1
	CMP .LOWORD(UNKNOWN_7EADB2)
	BCS UNKNOWN_C2DB3F_UNKNOWN31
	STA .LOWORD(UNKNOWN_7EADB2)
UNKNOWN_C2DB3F_UNKNOWN31:
	LDY #$0008
	LDA .LOWORD(UNKNOWN_7EADCE)
	JSL ASR8_UNKNOWN1
	CMP .LOWORD(UNKNOWN_7EADB4)
	BCC UNKNOWN_C2DB3F_UNKNOWN32
	BEQ UNKNOWN_C2DB3F_UNKNOWN32
	STA .LOWORD(UNKNOWN_7EADB4)
UNKNOWN_C2DB3F_UNKNOWN32:
	JSL UNKNOWN_C2D0AC
UNKNOWN_C2DB3F_UNKNOWN33:
	PLD
	RTL

UNKNOWN_C2DE0F: ;$C2DE0F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEC
	TCD
	LDX #$0000
	BRA UNKNOWN_C2DE0F_UNKNOWN1
UNKNOWN_C2DE0F_UNKNOWN0:
	TXA
	ASL
	CLC
	ADC #.LOWORD(UNKNOWN_7EADD4)
	STA $12
	CLC
	ADC #$000C
	TAY
	LDA a:.LOWORD(RAM),Y
	LSR
	AND #$3DEF
	STA a:.LOWORD(RAM),Y
	LDA $12
	CLC
	ADC #$0083
	TAY
	LDA a:.LOWORD(RAM),Y
	LSR
	AND #$3DEF
	STA a:.LOWORD(RAM),Y
	INX
UNKNOWN_C2DE0F_UNKNOWN1:
	CPX #$0010
	BCC UNKNOWN_C2DE0F_UNKNOWN0
	LDA #.LOWORD(UNKNOWN_7EADE0)
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA $AE20
	JSL MEMCPY16
	LDA $AE4B
	AND #$00FF
	BEQ UNKNOWN_C2DE0F_UNKNOWN2
	LDA #$AE57
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA $AE97
	JSL MEMCPY16
UNKNOWN_C2DE0F_UNKNOWN2:
	PLD
	RTL

UNKNOWN_C2DE96: ;$C2DE96
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEA
	TCD
	LDA #$AE00
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $12
	LDA $08
	STA $14
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA #.LOWORD(UNKNOWN_7EADE0)
	JSL MEMCPY16
	LDA #$AE77
	STA $0A
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $0C
	STZ $0D
	REP #PROC_FLAGS::ACCUM8
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA #$AE57
	JSL MEMCPY16
	LDA $12
	STA $06
	LDA $14
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA $AE20
	JSL MEMCPY16
	LDA $AE4B
	AND #$00FF
	BEQ UNKNOWN_C2DE96_UNKNOWN0
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA $AE97
	JSL MEMCPY16
UNKNOWN_C2DE96_UNKNOWN0:
	PLD
	RTL

UNKNOWN_C2DF2E: ;$C2DF2E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE4
	TCD
	PLA
	STY $1A
	STX $02
	STA $18
	LDA $02
	CMP #$FFFF
	BEQ UNKNOWN_C2DF2E_UNKNOWN0
	LDA $02
	BNE UNKNOWN_C2DF2E_UNKNOWN1
UNKNOWN_C2DF2E_UNKNOWN0:
	LDA $1A
	ASL
	STA $1A
	CLC
	ADC $18
	TAX
	LDA $02
	STA a:.LOWORD(RAM)+12,X
	LDY #$004C
	LDA $1A
	CLC
	ADC ($18),Y
	TAX
	LDA $02
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(UNKNOWN_C2DF2E_UNKNOWN7)
UNKNOWN_C2DF2E_UNKNOWN1:
	LDA $02
	CMP #$0100
	BNE UNKNOWN_C2DF2E_UNKNOWN2
	LDA $1A
	ASL
	STA $16
	CLC
	ADC $18
	TAX
	LDY a:.LOWORD(RAM)+44,X
	STY $14
	TYA
	STA a:.LOWORD(RAM)+12,X
	LDY #$004C
	LDA $16
	CLC
	ADC ($18),Y
	TAX
	LDY $14
	TYA
	STA a:.LOWORD(RAM),X
	JMP a:.LOWORD(UNKNOWN_C2DF2E_UNKNOWN7)
UNKNOWN_C2DF2E_UNKNOWN2:
	LDA $1A
	ASL
	CLC
	ADC $18
	STA $04
	STA $14
	LDX $04
	LDA a:.LOWORD(RAM)+44,X
	STA $16
	AND #$001F
	TAX
	STX $12
	LDA $16
	LSR
	LSR
	LSR
	LSR
	LSR
	AND #$001F
	TAY
	STY $10
	SEP #PROC_FLAGS::ACCUM8
	LDA #$000A
	SEP #PROC_FLAGS::INDEX8
	TAY
	REP #PROC_FLAGS::ACCUM8
	LDA $16
	JSL ASR8_UNKNOWN1
	AND #$001F
	STA $16
	REP #PROC_FLAGS::INDEX8
	LDY $02
	LDX $12
	TXA
	JSL MULT16
	XBA
	AND #$00FF
	TAX
	STX $12
	LDY $10
	TYA
	LDY $02
	JSL MULT16
	XBA
	AND #$00FF
	TAY
	STY $10
	LDY $02
	LDA $16
	JSL MULT16
	XBA
	AND #$00FF
	STA $0E
	SEP #PROC_FLAGS::ACCUM8
	LDA #$000A
	SEP #PROC_FLAGS::INDEX8
	TAY
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	JSL ASL16_ENTRY2
	STA $02
	REP #PROC_FLAGS::INDEX8
	LDY $10
	TYA
	ASL
	ASL
	ASL
	ASL
	ASL
	STA $04
	LDX $12
	TXA
	CLC
	ADC $04
	CLC
	ADC $02
	LDX $14
	STX $04
	STA a:.LOWORD(RAM)+12,X
	LDY #$0003
	LDA ($18),Y
	AND #$00FF
	CMP #$0002
	BNE UNKNOWN_C2DF2E_UNKNOWN4
	LDY #$0006
	LDA ($18),Y
	AND #$00FF
	CMP $1A
	BEQ UNKNOWN_C2DF2E_UNKNOWN3
	BCS UNKNOWN_C2DF2E_UNKNOWN4
UNKNOWN_C2DF2E_UNKNOWN3:
	LDY #$0007
	LDA ($18),Y
	AND #$00FF
	CMP $1A
	BCS UNKNOWN_C2DF2E_UNKNOWN7
UNKNOWN_C2DF2E_UNKNOWN4:
	LDY #$0003
	LDA ($18),Y
	AND #$00FF
	BEQ UNKNOWN_C2DF2E_UNKNOWN6
	LDY #$0004
	LDA ($18),Y
	AND #$00FF
	CMP $1A
	BEQ UNKNOWN_C2DF2E_UNKNOWN5
	BCS UNKNOWN_C2DF2E_UNKNOWN6
UNKNOWN_C2DF2E_UNKNOWN5:
	LDY #$0005
	LDA ($18),Y
	AND #$00FF
	CMP $1A
	BCS UNKNOWN_C2DF2E_UNKNOWN7
UNKNOWN_C2DF2E_UNKNOWN6:
	LDA $1A
	ASL
	STA $1A
	LDY #$004C
	CLC
	ADC ($18),Y
	PHA
	LDA $1A
	CLC
	ADC $18
	TAX
	LDA a:.LOWORD(RAM)+12,X
	PLX
	STA a:.LOWORD(RAM),X
UNKNOWN_C2DF2E_UNKNOWN7:
	PLD
	RTS

UNKNOWN_C2E08E: ;$C2E08E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF2
	TCD
	PLA
	STA $04
	LDA .LOWORD(UNKNOWN_7EADD5)
	AND #$00FF
	CMP #$0004
	BNE UNKNOWN_C2E08E_UNKNOWN2
	LDA #$0001
	STA $02
	BRA UNKNOWN_C2E08E_UNKNOWN1
UNKNOWN_C2E08E_UNKNOWN0:
	LDY $02
	LDX $04
	LDA #.LOWORD(UNKNOWN_7EADD4)
	JSR a:.LOWORD(UNKNOWN_C2DF2E)
	INC $02
UNKNOWN_C2E08E_UNKNOWN1:
	LDA $02
	CMP #$0010
	BCC UNKNOWN_C2E08E_UNKNOWN0
	BRA UNKNOWN_C2E08E_UNKNOWN5
UNKNOWN_C2E08E_UNKNOWN2:
	LDA #$0001
	STA $02
	BRA UNKNOWN_C2E08E_UNKNOWN4
UNKNOWN_C2E08E_UNKNOWN3:
	LDY $02
	LDX $04
	LDA #.LOWORD(UNKNOWN_7EADD4)
	JSR a:.LOWORD(UNKNOWN_C2DF2E)
	LDY $02
	LDX $04
	LDA #$AE4B
	JSR a:.LOWORD(UNKNOWN_C2DF2E)
	INC $02
UNKNOWN_C2E08E_UNKNOWN4:
	LDA $02
	CMP #$0004
	BCC UNKNOWN_C2E08E_UNKNOWN3
UNKNOWN_C2E08E_UNKNOWN5:
	PLD
	RTS

UNKNOWN_C2E0E7: ;$C2E0E7
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	STZ .LOWORD(GREEN_FLASH_DURATION)
	STZ .LOWORD(RED_FLASH_DURATION)
	SEP #PROC_FLAGS::ACCUM8
	STZ $AEC2
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(HP_PP_BOX_BLINK_DURATION)
	BEQ UNKNOWN_C2E0E7_UNKNOWN0
	LDA .LOWORD(HP_PP_BOX_BLINK_TARGET)
	JSL UNKNOWN_C207B6
	STZ .LOWORD(HP_PP_BOX_BLINK_DURATION)
UNKNOWN_C2E0E7_UNKNOWN0:
	LDY #$0000
	TYX
	TYA
	JSL SET_BATTLE_SWIRL_COLOUR
	LDA #$0001
	JSL UNKNOWN_C0AFCD
	RTL

SHOW_PSI_ANIMATION: ;$C2E116
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFD8
	TCD
	PLA
	STA $02
	LDA .LOWORD(UNKNOWN_7EADD5)
	AND #$00FF
	CMP #$0002
	BNE SHOW_PSI_ANIMATION_UNKNOWN1
	LOADPTR UNKNOWN_7F8000, $06
	LDA $06
	STA $24
	LDA $08
	STA $26
	LOADPTR $CC0000, $06
	LDA $02
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	TAX
	LDA f:PSI_ANIM_CFG,X
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDA $24
	STA $06
SHOW_PSI_ANIMATION_UNKNOWN0:
	LDA $26
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DECOMP
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$0000
	LDX #$1000
	SEP #PROC_FLAGS::ACCUM8
	TYA
	JSL TRANSFER_TO_VRAM
	.A16
	LDA #$0260
	STA .LOWORD(UNKNOWN_7E1BCA)
	JMP a:.LOWORD(SHOW_PSI_ANIMATION_UNKNOWN6)
SHOW_PSI_ANIMATION_UNKNOWN1:
	LOADPTR UNKNOWN_7F0000, $06
	LDA $06
	STA $24
	LDA $08
	STA $26
	LOADPTR $CC0000, $06
	LDA $02
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	TAX
	LDA f:PSI_ANIM_CFG,X
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDA $24
	STA $06
	LDA $26
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DECOMP
	LOADPTR UNKNOWN_7F8000, $0A
	LDX #$0000
	JMP a:.LOWORD(SHOW_PSI_ANIMATION_UNKNOWN4)
SHOW_PSI_ANIMATION_UNKNOWN2:
	LDA [$06]
	STA [$0A]
	INC $06
	INC $06
	INC $0A
	INC $0A
	LDA [$06]
	STA [$0A]
	INC $06
	INC $06
	INC $0A
	INC $0A
	LDA [$06]
	STA [$0A]
	INC $06
	INC $06
	INC $0A
	INC $0A
	LDA [$06]
	STA [$0A]
	INC $06
	INC $06
	LDA $06
	STA $24
	LDA $08
	STA $26
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	INC $06
	INC $06
	LDA [$24]
	STA [$06]
	LDA $24
	STA $0A
	LDA $26
	STA $0C
	INC $0A
	INC $0A
	INC $06
	INC $06
	LDA [$0A]
	STA [$06]
	INC $0A
	INC $0A
	INC $06
	INC $06
	LDA $06
	STA $20
	LDA $08
	STA $22
	LDA [$0A]
	STA [$06]
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	INC $06
	INC $06
	LDA $06
	STA $1C
	LDA $08
	STA $1E
	LDA $20
	STA $06
	LDA $22
	STA $08
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	INC $0A
	INC $0A
	LDA [$1C]
	STA [$0A]
	LDA $1C
	STA $06
	LDA $1E
	STA $08
	INC $06
	INC $06
	INC $0A
	INC $0A
	LDA #$0000
	STA [$0A]
	INC $0A
	INC $0A
	STA [$0A]
	INC $0A
	INC $0A
	STA [$0A]
	INC $0A
	INC $0A
	STA [$0A]
	INC $0A
	INC $0A
	STA [$0A]
	INC $0A
	INC $0A
	STA [$0A]
	INC $0A
	INC $0A
	STA [$0A]
	INC $0A
	INC $0A
	STA [$0A]
	INC $0A
	INC $0A
	INX
SHOW_PSI_ANIMATION_UNKNOWN4:
	CPX #$0100
	BCS SHOW_PSI_ANIMATION_UNKNOWN5
	BEQ SHOW_PSI_ANIMATION_UNKNOWN5
	JMP a:.LOWORD(SHOW_PSI_ANIMATION_UNKNOWN2)
SHOW_PSI_ANIMATION_UNKNOWN5:
	LOADPTR UNKNOWN_7F8000, $0E
	LDY #$0000
	LDX #$2000
	SEP #PROC_FLAGS::ACCUM8
	TYA
	JSL TRANSFER_TO_VRAM
	.A16
	LDA #$0280
	STA .LOWORD(UNKNOWN_7E1BCA)
SHOW_PSI_ANIMATION_UNKNOWN6:
	JSL READ_JOYPAD
	LOADPTR PSI_ANIM_PALETTES, $06
	LDA $02
	ASL
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0008
	LDA #$1BAA
	JSL MEMCPY16
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0008
	LDA .LOWORD(UNKNOWN_7E1BCA)
	JSL MEMCPY16
	LOADPTR UNKNOWN_7F0000, $0A
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	LDA $06
	STA .LOWORD(UNKNOWN_7E1BA1)
	LDA $08
	STA .LOWORD(UNKNOWN_7E1BA3)
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA .LOWORD(UNKNOWN_7E1B9E)
	REP #PROC_FLAGS::ACCUM8
	LOADPTR PSI_ANIM_CFG, $06
	LDA $06
	STA $24
	LDA $08
	STA $26
	LDA $02
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	STA $1A
	INC
	INC
	CLC
	ADC $06
	STA $06
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	STA .LOWORD(UNKNOWN_7E1B9E)+1
	REP #PROC_FLAGS::ACCUM8
	LDA $1A
	CLC
	ADC #$0006
	LDX $24
	STX $06
	LDX $26
	STX $08
	CLC
	ADC $06
	STA $06
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	STA .LOWORD(UNKNOWN_7E1BA0)
	REP #PROC_FLAGS::ACCUM8
	LDA $1A
	INC
	INC
	INC
	LDX $24
	STX $06
	LDX $26
	STX $08
	CLC
	ADC $06
	STA $06
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	STA .LOWORD(UNKNOWN_7E1BA8)
	REP #PROC_FLAGS::ACCUM8
	LDA $1A
	INC
	INC
	INC
	INC
	LDX $24
	STX $06
	LDX $26
	STX $08
	CLC
	ADC $06
	STA $06
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	STA .LOWORD(UNKNOWN_7E1BA5)
	REP #PROC_FLAGS::ACCUM8
	LDA $1A
	CLC
	ADC #$0005
	LDX $24
	STX $06
	LDX $26
	STX $08
	CLC
	ADC $06
	STA $06
	SEP #PROC_FLAGS::ACCUM8
	LDA [$06]
	STA .LOWORD(UNKNOWN_7E1BA6)
	STZ .LOWORD(UNKNOWN_7E1BA7)
	LDA #$0001
	STA .LOWORD(UNKNOWN_7E1BA9)
	REP #PROC_FLAGS::ACCUM8
	LDA $1A
	CLC
	ADC #$0008
	LDX $24
	STX $06
	LDX $26
	STX $08
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	STA .LOWORD(UNKNOWN_7E1BCC)
	LDA $1A
	CLC
	ADC #$0009
	LDX $24
	STX $06
	LDX $26
	STX $08
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	STA .LOWORD(UNKNOWN_7E1BCE)
	LDA $1A
	CLC
	ADC #$000A
	LDX $24
	STX $06
	LDX $26
	STX $08
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$001F
	STA .LOWORD(UNKNOWN_7E1BD0)
	LDA [$06]
	LSR
	LSR
	LSR
	LSR
	LSR
	AND #$001F
	STA .LOWORD(UNKNOWN_7E1BD2)
	SEP #PROC_FLAGS::INDEX8
	LDY #$000A
	LDA [$06]
	JSL ASR8_UNKNOWN1
	AND #$001F
	STA .LOWORD(UNKNOWN_7E1BD4)
	LOADPTR PSI_ANIM_POINTERS, $06
	LDA $02
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	REP #PROC_FLAGS::INDEX8
	LDY #$0002
	LDA [$06],Y
	TAY
	LDA [$06]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DECOMP
	JSL UNKNOWN_C2DE0F
	LDA #$0300
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0080
	LDA #$0380
	JSL MEMCPY16
	LDA #$0000
	STA $1A
	BRA SHOW_PSI_ANIMATION_UNKNOWN8
SHOW_PSI_ANIMATION_UNKNOWN7:
	ASL
	TAX
	STZ $AEE7,X
	LDA $1A
	INC
	STA $1A
SHOW_PSI_ANIMATION_UNKNOWN8:
	CMP #$0004
	BCC SHOW_PSI_ANIMATION_UNKNOWN7
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BNE SHOW_PSI_ANIMATION_UNKNOWN9
	JMP a:.LOWORD(SHOW_PSI_ANIMATION_UNKNOWN26)
SHOW_PSI_ANIMATION_UNKNOWN9:
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BEQ SHOW_PSI_ANIMATION_UNKNOWN10
	JMP a:.LOWORD(SHOW_PSI_ANIMATION_UNKNOWN26)
SHOW_PSI_ANIMATION_UNKNOWN10:
	STZ .LOWORD(UNKNOWN_7EAD9A)
	LDA $02
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	CLC
	ADC #$0007
	TAX
	LDA f:PSI_ANIM_CFG,X
	AND #$00FF
	BEQ SHOW_PSI_ANIMATION_UNKNOWN12
	CMP #$0003
	BEQ SHOW_PSI_ANIMATION_UNKNOWN12
	CMP #$0001
	BEQ SHOW_PSI_ANIMATION_UNKNOWN14
	CMP #$0002
	BNE SHOW_PSI_ANIMATION_UNKNOWN11
	JMP a:.LOWORD(SHOW_PSI_ANIMATION_UNKNOWN20)
SHOW_PSI_ANIMATION_UNKNOWN11:
	JMP a:.LOWORD(SHOW_PSI_ANIMATION_UNKNOWN24)
SHOW_PSI_ANIMATION_UNKNOWN12:
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	STA $02
	LDA #$0080
	SEC
	SBC $02
	STA .LOWORD(UNKNOWN_7EAD9A)
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+69,X
	AND #$00FF
	STA $02
	LDA #$0090
	SEC
	SBC $02
	STA .LOWORD(UNKNOWN_7EAD9C)
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+2,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_HEIGHT)
	CMP #$0008
	BNE SHOW_PSI_ANIMATION_UNKNOWN13
	LDA .LOWORD(UNKNOWN_7EAD9C)
	CLC
	ADC #$0010
	STA .LOWORD(UNKNOWN_7EAD9C)
SHOW_PSI_ANIMATION_UNKNOWN13:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	LDX .LOWORD(CURRENT_TARGET)
	STA a:.LOWORD(RAM)+75,X
	LDX .LOWORD(CURRENT_TARGET)
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+67,X
	AND #$00FF
	ASL
	TAX
	LDA #$0001
	STA $AEE7,X
	JMP a:.LOWORD(SHOW_PSI_ANIMATION_UNKNOWN24)
SHOW_PSI_ANIMATION_UNKNOWN14:
	LDX .LOWORD(CURRENT_TARGET)
	LDA a:.LOWORD(RAM)+69,X
	AND #$00FF
	STA $02
	LDA #$0090
	SEC
	SBC $02
	STA .LOWORD(UNKNOWN_7EAD9C)
	LDY #$0000
	STY $1A
	LDA #$A21C
	STA $02
	LDX #$0008
	STX $18
	BRA SHOW_PSI_ANIMATION_UNKNOWN18
SHOW_PSI_ANIMATION_UNKNOWN15:
	LDX $02
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BEQ SHOW_PSI_ANIMATION_UNKNOWN17
	LDX $02
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BNE SHOW_PSI_ANIMATION_UNKNOWN17
	LDX $02
	LDA a:.LOWORD(RAM)+29,X
	AND #$00FF
	CMP #$0001
	BEQ SHOW_PSI_ANIMATION_UNKNOWN17
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+69,X
	LDX .LOWORD(CURRENT_TARGET)
	CMP a:.LOWORD(RAM)+69,X
	BNE SHOW_PSI_ANIMATION_UNKNOWN17
	LDX $02
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+2,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_HEIGHT)
	CMP #$0008
	BNE SHOW_PSI_ANIMATION_UNKNOWN16
	LDY #$0001
	STY $1A
SHOW_PSI_ANIMATION_UNKNOWN16:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	LDX $02
	STA a:.LOWORD(RAM)+75,X
	LDX $02
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+67,X
	AND #$00FF
	ASL
	TAX
	LDA #$0001
	STA $AEE7,X
SHOW_PSI_ANIMATION_UNKNOWN17:
	REP #PROC_FLAGS::ACCUM8
	LDA $02
	CLC
	ADC #$004E
	STA $02
	LDX $18
	INX
	STX $18
SHOW_PSI_ANIMATION_UNKNOWN18:
	CPX #$0020
	BCS SHOW_PSI_ANIMATION_UNKNOWN19
	BEQ SHOW_PSI_ANIMATION_UNKNOWN19
	JMP a:.LOWORD(SHOW_PSI_ANIMATION_UNKNOWN15)
SHOW_PSI_ANIMATION_UNKNOWN19:
	LDY $1A
	BEQ SHOW_PSI_ANIMATION_UNKNOWN24
	LDA .LOWORD(UNKNOWN_7EAD9C)
	CLC
	ADC #$0010
	STA .LOWORD(UNKNOWN_7EAD9C)
	BRA SHOW_PSI_ANIMATION_UNKNOWN24
SHOW_PSI_ANIMATION_UNKNOWN20:
	LDA #$0010
	STA .LOWORD(UNKNOWN_7EAD9C)
	LDY #$A21C
	LDX #$0008
	STX $16
	BRA SHOW_PSI_ANIMATION_UNKNOWN23
SHOW_PSI_ANIMATION_UNKNOWN21:
	LDA a:.LOWORD(RAM)+12,Y
	AND #$00FF
	BEQ SHOW_PSI_ANIMATION_UNKNOWN22
	LDA a:.LOWORD(RAM)+14,Y
	AND #$00FF
	CMP #$0001
	BNE SHOW_PSI_ANIMATION_UNKNOWN22
	LDA a:.LOWORD(RAM)+29,Y
	AND #$00FF
	CMP #$0001
	BEQ SHOW_PSI_ANIMATION_UNKNOWN22
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA a:.LOWORD(RAM)+75,Y
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+67,Y
	AND #$00FF
	ASL
	TAX
	LDA #$0001
	STA $AEE7,X
SHOW_PSI_ANIMATION_UNKNOWN22:
	TYA
	CLC
	ADC #$004E
	TAY
	LDX $16
	INX
	STX $16
SHOW_PSI_ANIMATION_UNKNOWN23:
	CPX #$0020
	BCC SHOW_PSI_ANIMATION_UNKNOWN21
SHOW_PSI_ANIMATION_UNKNOWN24:
	LDA .LOWORD(UNKNOWN_7EADD5)
	AND #$00FF
	CMP #$0002
	BNE SHOW_PSI_ANIMATION_UNKNOWN25
	LDA .LOWORD(UNKNOWN_7EAD9A)
	STA a:.LOWORD(BG2_X_POS)
	LDA .LOWORD(UNKNOWN_7EAD9C)
	STA a:.LOWORD(BG2_Y_POS)
	BRA SHOW_PSI_ANIMATION_UNKNOWN26
SHOW_PSI_ANIMATION_UNKNOWN25:
	LDA .LOWORD(UNKNOWN_7EAD9A)
	STA a:.LOWORD(BG1_X_POS)
	LDA .LOWORD(UNKNOWN_7EAD9C)
	STA a:.LOWORD(BG1_Y_POS)
SHOW_PSI_ANIMATION_UNKNOWN26:
	PLD
	RTL

UNKNOWN_C2E6B3: ;$C2E6B3
	.BYTE $30, $00, $00
UNKNOWN_C2E6B3_ENTRY2: ;$C2E6B6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE5
	TCD
	LDA .LOWORD(UNKNOWN_7E1B9E)
	AND #$00FF
	BNE UNKNOWN_C2E6B3_UNKNOWN1
	JMP a:.LOWORD(UNKNOWN_C2E6B3_UNKNOWN12)
UNKNOWN_C2E6B3_UNKNOWN1:
	LDX #.LOWORD(UNKNOWN_7E1B9E)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	DEC
	STA .LOWORD(UNKNOWN_7E1B9E)
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BEQ UNKNOWN_C2E6B3_UNKNOWN2
	JMP a:.LOWORD(UNKNOWN_C2E6B3_UNKNOWN4)
UNKNOWN_C2E6B3_UNKNOWN2:
	LDA #.LOWORD(UNKNOWN_7E1BA0)
	STA $04
	LDX $04
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BEQ UNKNOWN_C2E6B3_UNKNOWN3
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7E1B9E)+1
	STA .LOWORD(UNKNOWN_7E1B9E)
	REP #PROC_FLAGS::ACCUM8
	LDA #.LOWORD(UNKNOWN_7E1BA1)
	STA $02
	LDY $02
	LDA a:.LOWORD(RAM),Y
	STA $06
	LDA a:.LOWORD(RAM)+2,Y
	STA $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDY #$5800
	LDX #$0400
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0006
	JSL UNKNOWN_C08616
	.A16
	LOADPTR UNKNOWN_C2E6B3, $0E
	LDY #$5800
	LDX #$0400
	SEP #PROC_FLAGS::ACCUM8
	LDA #$000F
	JSL UNKNOWN_C08616
	.A16
	LDY $02
	LDA a:.LOWORD(RAM),Y
	STA $06
	LDA a:.LOWORD(RAM)+2,Y
	STA $08
	LDA #$0400
	CLC
	ADC $06
	STA $06
	LDY $02
	LDA $06
	STA a:.LOWORD(RAM),Y
	LDA $08
	STA a:.LOWORD(RAM)+2,Y
	LDX $04
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	DEC
	LDX $04
	STA a:.LOWORD(RAM),X
	BRA UNKNOWN_C2E6B3_UNKNOWN4
UNKNOWN_C2E6B3_UNKNOWN3:
	.A16
	LOADPTR UNKNOWN_C2E6B3+1, $0E
	LDY #$5800
	LDX #$0800
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0003
	JSL UNKNOWN_C08616
	JSL UNKNOWN_C2DE96
UNKNOWN_C2E6B3_UNKNOWN4:
	LDX #.LOWORD(UNKNOWN_7E1BA9)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	STA $1A
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BNE UNKNOWN_C2E6B3_UNKNOWN5
	JMP a:.LOWORD(UNKNOWN_C2E6B3_UNKNOWN12)
UNKNOWN_C2E6B3_UNKNOWN5:
	SEP #PROC_FLAGS::ACCUM8
	LDA $1A
	DEC
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	BEQ UNKNOWN_C2E6B3_UNKNOWN6
	JMP a:.LOWORD(UNKNOWN_C2E6B3_UNKNOWN12)
UNKNOWN_C2E6B3_UNKNOWN6:
	SEP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7E1BA8)
	STA a:.LOWORD(RAM),X
	LDA .LOWORD(UNKNOWN_7E1BA6)
	SEC
	SBC .LOWORD(UNKNOWN_7E1BA5)
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	STA $02
	INC $02
	LDX #$0000
	STX $18
	BRA UNKNOWN_C2E6B3_UNKNOWN10
UNKNOWN_C2E6B3_UNKNOWN7:
	LDA .LOWORD(UNKNOWN_7E1BA7)
	AND #$00FF
	STA $04
	TXA
	CMP $04
	BCS UNKNOWN_C2E6B3_UNKNOWN8
	TXA
	CLC
	ADC $02
	SEC
	SBC $04
	STA $04
	STA $16
	BRA UNKNOWN_C2E6B3_UNKNOWN9
UNKNOWN_C2E6B3_UNKNOWN8:
	TXA
	SEC
	SBC $04
	STA $04
	STA $16
UNKNOWN_C2E6B3_UNKNOWN9:
	LDA .LOWORD(UNKNOWN_7E1BA5)
	AND #$00FF
	STA $14
	STX $04
	CLC
	ADC $04
	ASL
	CLC
	ADC .LOWORD(UNKNOWN_7E1BCA)
	PHA
	LDA $16
	STA $04
	LDA $14
	CLC
	ADC $04
	ASL
	TAX
	LDA .LOWORD(UNKNOWN_7E1BAA),X
	PLX
	STA a:.LOWORD(RAM),X
	LDX $18
	INX
	STX $18
UNKNOWN_C2E6B3_UNKNOWN10:
	TXA
	CMP $02
	BCC UNKNOWN_C2E6B3_UNKNOWN7
	LDX #.LOWORD(UNKNOWN_7E1BA7)
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	INC
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CMP $02
	BCC UNKNOWN_C2E6B3_UNKNOWN11
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
UNKNOWN_C2E6B3_UNKNOWN11:
	REP #PROC_FLAGS::ACCUM8
	LDA #$0018
	JSL UNKNOWN_C0856B
UNKNOWN_C2E6B3_UNKNOWN12:
	LDX #.LOWORD(UNKNOWN_7E1BCC)
	LDA a:.LOWORD(RAM),X
	BEQ UNKNOWN_C2E6B3_UNKNOWN18
	DEC
	STA a:.LOWORD(RAM),X
	BNE UNKNOWN_C2E6B3_UNKNOWN18
	LDA #$0014
	JSL UNKNOWN_C2FAD8
	LDA #$0000
	STA $02
	BRA UNKNOWN_C2E6B3_UNKNOWN17
UNKNOWN_C2E6B3_UNKNOWN13:
	LDA $02
	ASL
	TAX
	LDA $AEE7,X
	BEQ UNKNOWN_C2E6B3_UNKNOWN16
	LDA #$0001
	STA $04
	BRA UNKNOWN_C2E6B3_UNKNOWN15
UNKNOWN_C2E6B3_UNKNOWN14:
	LDA .LOWORD(UNKNOWN_7E1BD4)
	STA $0E
	LDY .LOWORD(UNKNOWN_7E1BD2)
	LDX .LOWORD(UNKNOWN_7E1BD0)
	LDA $02
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC $04
	JSL UNKNOWN_C2FB35
	INC $04
UNKNOWN_C2E6B3_UNKNOWN15:
	LDA $04
	CMP #$0010
	BCC UNKNOWN_C2E6B3_UNKNOWN14
UNKNOWN_C2E6B3_UNKNOWN16:
	INC $02
UNKNOWN_C2E6B3_UNKNOWN17:
	LDA $02
	CMP #$0004
	BCC UNKNOWN_C2E6B3_UNKNOWN13
UNKNOWN_C2E6B3_UNKNOWN18:
	LDX #.LOWORD(UNKNOWN_7E1BCE)
	LDA a:.LOWORD(RAM),X
	BEQ UNKNOWN_C2E6B3_UNKNOWN22
	DEC
	STA a:.LOWORD(RAM),X
	BNE UNKNOWN_C2E6B3_UNKNOWN22
	LDY #$0000
	STY $12
	BRA UNKNOWN_C2E6B3_UNKNOWN21
UNKNOWN_C2E6B3_UNKNOWN19:
	TYA
	ASL
	TAX
	LDA $AEE7,X
	BEQ UNKNOWN_C2E6B3_UNKNOWN20
	TYX
	LDA #$0014
	JSL UNKNOWN_C2FADE
UNKNOWN_C2E6B3_UNKNOWN20:
	LDY $12
	INY
	STY $12
UNKNOWN_C2E6B3_UNKNOWN21:
	CPY #$0004
	BCC UNKNOWN_C2E6B3_UNKNOWN19
UNKNOWN_C2E6B3_UNKNOWN22:
	PLD
	RTL

UNKNOWN_C2E8C4: ;$C2E8C4
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF2
	TCD
	PLA
	STY $02
	TAY
	JSL UNKNOWN_C4A67E
	LDA $02
	SEP #PROC_FLAGS::ACCUM8
	STA $AECA
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

UNKNOWN_C2E8E0: ;$C2E8E0
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA #$0001
	STA $16
	LDA #$0004
	STA $14
	STA $04
	LDY #$0000
	STY $12
	LDA .LOWORD(BATTLE_INITIATIVE)
	BEQ @UNKNOWN0
	CMP #$0001
	BEQ @UNKNOWN1
	CMP #$0002
	BEQ @UNKNOWN2
	BRA @UNKNOWN3
@UNKNOWN0:
	LDX #$00B0
	STX $10
	LDA #$000E
	STA $02
	STA $0E
	BRA @UNKNOWN3
@UNKNOWN1:
	LDX #$00B0
	STX $10
	LDA #$001C
	STA $14
	LDA #$0005
	STA $04
	LDY #$000C
	STY $12
	LDA #$0006
	STA $02
	STA $0E
	BRA @UNKNOWN3
@UNKNOWN2:
	LDX #$0009
	STX $10
	STZ $14
	LDA #$001F
	STA $04
	TAY
	STY $12
	LDA #$0006
	STA $02
	STA $0E
@UNKNOWN3:
	LDA .LOWORD(CURRENT_BATTLE_GROUP)
	CMP #$01C0
	BCC @UNKNOWN4
	LDA #$0003
	STA $16
	LDA #$000E
	STA $02
	STA $0E
	LDX #$0008
	STX $10
@UNKNOWN4:
	LDX $10
	TXA
	JSL CHANGE_MUSIC
	JSL UNKNOWN_C04F47
	LDA $0E
	STA $02
	AND #$0004
	BEQ @UNKNOWN6
	LDY $12
	LDX $04
	LDA $14
	JSL SET_BATTLE_SWIRL_COLOUR
	LDA $02
	AND #$0008
	BEQ @UNKNOWN5
	LDX #$00FF
	LDA #$0010
	JSL SET_COLOUR_ADDSUB_MODE
	BRA @UNKNOWN6
@UNKNOWN5:
	LDX #$00BF
	LDA #$0010
	JSL SET_COLOUR_ADDSUB_MODE
@UNKNOWN6:
	LDY #$001E
	LDX $02
	LDA $16
	JSL UNKNOWN_C2E8C4
	LDA $02
	AND #$0004
	BEQ @UNKNOWN7
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0020
	STA $AEC8
	BRA @UNKNOWN8
@UNKNOWN7:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$000F
	STA $AEC8
@UNKNOWN8:
	STZ $AECB
	REP #PROC_FLAGS::ACCUM8
	PLD
	RTL

UNKNOWN_C2E9C8: ;$C2E9C8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA $AEC2
	AND #$00FF
	BEQ UNKNOWN_C2E9C8_UNKNOWN2
	LDA $AECA
	AND #$00FF
	CLC
	SBC #$0004
	BVC UNKNOWN_C2E9C8_UNKNOWN0
	BPL UNKNOWN_C2E9C8_UNKNOWN2
	BRA UNKNOWN_C2E9C8_UNKNOWN1
UNKNOWN_C2E9C8_UNKNOWN0:
	BMI UNKNOWN_C2E9C8_UNKNOWN2
UNKNOWN_C2E9C8_UNKNOWN1:
	LDA #$0001
	BRA UNKNOWN_C2E9C8_UNKNOWN3
UNKNOWN_C2E9C8_UNKNOWN2:
	LDA #$0000
UNKNOWN_C2E9C8_UNKNOWN3:
	RTL

UNKNOWN_C2E9ED: ;$C2E9ED
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	SEP #PROC_FLAGS::ACCUM8
	STZ $AEC2
	REP #PROC_FLAGS::ACCUM8
	LDA $AEC9
	AND #$00FF
	INC
	INC
	INC
	JSL UNKNOWN_C0AE34
	LDY #$0000
	TYX
	TYA
	JSL SET_BATTLE_SWIRL_COLOUR
	LDX #$0000
	TXA
	JSL SET_WINDOW_MASK
	RTL

UNKNOWN_C2EA15: ;$C2EA15
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF0
	TCD
	PLA
	TAY
	STY $0E
	TYA
	SEP #PROC_FLAGS::ACCUM8
	STA $AEEF
	LDX #$0000
	REP #PROC_FLAGS::ACCUM8
	TXA
	JSL UNKNOWN_C4A67E
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0013
	STA $AEC8
	LDY $0E
	REP #PROC_FLAGS::ACCUM8
	TYA
	CMP #$0002
	BEQ UNKNOWN_C2EA15_UNKNOWN0
	CMP #$0001
	BEQ UNKNOWN_C2EA15_UNKNOWN1
	BRA UNKNOWN_C2EA15_UNKNOWN2
UNKNOWN_C2EA15_UNKNOWN0:
	LDA #$F819
	STA .LOWORD(UNKNOWN_7EAECC)
	LDA #$00C3
	STA $AECE
	BRA UNKNOWN_C2EA15_UNKNOWN3
UNKNOWN_C2EA15_UNKNOWN1:
	LDA #$A5FA
	STA .LOWORD(UNKNOWN_7EAECC)
	LDA #$00C4
	STA $AECE
	BRA UNKNOWN_C2EA15_UNKNOWN3
UNKNOWN_C2EA15_UNKNOWN2:
	LDA #$A5CE
	STA .LOWORD(UNKNOWN_7EAECC)
	LDA #$00C4
	STA $AECE
UNKNOWN_C2EA15_UNKNOWN3:
	PLD
	RTL

UNKNOWN_C2EA74: ;$C2EA74
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDX #$0000
	TXA
	JSL UNKNOWN_C4A67E
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0013
	STA $AEC8
	REP #PROC_FLAGS::ACCUM8
	LDA $AEEF
	AND #$00FF
	BEQ UNKNOWN_C2EA74_UNKNOWN0
	LDA #$A652
	STA $AECC
	LDA #$00C4
	STA $AECE
	BRA UNKNOWN_C2EA74_UNKNOWN1
UNKNOWN_C2EA74_UNKNOWN0:
	LDA #$A626
	STA $AECC
	LDA #$00C4
	STA $AECE
UNKNOWN_C2EA74_UNKNOWN1:
	RTL

UNKNOWN_C2EAAA: ;$C2EAAA
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	SEP #PROC_FLAGS::ACCUM8
	STZ $AEC2
	REP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA $AECC
	LDA #$0000
	STA $AECE
	LDA #$0003
	JSL UNKNOWN_C0AE34
	LDX #$0000
	TXA
	JSL SET_WINDOW_MASK
	RTL

UNKNOWN_C2EACF: ;$C2EACF
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA .LOWORD(UNKNOWN_7E1B9E)
	AND #$00FF
	BNE UNKNOWN_C2EACF_UNKNOWN0
	LDA $AEC2
	AND #$00FF
	BEQ UNKNOWN_C2EACF_UNKNOWN1
UNKNOWN_C2EACF_UNKNOWN0:
	LDA #$0001
	BRA UNKNOWN_C2EACF_UNKNOWN2
UNKNOWN_C2EACF_UNKNOWN1:
	LDA #$0000
UNKNOWN_C2EACF_UNKNOWN2:
	RTL

UNKNOWN_C2EAEA: ;$C2EAEA
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFD6
	TCD
	PLA
	TAX
	STX $28
	LDA .LOWORD(UNKNOWN_7EAAB4)
	ASL
	TAX
	LDA .LOWORD(UNKNOWN_7EAAB2)
	STA .LOWORD(UNKNOWN_7EAAB6),X
	LDA .LOWORD(UNKNOWN_7EAAB4)
	STA $04
	ASL
	ASL
	ADC $04
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC #.LOWORD(UNKNOWN_7EAAD6)
	STA $26
	LDX $28
	TXA
	DEC
	STA $04
	STA $28
	LDY #$0001
	STY $24
	TYA
	STA $02
	STA $22
	LDX #$0000
	STX $20
	JMP a:.LOWORD(UNKNOWN_C2EAEA_UNKNOWN1)
UNKNOWN_C2EAEA_UNKNOWN0:
	REP #PROC_FLAGS::ACCUM8
	TXA
	STA $04
	ASL
	ASL
	ADC $04
	STA $1E
	TAY
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00E0
	STA ($26),Y
	REP #PROC_FLAGS::ACCUM8
	LOADPTR $C3F8B1, $06
	LDA $1E
	TAY
	INY
	TXA
	CLC
	ADC .LOWORD(UNKNOWN_7EAAB2)
	ASL
	PHA
	LDA $06
	STA $0A
	LDA $08
	STA $0C
	PLA
	CLC
	ADC $0A
	STA $0A
	SEP #PROC_FLAGS::ACCUM8
	LDA [$0A]
	STA ($26),Y
	LDA #$0008
	PHA
	REP #PROC_FLAGS::ACCUM8
	TXA
	CLC
	ADC .LOWORD(UNKNOWN_7EAAB2)
	ASL
	CLC
	ADC $06
	STA $06
	LDA [$06]
	SEP #PROC_FLAGS::INDEX8
	PLY
	JSL ASR8_UNKNOWN1
	SEP #PROC_FLAGS::ACCUM8
	STA $00
	LDA .LOWORD(UNKNOWN_7EAAB4)
	ASL
	CLC
	ADC $00
	CLC
	ADC #$0020
	PHA
	REP #PROC_FLAGS::ACCUM8
	LDA $1E
	REP #PROC_FLAGS::INDEX8
	TAY
	INY
	INY
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA ($26),Y
	REP #PROC_FLAGS::ACCUM8
	LDA $1E
	TAY
	INY
	INY
	INY
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00F0
	STA ($26),Y
	REP #PROC_FLAGS::ACCUM8
	LDA $1E
	TAY
	INY
	INY
	INY
	INY
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA ($26),Y
	LDX $20
	INX
	STX $20
UNKNOWN_C2EAEA_UNKNOWN1:
	CPX #$0010
	BCS UNKNOWN_C2EAEA_UNKNOWN2
	BEQ UNKNOWN_C2EAEA_UNKNOWN2
	JMP a:.LOWORD(UNKNOWN_C2EAEA_UNKNOWN0)
UNKNOWN_C2EAEA_UNKNOWN2:
	REP #PROC_FLAGS::ACCUM8
	LDA $28
	STA $04
	STA $04
	ASL
	ASL
	ADC $04
	TAX
	INX
	INX
	INX
	INX
	LDA f:BATTLE_SPRITES_POINTERS,X
	AND #$00FF
	CMP #$0002
	BEQ UNKNOWN_C2EAEA_UNKNOWN4
	CMP #$0003
	BEQ UNKNOWN_C2EAEA_UNKNOWN5
	CMP #$0004
	BEQ UNKNOWN_C2EAEA_UNKNOWN6
	CMP #$0005
	BEQ UNKNOWN_C2EAEA_UNKNOWN7
	CMP #$0006
	BNE UNKNOWN_C2EAEA_UNKNOWN3
	JMP a:.LOWORD(UNKNOWN_C2EAEA_UNKNOWN8)
UNKNOWN_C2EAEA_UNKNOWN3:
	JMP a:.LOWORD(UNKNOWN_C2EAEA_UNKNOWN9)
UNKNOWN_C2EAEA_UNKNOWN4:
	LDA #$0002
	STA $02
	STA $22
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00E0
	LDY #$0003
	STA ($26),Y
	LDX $26
	STZ a:.LOWORD(RAM)+8,X
	JMP a:.LOWORD(UNKNOWN_C2EAEA_UNKNOWN9)
UNKNOWN_C2EAEA_UNKNOWN5:
	LDY #$0002
	STY $24
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00C0
	STA ($26)
	JMP a:.LOWORD(UNKNOWN_C2EAEA_UNKNOWN9)
UNKNOWN_C2EAEA_UNKNOWN6:
	LDY #$0002
	STY $24
	STY $02
	LDA $02
	STA $22
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00C0
	LDY #$0005
	STA ($26),Y
	STA ($26)
	LDA #$00E0
	LDY #$000D
	STA ($26),Y
	LDY #$0003
	STA ($26),Y
	LDA #$0000
	LDY #$0012
	STA ($26),Y
	LDY #$0008
	STA ($26),Y
	JMP a:.LOWORD(UNKNOWN_C2EAEA_UNKNOWN9)
UNKNOWN_C2EAEA_UNKNOWN7:
	.A16
	LDA #$0004
	STA $02
	STA $22
	LDY #$0002
	STY $24
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00C0
	LDY #$000F
	STA ($26),Y
	LDY #$000A
	STA ($26),Y
	LDY #$0005
	STA ($26),Y
	STA ($26)
	LDY #$0017
	STA ($26),Y
	LDY #$0003
	STA ($26),Y
	LDA #$00E0
	LDY #$001C
	STA ($26),Y
	LDY #$0008
	STA ($26),Y
	LDA #$0000
	LDY #$0021
	STA ($26),Y
	LDY #$000D
	STA ($26),Y
	LDA #$0020
	LDY #$0026
	STA ($26),Y
	LDY #$0012
	STA ($26),Y
	JMP a:.LOWORD(UNKNOWN_C2EAEA_UNKNOWN9)
UNKNOWN_C2EAEA_UNKNOWN8:
	LDY #$0004
	STY $24
	TYA
	STA $02
	STA $22
	SEP #PROC_FLAGS::ACCUM8
	LDA #$00A0
	LDY #$000F
	STA ($26),Y
	LDY #$000A
	STA ($26),Y
	LDY #$0005
	STA ($26),Y
	STA ($26)
	LDA #$00C0
	LDY #$0023
	STA ($26),Y
	LDY #$001E
	STA ($26),Y
	LDY #$0019
	STA ($26),Y
	LDY #$0014
	STA ($26),Y
	LDX $26
	STZ a:.LOWORD(RAM)+75,X
	LDX $26
	STZ a:.LOWORD(RAM)+70,X
	LDX $26
	STZ a:.LOWORD(RAM)+65,X
	LDX $26
	STZ a:.LOWORD(RAM)+60,X
	LDY #$003F
	STA ($26),Y
	LDY #$002B
	STA ($26),Y
	LDY #$0017
	STA ($26),Y
	LDY #$0003
	STA ($26),Y
	LDA #$00E0
	LDY #$0044
	STA ($26),Y
	LDY #$0030
	STA ($26),Y
	LDY #$001C
	STA ($26),Y
	LDY #$0008
	STA ($26),Y
	LDX $26
	STZ a:.LOWORD(RAM)+73,X
	LDX $26
	STZ a:.LOWORD(RAM)+53,X
	LDX $26
	STZ a:.LOWORD(RAM)+33,X
	LDX $26
	STZ a:.LOWORD(RAM)+13,X
	LDA #$0020
	LDY #$004E
	STA ($26),Y
	LDY #$003A
	STA ($26),Y
	LDY #$0026
	STA ($26),Y
	LDY #$0012
	STA ($26),Y
UNKNOWN_C2EAEA_UNKNOWN9:
	LDY $24
	REP #PROC_FLAGS::ACCUM8
	LDA $02
	JSL MULT16
	STA $04
	ASL
	ASL
	ADC $04
	TAY
	DEY
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0081
	STA ($26),Y
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(UNKNOWN_7EAAB4)
	STA $04
	ASL
	ASL
	ADC $04
	ASL
	ASL
	ASL
	ASL
	STA $1E
	LDA #$AC16
	STA $26
	LDA $1E
	CLC
	ADC #.LOWORD(UNKNOWN_7EAAD6)
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0050
	LDA $1E
	CLC
	ADC $26
	JSL MEMCPY16
	LDA .LOWORD(UNKNOWN_7EAAB4)
	STA $04
	ASL
	ASL
	ADC $04
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC $26
	STA $1E
	LDX #$0000
	BRA UNKNOWN_C2EAEA_UNKNOWN11
UNKNOWN_C2EAEA_UNKNOWN10:
	REP #PROC_FLAGS::ACCUM8
	TXA
	STA $04
	ASL
	ASL
	ADC $04
	STA $02
	INC $02
	INC $02
	LDA $1E
	CLC
	ADC $02
	STA $20
	SEP #PROC_FLAGS::ACCUM8
	LDA ($20)
	CLC
	ADC #$0008
	STA ($20)
	INX
UNKNOWN_C2EAEA_UNKNOWN11:
	CPX #$0010
	BCC UNKNOWN_C2EAEA_UNKNOWN10
	REP #PROC_FLAGS::ACCUM8
	LDA $22
	STA $02
	LDA .LOWORD(UNKNOWN_7EAAB4)
	ASL
	TAX
	LDA $02
	STA $AAC6,X
	LDY $24
	LDA .LOWORD(UNKNOWN_7EAAB4)
	ASL
	TAX
	TYA
	STA $AACE,X
	INC .LOWORD(UNKNOWN_7EAAB4)
	LOADPTR UNKNOWN_7F8000, $06
	LDA $06
	STA $1A
	LDA $08
	STA $1C
	LOADPTR BATTLE_SPRITES_POINTERS, $0A
	LDA $28
	STA $04
	STA $04
	ASL
	ASL
	ADC $04
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDA $1A
	STA $06
	LDA $1C
	STA $08
	LDA $06
	STA $12
	LDA $08
	STA $14
	JSL DECOMP
	LDA $06
	STA $1A
	LDA $08
	STA $1C
	LDY $24
	LDA $02
	JSL MULT16
	TAY
	JMP a:.LOWORD(UNKNOWN_C2EAEA_UNKNOWN17)
UNKNOWN_C2EAEA_UNKNOWN12:
	LOADPTR UNKNOWN_7F0000, $0A
	LDA .LOWORD(UNKNOWN_7EAAB2)
	ASL
	TAX
	LDA f:UNKNOWN_C3F819+88,X
	CLC
	ADC $0A
	STA $0A
	INC .LOWORD(UNKNOWN_7EAAB2)
	LDA #$0000
	STA $20
	BRA UNKNOWN_C2EAEA_UNKNOWN16
UNKNOWN_C2EAEA_UNKNOWN13:
	LDA $0A
	STA $06
	LDA $0C
	STA $08
	LDA $06
	STA $16
	LDA $08
	STA $18
	LDX #$0000
	BRA UNKNOWN_C2EAEA_UNKNOWN15
UNKNOWN_C2EAEA_UNKNOWN14:
	SEP #PROC_FLAGS::ACCUM8
	LDA [$1A]
	STA [$06]
	REP #PROC_FLAGS::ACCUM8
	LDA $1A
	STA $06
	LDA $1C
	STA $08
	INC $06
	LDA $06
	STA $1A
	LDA $08
	STA $1C
	LDA $16
	STA $06
	LDA $18
	STA $08
	INC $06
	LDA $06
	STA $16
	LDA $08
	STA $18
	INX
UNKNOWN_C2EAEA_UNKNOWN15:
	CPX #$0080
	BCC UNKNOWN_C2EAEA_UNKNOWN14
	LDA #$0200
	CLC
	ADC $0A
	STA $0A
	LDA $20
	INC
	STA $20
UNKNOWN_C2EAEA_UNKNOWN16:
	CMP #$0004
	BCC UNKNOWN_C2EAEA_UNKNOWN13
UNKNOWN_C2EAEA_UNKNOWN17:
	TYX
	DEY
	CPX #$0000
	BEQ UNKNOWN_C2EAEA_UNKNOWN18
	JMP a:.LOWORD(UNKNOWN_C2EAEA_UNKNOWN12)
UNKNOWN_C2EAEA_UNKNOWN18:
	PLD
	RTS

UNKNOWN_C2EEE7: ;$C2EEE7
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE2
	TCD
	STZ .LOWORD(UNKNOWN_7EAAB4)
	STZ .LOWORD(UNKNOWN_7EAAB2)
	LOADPTR BTL_ENTRY_PTR_TABLE, $0A
	LDA .LOWORD(CURRENT_BATTLE_GROUP)
	ASL
	ASL
	ASL
	CLC
	ADC $0A
	STA $0A
	LDY #$0002
	LDA [$0A],Y
	TAY
	LDA [$0A]
	STA $06
	STY $08
	LDA $06
	STA $1A
	LDA $08
	STA $1C
	JMP a:.LOWORD(UNKNOWN_C2EEE7_UNKNOWN1)
UNKNOWN_C2EEE7_UNKNOWN0:
	LOADPTR ENEMY_CONFIGURATION_TABLE, $06
	LDA $06
	STA $16
	LDA $08
	STA $18
	LDA $1A
	STA $0A
	LDA $1C
	STA $0C
	INC $0A
	LDA [$0A]
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	STA $14
	CLC
	ADC #$001C
	CLC
	ADC $06
	STA $06
	LDA [$06]
	TAY
	STY $12
	LDA $14
	CLC
	ADC #$0035
	LDX $16
	STX $06
	LDX $18
	STX $08
	CLC
	ADC $06
	STA $06
	LDA [$06]
	AND #$00FF
	ASL
	ASL
	ASL
	ASL
	ASL
	PHA
	LOADPTR BATTLE_SPRITE_PALETTES, $06
	PLA
	CLC
	ADC $06
	STA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$0020
	LDA .LOWORD(UNKNOWN_7EAAB4)
	ASL
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC #$0300
	JSL MEMCPY16
	LDA .LOWORD(UNKNOWN_7EAAB4)
	ASL
	TAX
	LDA [$0A]
	STA .LOWORD(UNKNOWN_7EAABE),X
	LDY $12
	TYA
	JSR a:.LOWORD(UNKNOWN_C2EAEA)
	LDA $1A
	STA $06
	LDA $1C
	STA $08
	LDA #$0003
	CLC
	ADC $06
	STA $06
	STA $1A
	LDA $08
	STA $1C
UNKNOWN_C2EEE7_UNKNOWN1:
	LDY #$0000
	LDA [$1A],Y
	AND #$00FF
	TAX
	CPX #$00FF
	BEQ UNKNOWN_C2EEE7_UNKNOWN2
	JMP a:.LOWORD(UNKNOWN_C2EEE7_UNKNOWN0)
UNKNOWN_C2EEE7_UNKNOWN2:
	LDA .LOWORD(UNKNOWN_7EAAB2)
	CMP #$0010
	BCC UNKNOWN_C2EEE7_UNKNOWN3
	BEQ UNKNOWN_C2EEE7_UNKNOWN3
	LDX #$3000
	BRA UNKNOWN_C2EEE7_UNKNOWN4
UNKNOWN_C2EEE7_UNKNOWN3:
	LDX #$2000
UNKNOWN_C2EEE7_UNKNOWN4:
	LOADPTR UNKNOWN_7F0000, $0E
	LDY #$2000
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	JSL UNKNOWN_C08616
	PLD
	RTL

GET_BATTLE_SPRITE_WIDTH: ;$C2EFFD
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF2
	TCD
	PLA
	DEC
	STA $04
	ASL
	ASL
	ADC $04
	TAX
	INX
	INX
	INX
	INX
	LDA f:BATTLE_SPRITES_POINTERS,X
	AND #$00FF
	CMP #$0001
	BEQ GET_BATTLE_SPRITE_WIDTH_UNKNOWN0
	CMP #$0003
	BEQ GET_BATTLE_SPRITE_WIDTH_UNKNOWN0
	CMP #$0002
	BEQ GET_BATTLE_SPRITE_WIDTH_UNKNOWN1
	CMP #$0004
	BEQ GET_BATTLE_SPRITE_WIDTH_UNKNOWN1
	CMP #$0005
	BEQ GET_BATTLE_SPRITE_WIDTH_UNKNOWN2
	CMP #$0006
	BEQ GET_BATTLE_SPRITE_WIDTH_UNKNOWN2
	BRA GET_BATTLE_SPRITE_WIDTH_UNKNOWN3
GET_BATTLE_SPRITE_WIDTH_UNKNOWN0:
	LDA #$0004
	BRA GET_BATTLE_SPRITE_WIDTH_UNKNOWN4
GET_BATTLE_SPRITE_WIDTH_UNKNOWN1:
	LDA #$0008
	BRA GET_BATTLE_SPRITE_WIDTH_UNKNOWN4
GET_BATTLE_SPRITE_WIDTH_UNKNOWN2:
	LDA #$0010
	BRA GET_BATTLE_SPRITE_WIDTH_UNKNOWN4
GET_BATTLE_SPRITE_WIDTH_UNKNOWN3:
	LDA #$0000
GET_BATTLE_SPRITE_WIDTH_UNKNOWN4:
	PLD
	RTS

GET_BATTLE_SPRITE_HEIGHT: ;$C2F04E
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFF2
	TCD
	PLA
	DEC
	STA $04
	ASL
	ASL
	ADC $04
	TAX
	INX
	INX
	INX
	INX
	LDA f:BATTLE_SPRITES_POINTERS,X
	AND #$00FF
	CMP #$0001
	BEQ GET_BATTLE_SPRITE_HEIGHT_UNKNOWN0
	CMP #$0002
	BEQ GET_BATTLE_SPRITE_HEIGHT_UNKNOWN0
	CMP #$0003
	BEQ GET_BATTLE_SPRITE_HEIGHT_UNKNOWN1
	CMP #$0004
	BEQ GET_BATTLE_SPRITE_HEIGHT_UNKNOWN1
	CMP #$0005
	BEQ GET_BATTLE_SPRITE_HEIGHT_UNKNOWN1
	CMP #$0006
	BEQ GET_BATTLE_SPRITE_HEIGHT_UNKNOWN2
	BRA GET_BATTLE_SPRITE_HEIGHT_UNKNOWN3
GET_BATTLE_SPRITE_HEIGHT_UNKNOWN0:
	LDA #$0004
	BRA GET_BATTLE_SPRITE_HEIGHT_UNKNOWN4
GET_BATTLE_SPRITE_HEIGHT_UNKNOWN1:
	LDA #$0008
	BRA GET_BATTLE_SPRITE_HEIGHT_UNKNOWN4
GET_BATTLE_SPRITE_HEIGHT_UNKNOWN2:
	LDA #$0010
	BRA GET_BATTLE_SPRITE_HEIGHT_UNKNOWN4
GET_BATTLE_SPRITE_HEIGHT_UNKNOWN3:
	LDA #$0000
GET_BATTLE_SPRITE_HEIGHT_UNKNOWN4:
	PLD
	RTS

UNKNOWN_C2F09F: ;$C2F09F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	TAX
	STX $10
	LDA #$0000
	STA $0E
	BRA UNKNOWN_C2F09F_UNKNOWN2
UNKNOWN_C2F09F_UNKNOWN0:
	ASL
	PHA
	LDX $10
	TXA
	PLX
	CMP .LOWORD(UNKNOWN_7EAABE),X
	BNE UNKNOWN_C2F09F_UNKNOWN1
	LDA $0E
	BRA UNKNOWN_C2F09F_UNKNOWN3
UNKNOWN_C2F09F_UNKNOWN1:
	LDA $0E
	INC
	STA $0E
UNKNOWN_C2F09F_UNKNOWN2:
	CMP #$0004
	BCC UNKNOWN_C2F09F_UNKNOWN0
	LDA #$0000
UNKNOWN_C2F09F_UNKNOWN3:
	PLD
	RTS

UNKNOWN_C2F0D1: ;$C2F0D1
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDY #$0000
	STY $10
	TYX
	STX $0E
	BRA UNKNOWN_C2F0D1_UNKNOWN2
UNKNOWN_C2F0D1_UNKNOWN0:
	TXA
	ASL
	TAX
	LDA .LOWORD(UNKNOWN_7E9F8C),X
	LDY #.SIZEOF(enemy_data)
	JSL MULT168
	CLC
	ADC #enemy_data::battle_sprite
	TAX
	LDA f:ENEMY_CONFIGURATION_TABLE,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	STA $02
	LDY $10
	TYA
	CLC
	ADC $02
	TAY
	STY $10
	CPY #$0020
	BCC UNKNOWN_C2F0D1_UNKNOWN1
	BEQ UNKNOWN_C2F0D1_UNKNOWN1
	LDX $0E
	STX .LOWORD(ENEMIES_IN_BATTLE)
	BRA UNKNOWN_C2F0D1_UNKNOWN3
UNKNOWN_C2F0D1_UNKNOWN1:
	LDX $0E
	INX
	STX $0E
UNKNOWN_C2F0D1_UNKNOWN2:
	CPX .LOWORD(ENEMIES_IN_BATTLE)
	BCC UNKNOWN_C2F0D1_UNKNOWN0
UNKNOWN_C2F0D1_UNKNOWN3:
	PLD
	RTL

UNKNOWN_C2F121: ;$C2F121
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFD9
	TCD
	STZ $AEF2
	STZ $AEF0
	LDX #$0008
	STX $25
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN10)
UNKNOWN_C2F121_UNKNOWN0:
	TXA
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAY
	STY $23
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,Y
	AND #$00FF
	BNE UNKNOWN_C2F121_UNKNOWN1
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN9)
UNKNOWN_C2F121_UNKNOWN1:
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,Y
	AND #$00FF
	CMP #$0001
	BEQ UNKNOWN_C2F121_UNKNOWN2
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN9)
UNKNOWN_C2F121_UNKNOWN2:
	LDA .LOWORD(BATTLERS_TABLE),Y
	JSR a:.LOWORD(UNKNOWN_C2F09F)
	SEP #PROC_FLAGS::ACCUM8
	LDY $23
	STA .LOWORD(BATTLERS_TABLE)+battler::sprite_y,Y
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(BATTLERS_TABLE)+16,Y
	AND #$00FF
	STA $21
	LDA .LOWORD(BATTLERS_TABLE)+battler::sprite,Y
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	STA $02
	LDA $21
	ASL
	TAX
	LDA $AEF0,X
	BEQ UNKNOWN_C2F121_UNKNOWN3
	INC $02
UNKNOWN_C2F121_UNKNOWN3:
	LDA $21
	ASL
	CLC
	ADC #$AEF0
	TAY
	LDA a:.LOWORD(RAM),Y
	CLC
	ADC $02
	CMP #$001E
	BEQ UNKNOWN_C2F121_UNKNOWN4
	BCS UNKNOWN_C2F121_UNKNOWN5
UNKNOWN_C2F121_UNKNOWN4:
	STA a:.LOWORD(RAM),Y
	BRA UNKNOWN_C2F121_UNKNOWN9
UNKNOWN_C2F121_UNKNOWN5:
	LDA #$0001
	SEC
	SBC $21
	STA $23
	LDX $25
	TXA
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::sprite,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	STA $02
	LDA $23
	ASL
	TAX
	LDA $AEF0,X
	BEQ UNKNOWN_C2F121_UNKNOWN6
	INC $02
UNKNOWN_C2F121_UNKNOWN6:
	LDA $23
	ASL
	CLC
	ADC #$AEF0
	TAY
	STY $1F
	LDA a:.LOWORD(RAM),Y
	CLC
	ADC $02
	CMP #$001E
	BEQ UNKNOWN_C2F121_UNKNOWN7
	BCS UNKNOWN_C2F121_UNKNOWN8
UNKNOWN_C2F121_UNKNOWN7:
	LDX $25
	TXA
	LDY #$004E
	JSL MULT168
	TAX
	LDA $23
	SEP #PROC_FLAGS::ACCUM8
	STA .LOWORD(BATTLERS_TABLE)+16,X
	LDY $1F
	REP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),Y
	CLC
	ADC $02
	STA a:.LOWORD(RAM),Y
	BRA UNKNOWN_C2F121_UNKNOWN9
UNKNOWN_C2F121_UNKNOWN8:
	LDA #$0000
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN60)
UNKNOWN_C2F121_UNKNOWN9:
	LDX $25
	INX
	STX $25
UNKNOWN_C2F121_UNKNOWN10:
	CPX #$0020
	BCS UNKNOWN_C2F121_UNKNOWN11
	BEQ UNKNOWN_C2F121_UNKNOWN11
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN0)
UNKNOWN_C2F121_UNKNOWN11:
	;TODO: why 8?
	LDA .LOWORD(BATTLERS_TABLE)+8*.SIZEOF(battler)+16
	AND #$00FF
	STA $23
	LDA #$0020
	STA $1D
	STA $1B
	LDX #$0008
	STX $1F
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN21)
UNKNOWN_C2F121_UNKNOWN12:
	TXA
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAY
	STY $21
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,Y
	AND #$00FF
	BNE UNKNOWN_C2F121_UNKNOWN13
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN20)
UNKNOWN_C2F121_UNKNOWN13:
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,Y
	AND #$00FF
	CMP #$0001
	BEQ UNKNOWN_C2F121_UNKNOWN14
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN20)
UNKNOWN_C2F121_UNKNOWN14:
	LDA .LOWORD(BATTLERS_TABLE)+16,Y
	AND #$00FF
	CMP $23
	BEQ UNKNOWN_C2F121_UNKNOWN15
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN20)
UNKNOWN_C2F121_UNKNOWN15:
	LDA .LOWORD(BATTLERS_TABLE)+battler::sprite,Y
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	LSR
	STA $19
	LDA $1B
	CMP $1D
	BNE UNKNOWN_C2F121_UNKNOWN17
	LDA $1B
	SEP #PROC_FLAGS::ACCUM8
	LDY $21
	STA .LOWORD(BATTLERS_TABLE)+battler::initiative,Y
	REP #PROC_FLAGS::ACCUM8
	LDA $1B
	SEC
	SBC $19
	STA $1B
	LDA $1D
	CLC
	ADC $19
	STA $1D
	JSR a:.LOWORD(RAND_LONG)
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	AND #$0001
	BEQ UNKNOWN_C2F121_UNKNOWN16
	LDA $1B
	STA $04
	STA $17
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN20)
UNKNOWN_C2F121_UNKNOWN16:
	LDA $1D
	STA $04
	STA $17
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN20)
UNKNOWN_C2F121_UNKNOWN17:
	LDA #$0020
	SEC
	SBC $1B
	STA $21
	LDA $1D
	SEC
	SBC #$0020
	STA $02
	LDA $21
	CMP $02
	BCC UNKNOWN_C2F121_UNKNOWN18
	CMP $02
	BNE UNKNOWN_C2F121_UNKNOWN19
	JSR a:.LOWORD(RAND_LONG)
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	AND #$0001
	BEQ UNKNOWN_C2F121_UNKNOWN19
UNKNOWN_C2F121_UNKNOWN18:
	LDA $19
	SEP #PROC_FLAGS::ACCUM8
	STA $00
	REP #PROC_FLAGS::ACCUM8
	LDA $1B
	SEP #PROC_FLAGS::ACCUM8
	SEC
	SBC $00
	DEC
	STA $16
	LDX $1F
	REP #PROC_FLAGS::ACCUM8
	TXA
	LDY #$004E
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA $16
	STA .LOWORD(BATTLERS_TABLE)+battler::initiative,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	SEC
	SBC $19
	STA $1B
	BRA UNKNOWN_C2F121_UNKNOWN20
UNKNOWN_C2F121_UNKNOWN19:
	LDA $19
	SEP #PROC_FLAGS::ACCUM8
	STA $00
	REP #PROC_FLAGS::ACCUM8
	LDA $1D
	SEP #PROC_FLAGS::ACCUM8
	CLC
	ADC $00
	INC
	STA $16
	LDX $1F
	REP #PROC_FLAGS::ACCUM8
	TXA
	LDY #$004E
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA $16
	STA .LOWORD(BATTLERS_TABLE)+battler::initiative,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CLC
	ADC $19
	STA $1D
UNKNOWN_C2F121_UNKNOWN20:
	LDX $1F
	INX
	STX $1F
UNKNOWN_C2F121_UNKNOWN21:
	CPX #$0020
	BCS UNKNOWN_C2F121_UNKNOWN22
	BEQ UNKNOWN_C2F121_UNKNOWN22
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN12)
UNKNOWN_C2F121_UNKNOWN22:
	LDA $17
	STA $04
	LDY $04
	STY $25
	TYX
	STX $14
	LDA #$0008
	STA $02
	STA $1F
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN32)
UNKNOWN_C2F121_UNKNOWN23:
	LDA $02
	LDY #.SIZEOF(battler)
	JSL MULT168
	STA $04
	LDX $04
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BNE UNKNOWN_C2F121_UNKNOWN24
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN31)
UNKNOWN_C2F121_UNKNOWN24:
	LDX $04
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BEQ UNKNOWN_C2F121_UNKNOWN25
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN31)
UNKNOWN_C2F121_UNKNOWN25:
	LDX $04
	LDA .LOWORD(BATTLERS_TABLE)+16,X
	AND #$00FF
	CMP $23
	BNE UNKNOWN_C2F121_UNKNOWN26
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN31)
UNKNOWN_C2F121_UNKNOWN26:
	LDX $04
	LDA .LOWORD(BATTLERS_TABLE)+battler::sprite,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_WIDTH)
	LSR
	STA $12
	LDY $25
	STY $02
	LDX $14
	TXA
	CMP $02
	BNE UNKNOWN_C2F121_UNKNOWN27
	TXA
	SEP #PROC_FLAGS::ACCUM8
	LDX $04
	STA .LOWORD(BATTLERS_TABLE)+battler::initiative,X
	LDX $14
	REP #PROC_FLAGS::ACCUM8
	TXA
	SEC
	SBC $12
	TAX
	STX $14
	TYA
	CLC
	ADC $12
	TAY
	STY $25
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN31)
UNKNOWN_C2F121_UNKNOWN27:
	CPY #$0020
	BCC UNKNOWN_C2F121_UNKNOWN30
	BEQ UNKNOWN_C2F121_UNKNOWN30
	CPX #$0020
	BEQ UNKNOWN_C2F121_UNKNOWN28
	BCS UNKNOWN_C2F121_UNKNOWN29
UNKNOWN_C2F121_UNKNOWN28:
	STX $04
	LDA #$0020
	SEC
	SBC $04
	STA $17
	TYA
	SEC
	SBC #$0020
	STA $04
	LDA $17
	CMP $04
	BCC UNKNOWN_C2F121_UNKNOWN29
	CMP $04
	BNE UNKNOWN_C2F121_UNKNOWN30
	JSR a:.LOWORD(RAND_LONG)
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	AND #$0001
	BEQ UNKNOWN_C2F121_UNKNOWN30
UNKNOWN_C2F121_UNKNOWN29:
	LDA $12
	SEP #PROC_FLAGS::ACCUM8
	STA $00
	LDX $14
	REP #PROC_FLAGS::ACCUM8
	TXA
	SEP #PROC_FLAGS::ACCUM8
	SEC
	SBC $00
	DEC
	STA $16
	REP #PROC_FLAGS::ACCUM8
	LDA $1F
	STA $02
	LDY #$004E
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA $16
	STA .LOWORD(BATTLERS_TABLE)+battler::initiative,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	SEC
	SBC $12
	TAX
	STX $14
	BRA UNKNOWN_C2F121_UNKNOWN31
UNKNOWN_C2F121_UNKNOWN30:
	LDA $12
	SEP #PROC_FLAGS::ACCUM8
	STA $00
	LDY $25
	REP #PROC_FLAGS::ACCUM8
	TYA
	SEP #PROC_FLAGS::ACCUM8
	CLC
	ADC $00
	INC
	STA $16
	REP #PROC_FLAGS::ACCUM8
	LDA $1F
	STA $02
	LDY #$004E
	JSL MULT168
	TAX
	SEP #PROC_FLAGS::ACCUM8
	LDA $16
	STA .LOWORD(BATTLERS_TABLE)+battler::initiative,X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	CLC
	ADC $12
	TAY
	STY $25
UNKNOWN_C2F121_UNKNOWN31:
	LDA $1F
	STA $02
	INC $02
	LDA $02
	STA $1F
UNKNOWN_C2F121_UNKNOWN32:
	LDA $02
	CMP #$0020
	BCS UNKNOWN_C2F121_UNKNOWN33
	BEQ UNKNOWN_C2F121_UNKNOWN33
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN23)
UNKNOWN_C2F121_UNKNOWN33:
	LDA $23
	CMP #$0001
	BNE UNKNOWN_C2F121_UNKNOWN37
	LDY $25
	STY $02
	LDX $14
	TXA
	CMP $02
	BNE UNKNOWN_C2F121_UNKNOWN37
	LDA #$0008
	STA $02
	BRA UNKNOWN_C2F121_UNKNOWN36
UNKNOWN_C2F121_UNKNOWN34:
	LDA $02
	LDY #.SIZEOF(battler)
	JSL MULT168
	STA $17
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ UNKNOWN_C2F121_UNKNOWN35
	LDA $17
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BNE UNKNOWN_C2F121_UNKNOWN35
	LDA $17
	TAX
	SEP #PROC_FLAGS::ACCUM8
	STZ .LOWORD(BATTLERS_TABLE)+16,X
UNKNOWN_C2F121_UNKNOWN35:
	REP #PROC_FLAGS::ACCUM8
	INC $02
UNKNOWN_C2F121_UNKNOWN36:
	LDA $02
	CMP #$0020
	BCC UNKNOWN_C2F121_UNKNOWN34
UNKNOWN_C2F121_UNKNOWN37:
	LDX $14
	CPX $1B
	BCS UNKNOWN_C2F121_UNKNOWN38
	STX $1B
UNKNOWN_C2F121_UNKNOWN38:
	LDY $25
	CPY $1D
	BCC UNKNOWN_C2F121_UNKNOWN39
	BEQ UNKNOWN_C2F121_UNKNOWN39
	STY $1D
UNKNOWN_C2F121_UNKNOWN39:
	LDA $1B
	CLC
	ADC $1D
	LSR
	STA $02
	LDA #$0020
	SEC
	SBC $02
	SEC
	SBC #$0010
	TAY
	STY $1B
	LDA #$0008
	STA $14
	BRA UNKNOWN_C2F121_UNKNOWN43
UNKNOWN_C2F121_UNKNOWN40:
	LDY #$004E
	JSL MULT168
	TAX
	STX $19
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ UNKNOWN_C2F121_UNKNOWN42
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BNE UNKNOWN_C2F121_UNKNOWN42
	TXA
	CLC
	ADC #$9FF0
	STA $02
	LDY $1B
	SEP #PROC_FLAGS::INDEX8
	STY $00
	REP #PROC_FLAGS::INDEX8
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	CLC
	ADC $00
	ASL
	ASL
	ASL
	LDX $02
	STA a:.LOWORD(RAM),X
	LDX $19
	REP #PROC_FLAGS::ACCUM8
	LDA .LOWORD(BATTLERS_TABLE)+16,X
	AND #$00FF
	BEQ UNKNOWN_C2F121_UNKNOWN41
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0080
	STA .LOWORD(BATTLERS_TABLE)+69,X
	BRA UNKNOWN_C2F121_UNKNOWN42
UNKNOWN_C2F121_UNKNOWN41:
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0090
	STA .LOWORD(BATTLERS_TABLE)+69,X
UNKNOWN_C2F121_UNKNOWN42:
	REP #PROC_FLAGS::ACCUM8
	LDA $14
	INC
	STA $14
UNKNOWN_C2F121_UNKNOWN43:
	CMP #$0020
	BCC UNKNOWN_C2F121_UNKNOWN40
	LDA .LOWORD(CURRENT_BATTLE_GROUP)
	CMP #$01DB
	BNE UNKNOWN_C2F121_UNKNOWN44
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0080
	STA .LOWORD(BATTLERS_TABLE)+8*.SIZEOF(battler)+battler::initiative
	STA .LOWORD(BATTLERS_TABLE)+8*.SIZEOF(battler)+69
	LDA #$00C8
	STA .LOWORD(BATTLERS_TABLE)+9*.SIZEOF(battler)+battler::initiative
	LDA #$0090
	STA .LOWORD(BATTLERS_TABLE)+9*.SIZEOF(battler)+69
UNKNOWN_C2F121_UNKNOWN44:
	REP #PROC_FLAGS::ACCUM8
	STZ $21
	LDA #$0000
	STA $04
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN57)
UNKNOWN_C2F121_UNKNOWN45:
	LDA $04
	REP #PROC_FLAGS::INDEX8
	LDY #$004E
	JSL MULT168
	CLC
	ADC #$A21C
	TAY
	STY $19
	LDA $04
	INC
	STA $1B
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN55)
UNKNOWN_C2F121_UNKNOWN46:
	LDA $1B
	REP #PROC_FLAGS::INDEX8
	LDY #.SIZEOF(battler)
	JSL MULT168
	CLC
	ADC #.LOWORD(BATTLERS_TABLE)+8*.SIZEOF(battler)
	STA $23
	LDY $19
	LDA a:.LOWORD(RAM),Y
	CMP ($23)
	BEQ UNKNOWN_C2F121_UNKNOWN47
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN54)
UNKNOWN_C2F121_UNKNOWN47:
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM)+11,Y
	LDY #$000B
	CMP ($23),Y
	BCS UNKNOWN_C2F121_UNKNOWN48
	LDY $19
	LDA a:.LOWORD(RAM)+69,Y
	STA $00
	LDY #$0045
	LDA ($23),Y
	STA $16
	STA $01
	LDA $00
	CMP $01
	BCC UNKNOWN_C2F121_UNKNOWN53
	LDA $16
	PHA
	LDA $00
	SEP #PROC_FLAGS::INDEX8
	PLX
	STX $00
	CMP $00
	BNE UNKNOWN_C2F121_UNKNOWN48
	REP #PROC_FLAGS::INDEX8
	LDY $19
	LDA a:.LOWORD(RAM)+68,Y
	LDY #$0044
	CMP ($23),Y
	BEQ UNKNOWN_C2F121_UNKNOWN48
	BCS UNKNOWN_C2F121_UNKNOWN53
UNKNOWN_C2F121_UNKNOWN48:
	REP #PROC_FLAGS::INDEX8
	LDY $19
	LDA a:.LOWORD(RAM)+11,Y
	LDY #$000B
	CMP ($23),Y
	BEQ UNKNOWN_C2F121_UNKNOWN49
	BCS UNKNOWN_C2F121_UNKNOWN50
UNKNOWN_C2F121_UNKNOWN49:
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN54)
UNKNOWN_C2F121_UNKNOWN50:
	LDY $19
	LDA a:.LOWORD(RAM)+69,Y
	STA $00
	LDY #$0045
	LDA ($23),Y
	STA $16
	STA $01
	LDA $00
	CMP $01
	BEQ UNKNOWN_C2F121_UNKNOWN51
	BCS UNKNOWN_C2F121_UNKNOWN53
UNKNOWN_C2F121_UNKNOWN51:
	LDA $16
	PHA
	LDA $00
	SEP #PROC_FLAGS::INDEX8
	PLX
	STX $00
	CMP $00
	BEQ UNKNOWN_C2F121_UNKNOWN52
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN54)
UNKNOWN_C2F121_UNKNOWN52:
	REP #PROC_FLAGS::INDEX8
	LDY $19
	LDA a:.LOWORD(RAM)+68,Y
	LDY #$0044
	CMP ($23),Y
	BCC UNKNOWN_C2F121_UNKNOWN53
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN54)
UNKNOWN_C2F121_UNKNOWN53:
	REP #PROC_FLAGS::ACCUM8
	LDA #$0001
	STA $21
	LDY $19
	TYA
	CLC
	ADC #$000B
	TAX
	STX $14
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	STA $12
	LDA $23
	CLC
	ADC #$000B
	STA $02
	LDX $02
	SEP #PROC_FLAGS::ACCUM8
	LDA a:.LOWORD(RAM),X
	LDX $14
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	LDA $12
	SEP #PROC_FLAGS::ACCUM8
	LDX $02
	STA a:.LOWORD(RAM),X
	STA $00
	LDX $14
	LDA a:.LOWORD(RAM),X
	CMP $00
	BCC UNKNOWN_C2F121_UNKNOWN54
	BEQ UNKNOWN_C2F121_UNKNOWN54
	REP #PROC_FLAGS::ACCUM8
	LDA #$A91E
	STA $02
	TYA
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$004E
	LDA $02
	JSL MEMCPY16
	LDA $23
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$004E
	LDY $19
	TYA
	JSL MEMCPY16
	LDA $02
	STA $06
	PHB
	SEP #PROC_FLAGS::ACCUM8
	PLA
	STA $08
	STZ $09
	REP #PROC_FLAGS::ACCUM8
	LDA $06
	STA $0E
	LDA $08
	STA $10
	LDX #$004E
	LDA $23
	JSL MEMCPY16
UNKNOWN_C2F121_UNKNOWN54:
	REP #PROC_FLAGS::ACCUM8
	INC $1B
UNKNOWN_C2F121_UNKNOWN55:
	LDA .LOWORD(ENEMIES_IN_BATTLE)
	CMP $1B
	BEQ UNKNOWN_C2F121_UNKNOWN56
	BCC UNKNOWN_C2F121_UNKNOWN56
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN46)
UNKNOWN_C2F121_UNKNOWN56:
	INC $04
UNKNOWN_C2F121_UNKNOWN57:
	LDA .LOWORD(ENEMIES_IN_BATTLE)
	DEC
	STA $02
	LDA $04
	CMP $02
	BCS UNKNOWN_C2F121_UNKNOWN58
	BEQ UNKNOWN_C2F121_UNKNOWN58
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN45)
UNKNOWN_C2F121_UNKNOWN58:
	LDA $21
	BEQ UNKNOWN_C2F121_UNKNOWN59
	JMP a:.LOWORD(UNKNOWN_C2F121_UNKNOWN44)
UNKNOWN_C2F121_UNKNOWN59:
	SEP #PROC_FLAGS::ACCUM8
	STZ $0E
	REP #PROC_FLAGS::INDEX8
	LDX #$004E
	REP #PROC_FLAGS::ACCUM8
	LDA #$A91E
	JSL MEMSET16
	LDA #$0000
UNKNOWN_C2F121_UNKNOWN60:
	PLD
	RTL

UNKNOWN_C2F724: ;$C2F724
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE8
	TCD
	PLA
	STA $16
	LDA #$A21C
	STA $02
	LDA #$0008
	STA $04
	STA $14
	JMP a:.LOWORD(UNKNOWN_C2F724_UNKNOWN12)
UNKNOWN_C2F724_UNKNOWN0:
	LDX $02
	LDA a:.LOWORD(RAM)+12,X
	AND #$00FF
	BNE UNKNOWN_C2F724_UNKNOWN1
	JMP a:.LOWORD(UNKNOWN_C2F724_UNKNOWN11)
UNKNOWN_C2F724_UNKNOWN1:
	LDX $02
	LDA a:.LOWORD(RAM)+29,X
	AND #$00FF
	CMP #$0001
	BNE UNKNOWN_C2F724_UNKNOWN2
	JMP a:.LOWORD(UNKNOWN_C2F724_UNKNOWN11)
UNKNOWN_C2F724_UNKNOWN2:
	LDX $02
	LDA a:.LOWORD(RAM)+14,X
	AND #$00FF
	CMP #$0001
	BEQ UNKNOWN_C2F724_UNKNOWN3
	JMP a:.LOWORD(UNKNOWN_C2F724_UNKNOWN11)
UNKNOWN_C2F724_UNKNOWN3:
	LDX $02
	LDA a:.LOWORD(RAM)+16,X
	AND #$00FF
	CMP $16
	BEQ UNKNOWN_C2F724_UNKNOWN4
	JMP a:.LOWORD(UNKNOWN_C2F724_UNKNOWN11)
UNKNOWN_C2F724_UNKNOWN4:
	LDX $02
	LDA a:.LOWORD(RAM)+2,X
	BNE UNKNOWN_C2F724_UNKNOWN5
	JMP a:.LOWORD(UNKNOWN_C2F724_UNKNOWN11)
UNKNOWN_C2F724_UNKNOWN5:
	LDA $02
	CLC
	ADC #$0048
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BEQ UNKNOWN_C2F724_UNKNOWN6
	SEP #PROC_FLAGS::ACCUM8
	DEC
	STA a:.LOWORD(RAM),X
	LDY #$0003
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	JSL DIVISION16
	AND #$0001
	BEQ UNKNOWN_C2F724_UNKNOWN6
	JMP a:.LOWORD(UNKNOWN_C2F724_UNKNOWN11)
UNKNOWN_C2F724_UNKNOWN6:
	LDA $02
	CLC
	ADC #$0049
	TAX
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BEQ UNKNOWN_C2F724_UNKNOWN7
	SEP #PROC_FLAGS::ACCUM8
	DEC
	STA a:.LOWORD(RAM),X
	REP #PROC_FLAGS::ACCUM8
	AND #$00FF
	AND #$0004
	BNE UNKNOWN_C2F724_UNKNOWN7
	LDX $02
	LDA a:.LOWORD(RAM)+69,X
	AND #$00FF
	SEC
	SBC .LOWORD(UNKNOWN_7EAD98)
	TAY
	LDX $02
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	SEC
	SBC .LOWORD(UNKNOWN_7EAD96)
	TAX
	STX $12
	LDX $02
	LDA a:.LOWORD(RAM)+67,X
	AND #$00FF
	STA $04
	ASL
	ASL
	ADC $04
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC #$AC16
	LDX $12
	JSL UNKNOWN_C08CD5
	JMP a:.LOWORD(UNKNOWN_C2F724_UNKNOWN11)
UNKNOWN_C2F724_UNKNOWN7:
	LDX $02
	LDA a:.LOWORD(RAM)+75,X
	AND #$00FF
	BEQ UNKNOWN_C2F724_UNKNOWN8
	LDX $02
	LDA a:.LOWORD(RAM)+69,X
	AND #$00FF
	SEC
	SBC .LOWORD(UNKNOWN_7EAD98)
	TAY
	LDX $02
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	SEC
	SBC .LOWORD(UNKNOWN_7EAD96)
	TAX
	STX $10
	LDX $02
	LDA a:.LOWORD(RAM)+67,X
	AND #$00FF
	STA $04
	ASL
	ASL
	ADC $04
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC #$AC16
	LDX $10
	JSL UNKNOWN_C08CD5
	JMP a:.LOWORD(UNKNOWN_C2F724_UNKNOWN11)
UNKNOWN_C2F724_UNKNOWN8:
	LDA .LOWORD(UNKNOWN_7EADA2)
	BEQ UNKNOWN_C2F724_UNKNOWN10
	LDX $02
	LDA a:.LOWORD(RAM)+74,X
	AND #$00FF
	BEQ UNKNOWN_C2F724_UNKNOWN9
	LDA a:.LOWORD(UNKNOWN_7E0002)
	AND #$00FF
	AND #$0008
	BEQ UNKNOWN_C2F724_UNKNOWN10
UNKNOWN_C2F724_UNKNOWN9:
	LDX $02
	LDA a:.LOWORD(RAM)+69,X
	AND #$00FF
	SEC
	SBC .LOWORD(UNKNOWN_7EAD98)
	TAY
	LDX $02
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	SEC
	SBC .LOWORD(UNKNOWN_7EAD96)
	TAX
	STX $12
	LDX $02
	LDA a:.LOWORD(RAM)+67,X
	AND #$00FF
	STA $04
	ASL
	ASL
	ADC $04
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC #$AC16
	LDX $12
	JSL UNKNOWN_C08CD5
	BRA UNKNOWN_C2F724_UNKNOWN11
UNKNOWN_C2F724_UNKNOWN10:
	LDX $02
	LDA a:.LOWORD(RAM)+69,X
	AND #$00FF
	SEC
	SBC .LOWORD(UNKNOWN_7EAD98)
	TAY
	LDX $02
	LDA a:.LOWORD(RAM)+68,X
	AND #$00FF
	SEC
	SBC .LOWORD(UNKNOWN_7EAD96)
	TAX
	STX $0E
	LDX $02
	LDA a:.LOWORD(RAM)+67,X
	AND #$00FF
	STA $04
	ASL
	ASL
	ADC $04
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC #.LOWORD(UNKNOWN_7EAAD6)
	LDX $0E
	JSL UNKNOWN_C08CD5
UNKNOWN_C2F724_UNKNOWN11:
	LDA $02
	CLC
	ADC #$004E
	STA $02
	LDA $14
	STA $04
	INC $04
	LDA $04
	STA $14
UNKNOWN_C2F724_UNKNOWN12:
	LDA $04
	CMP #$0020
	BCS UNKNOWN_C2F724_UNKNOWN13
	BEQ UNKNOWN_C2F724_UNKNOWN13
	JMP a:.LOWORD(UNKNOWN_C2F724_UNKNOWN0)
UNKNOWN_C2F724_UNKNOWN13:
	PLD
	RTS

UNKNOWN_C2F8F9: ;$C2F8F9
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$007E
	JSL UNKNOWN_C088A5
	JSL OAM_CLEAR
	LDA #$0000
	JSR a:.LOWORD(UNKNOWN_C2F724)
	LDA #$0001
	JSR a:.LOWORD(UNKNOWN_C2F724)
	JSL UNKNOWN_C08B19_ENTRY_POINT_2
	RTL

UNKNOWN_C2F917: ;$C2F917
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEC
	TCD
	STZ .LOWORD(UNKNOWN_7EAD58)
	STZ .LOWORD(UNKNOWN_7EAD56)
	LDA #$0008
	STA $12
	BRA UNKNOWN_C2F917_UNKNOWN3
UNKNOWN_C2F917_UNKNOWN0:
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ UNKNOWN_C2F917_UNKNOWN2
	LDA .LOWORD(BATTLERS_TABLE)+battler::afflictions,X
	AND #$00FF
	CMP #$0001
	BEQ UNKNOWN_C2F917_UNKNOWN2
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BNE UNKNOWN_C2F917_UNKNOWN2
	LDA .LOWORD(BATTLERS_TABLE)+16,X
	AND #$00FF
	BEQ UNKNOWN_C2F917_UNKNOWN1
	INC .LOWORD(UNKNOWN_7EAD58)
	BRA UNKNOWN_C2F917_UNKNOWN2
UNKNOWN_C2F917_UNKNOWN1:
	INC .LOWORD(UNKNOWN_7EAD56)
UNKNOWN_C2F917_UNKNOWN2:
	LDA $12
	INC
	STA $12
UNKNOWN_C2F917_UNKNOWN3:
	CMP #$0020
	BCC UNKNOWN_C2F917_UNKNOWN0
	STZ $10
	LDA #$0000
	STA $02
	JMP a:.LOWORD(UNKNOWN_C2F917_UNKNOWN9)
UNKNOWN_C2F917_UNKNOWN4:
	LDA #$FFFF
	STA $04
	LDY #$0008
	STY $12
	BRA UNKNOWN_C2F917_UNKNOWN8
UNKNOWN_C2F917_UNKNOWN5:
	TYA
	LDY #$004E
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ UNKNOWN_C2F917_UNKNOWN7
	LDA .LOWORD(BATTLERS_TABLE)+battler::afflictions,X
	AND #$00FF
	CMP #$0001
	BEQ UNKNOWN_C2F917_UNKNOWN7
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BNE UNKNOWN_C2F917_UNKNOWN7
	LDA .LOWORD(BATTLERS_TABLE)+16,X
	AND #$00FF
	BNE UNKNOWN_C2F917_UNKNOWN7
	LDA .LOWORD(BATTLERS_TABLE)+battler::initiative,X
	AND #$00FF
	CMP $10
	BCC UNKNOWN_C2F917_UNKNOWN7
	BEQ UNKNOWN_C2F917_UNKNOWN7
	CMP $04
	BEQ UNKNOWN_C2F917_UNKNOWN6
	BCS UNKNOWN_C2F917_UNKNOWN7
UNKNOWN_C2F917_UNKNOWN6:
	LDY $12
	STY $0E
	STA $04
UNKNOWN_C2F917_UNKNOWN7:
	LDY $12
	INY
	STY $12
UNKNOWN_C2F917_UNKNOWN8:
	CPY #$0020
	BCC UNKNOWN_C2F917_UNKNOWN5
	LDA $0E
	SEP #PROC_FLAGS::ACCUM8
	LDX $02
	STA .LOWORD(UNKNOWN_7EAD7A),X
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LSR
	LSR
	LSR
	SEP #PROC_FLAGS::ACCUM8
	LDX $02
	STA .LOWORD(UNKNOWN_7EAD5A),X
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::sprite,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_HEIGHT)
	SEP #PROC_FLAGS::ACCUM8
	STA $00
	LDA #$0012
	SEC
	SBC $00
	LDX $02
	STA .LOWORD(UNKNOWN_7EAD62),X
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	STA $10
	INC $02
UNKNOWN_C2F917_UNKNOWN9:
	LDA $02
	CMP .LOWORD(UNKNOWN_7EAD56)
	BCS UNKNOWN_C2F917_UNKNOWN10
	BEQ UNKNOWN_C2F917_UNKNOWN10
	JMP a:.LOWORD(UNKNOWN_C2F917_UNKNOWN4)
UNKNOWN_C2F917_UNKNOWN10:
	STZ $10
	LDA #$0000
	STA $02
	JMP a:.LOWORD(UNKNOWN_C2F917_UNKNOWN16)
UNKNOWN_C2F917_UNKNOWN11:
	LDA #$FFFF
	STA $04
	LDY #$0008
	STY $12
	BRA UNKNOWN_C2F917_UNKNOWN15
UNKNOWN_C2F917_UNKNOWN12:
	TYA
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::consciousness,X
	AND #$00FF
	BEQ UNKNOWN_C2F917_UNKNOWN14
	LDA .LOWORD(BATTLERS_TABLE)+battler::afflictions,X
	AND #$00FF
	CMP #STATUS_0::UNCONSCIOUS
	BEQ UNKNOWN_C2F917_UNKNOWN14
	LDA .LOWORD(BATTLERS_TABLE)+battler::ally_or_enemy,X
	AND #$00FF
	CMP #$0001
	BNE UNKNOWN_C2F917_UNKNOWN14
	LDA .LOWORD(BATTLERS_TABLE)+16,X
	AND #$00FF
	BEQ UNKNOWN_C2F917_UNKNOWN14
	LDA .LOWORD(BATTLERS_TABLE)+battler::initiative,X
	AND #$00FF
	CMP $10
	BCC UNKNOWN_C2F917_UNKNOWN14
	BEQ UNKNOWN_C2F917_UNKNOWN14
	CMP $04
	BEQ UNKNOWN_C2F917_UNKNOWN13
	BCS UNKNOWN_C2F917_UNKNOWN14
UNKNOWN_C2F917_UNKNOWN13:
	LDY $12
	STY $0E
	STA $04
UNKNOWN_C2F917_UNKNOWN14:
	LDY $12
	INY
	STY $12
UNKNOWN_C2F917_UNKNOWN15:
	CPY #$0020
	BCC UNKNOWN_C2F917_UNKNOWN12
	LDA $0E
	SEP #PROC_FLAGS::ACCUM8
	LDX $02
	STA .LOWORD(UNKNOWN_7EAD82),X
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	LSR
	LSR
	LSR
	SEP #PROC_FLAGS::ACCUM8
	LDX $02
	STA .LOWORD(UNKNOWN_7EAD6A),X
	REP #PROC_FLAGS::ACCUM8
	LDA $0E
	LDY #.SIZEOF(battler)
	JSL MULT168
	TAX
	LDA .LOWORD(BATTLERS_TABLE)+battler::sprite,X
	JSR a:.LOWORD(GET_BATTLE_SPRITE_HEIGHT)
	SEP #PROC_FLAGS::ACCUM8
	STA $00
	LDA #$0010
	SEC
	SBC $00
	LDX $02
	STA .LOWORD(UNKNOWN_7EAD72),X
	REP #PROC_FLAGS::ACCUM8
	LDA $04
	STA $10
	INC $02
UNKNOWN_C2F917_UNKNOWN16:
	LDA $02
	CMP .LOWORD(UNKNOWN_7EAD58)
	BCS UNKNOWN_C2F917_UNKNOWN17
	BEQ UNKNOWN_C2F917_UNKNOWN17
	JMP a:.LOWORD(UNKNOWN_C2F917_UNKNOWN11)
UNKNOWN_C2F917_UNKNOWN17:
	PLD
	RTL

UNKNOWN_C2FAD2: ;$C2FAD2
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	LDA #$0001
	RTL

UNKNOWN_C2FAD8: ;$C2FAD8
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	STA .LOWORD(UNKNOWN_7EB37C)
	RTL

UNKNOWN_C2FADE: ;$C2FADE
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFEE
	TCD
	PLA
	TXY
	TAX
	STX .LOWORD(UNKNOWN_7EB37C)
	TYA
	ASL
	TAX
	LDA .LOWORD(UNKNOWN_7EB37C)
	STA .LOWORD(UNKNOWN_7EAEF4),X
	LDX #$0000
	STX $10
	BRA @UNKNOWN1
@UNKNOWN0:
	STX $02
	TYA
	STA $04
	ASL
	ADC $04
	ASL
	ASL
	ASL
	ASL
	CLC
	ADC $02
	ASL
	STA $0E
	CLC
	ADC #$AEFC
	STA $02
	LDX $02
	LDA a:.LOWORD(RAM),X
	EOR #$FFFF
	INC
	LDX $02
	STA a:.LOWORD(RAM),X
	LDA $0E
	TAX
	STZ $B07C,X
	LDX $10
	INX
	STX $10
@UNKNOWN1:
	CPX #$0030
	BCC @UNKNOWN0
	PLD
	RTL

UNKNOWN_C2FB35: ;$C2FB35
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE4
	TCD
	PLA
	STY $1A
	STX $04
	STX $18
	STA $16
	LDX $2A
	STX $14
	LSR
	LSR
	LSR
	LSR
	ASL
	TAX
	LDA .LOWORD(UNKNOWN_7EB37C)
	STA .LOWORD(UNKNOWN_7EAEF4),X
	LDA $16
	ASL
	TAX
	LDA $0380,X
	STA $12
	AND #$001F
	STA $02
	LDA $12
	LSR
	LSR
	LSR
	LSR
	LSR
	AND #$001F
	TAX
	STX $10
	SEP #PROC_FLAGS::ACCUM8
	LDA #$000A
	SEP #PROC_FLAGS::INDEX8
	TAY
	REP #PROC_FLAGS::ACCUM8
	LDA $12
	JSL ASR8_UNKNOWN1
	AND #$001F
	STA $0E
	LDA $04
	CMP $02
	BCC @UNKNOWN0
	BEQ @UNKNOWN0
	LDA $16
	STA $04
	ASL
	ADC $04
	ASL
	STA $12
	LDA $18
	STA $04
	SEC
	SBC $02
	REP #PROC_FLAGS::INDEX8
	LDY #$B1FC
	STA ($12),Y
	LDA #$0001
	LDY #$AEFC
	STA ($12),Y
	BRA @UNKNOWN2
@UNKNOWN0:
	LDA $04
	CMP $02
	BNE @UNKNOWN1
	LDA $16
	STA $04
	ASL
	ADC $04
	ASL
	REP #PROC_FLAGS::INDEX8
	TAX
	STZ $AEFC,X
	BRA @UNKNOWN2
@UNKNOWN1:
	LDA $16
	STA $04
	ASL
	ADC $04
	ASL
	STA $12
	LDA $18
	STA $04
	LDA $02
	SEC
	SBC $04
	REP #PROC_FLAGS::INDEX8
	LDY #$B1FC
	STA ($12),Y
	LDA #$FFFF
	LDY #$AEFC
	STA ($12),Y
@UNKNOWN2:
	LDX $10
	STX $02
	LDY $1A
	TYA
	CMP $02
	BCC @UNKNOWN3
	BEQ @UNKNOWN3
	LDA $16
	STA $04
	ASL
	ADC $04
	ASL
	STA $02
	STX $04
	TYA
	SEC
	SBC $04
	LDX $02
	STA $B1FE,X
	LDA #$0020
	LDX $02
	STA $AEFE,X
	BRA @UNKNOWN5
@UNKNOWN3:
	STX $02
	TYA
	CMP $02
	BNE @UNKNOWN4
	LDA $16
	STA $04
	ASL
	ADC $04
	ASL
	TAX
	STZ $AEFE,X
	BRA @UNKNOWN5
@UNKNOWN4:
	LDA $16
	STA $04
	ASL
	ADC $04
	ASL
	STA $02
	STY $04
	TXA
	SEC
	SBC $04
	LDX $02
	STA $B1FE,X
	LDA #$FFE0
	LDX $02
	STA $AEFE,X
@UNKNOWN5:
	LDA $14
	CMP $0E
	BCC @UNKNOWN6
	BEQ @UNKNOWN6
	LDA $16
	STA $04
	ASL
	ADC $04
	ASL
	TAX
	LDA $14
	SEC
	SBC $0E
	STA $B200,X
	LDA #$0400
	STA $AF00,X
	BRA @UNKNOWN8
@UNKNOWN6:
	LDA $14
	CMP $0E
	BNE @UNKNOWN7
	LDA $16
	STA $04
	ASL
	ADC $04
	ASL
	TAX
	STZ $AF00,X
	BRA @UNKNOWN8
@UNKNOWN7:
	LDA $16
	STA $04
	ASL
	ADC $04
	ASL
	TAX
	LDA $0E
	SEC
	SBC $14
	STA $B200,X
	LDA #$FC00
	STA $AF00,X
@UNKNOWN8:
	LDA $16
	STA $04
	ASL
	ADC $04
	ASL
	TAX
	STZ $B080,X
	STZ $B07E,X
	STZ $B07C,X
	PLD
	RTL

.INCLUDE "unknown/C2FCA6.asm"

.INCLUDE "unknown/C2FD99.asm"

.INCLUDE "unknown/C2FEF9.asm"

.INCLUDE "unknown/C2FF9A.asm"

.INCLUDE "data/movements/patterns/000.asm"
