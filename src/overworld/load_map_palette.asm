
LOAD_MAP_PAL: ;$C007B6
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	PHA
	TDC
	ADC #$FFE0
	TCD
	PLA
	STA $1E
	LDY #$0240
	STY $1C
	LOADPTR MAP_PALETTE_PTR_TABLE, $06
	LDA $1E
	ASL
	ASL
	CLC
	ADC $06
	STA $06
	DEREFERENCE_PTR_TO $06, $06
	TXA
	LDY #$00C0
	JSL MULT168
	CLC
	ADC $06
	STA $06
	STA $16
	LDA $08
	STA $18
	LDA .LOWORD(UNKNOWN_7EB4EF)
	BNE @UNKNOWN4
@UNKNOWN0:
	MOVE_INT $16, $06
	MOVE_INT $06, $0E
	LDX #$00C0
	LDY $1C
	TYA
	JSL MEMCPY16
	LDY $1C
	LDA a:.LOWORD(RAM),Y
	BNE @UNKNOWN1
	JMP a:.LOWORD(@UNKNOWN5)
@UNKNOWN1:
	AND #$7FFF
	JSL GET_EVENT_FLAG
	STA $1A
	LDX #$0000
	LDY $1C
	LDA a:.LOWORD(RAM),Y
	CMP #$8000
	BCC @UNKNOWN2
	BEQ @UNKNOWN2
	LDX #$0001
@UNKNOWN2:
	STX $02
	LDA $1A
	CMP $02
	BEQ @UNKNOWN3
	JMP a:.LOWORD(@UNKNOWN5)
@UNKNOWN3:
	MOVE_INT f:MAP_PALETTE_PTR_TABLE, $06
	MOVE_INT $06, $16
	LDA a:.LOWORD(RAM)+32,Y
	STA $16
	BRA @UNKNOWN0
@UNKNOWN4:
	LOADPTR UNKNOWN_7F0000, $06
	LOADPTR COMPRESSED_PALETTE_UNKNOWN, $0E
	MOVE_INT $06, $12
	JSL DECOMP
	MOVE_INT $06, $0A
	LDA .LOWORD(CUR_PHOTO_DISPLAY)
	LDY #.SIZEOF(photographer_config_entry)
	JSL MULT168
	CLC
	ADC #photographer_config_entry::credits_map_palettes_offset
	TAX
	LDA f:PHOTOGRAPHER_CFG_TABLE,X
	STA $06
	STZ $08
	CLC
	LDA $06
	ADC $0A
	STA $06
	LDA $08
	ADC $0C
	STA $08
	MOVE_INT $06, $0E
	LDX #$00C0
	LDY $1C
	TYA
	JSL MEMCPY16
@UNKNOWN5:
	PLD
	RTL
