
DISPLAY_IN_BATTLE_TEXT: ;$C1DC1C
	.DEFINE TMPTXTPTRLOW $06
    .DEFINE TMPTXTPTRHIGH $08
    .DEFINE DISPTXTPTRLOW $0E
    .DEFINE DISPTXTPTRHIGH $10
    .DEFINE TXTPTRLOW $20
    .DEFINE TXTPTRHIGH $22
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFEE
	TCD
	LDA TXTPTRLOW
	STA TMPTXTPTRLOW
	LDA TXTPTRHIGH
	STA TMPTXTPTRHIGH
	LDX #.LOWORD(GAME_STATE) + game_state::auto_fight_enable
	LDA a:.LOWORD(RAM),X
	AND #$00FF
	BEQ @UNKNOWN0
	LDA a:.LOWORD(PAD_1_STATE)
	AND #PAD::B_BUTTON
	BEQ @UNKNOWN0
	SEP #PROC_FLAGS::ACCUM8
	LDA #$0000
	STA a:.LOWORD(RAM),X
	JSL UNKNOWN_C20293
@UNKNOWN0:
	.A16
	LDA .LOWORD(BATTLE_MODE_FLAG)
	BEQ @NO_PROMPT
	LDA #$0002
	JSR a:.LOWORD(ENABLE_BLINKING_TRIANGLE)
@NO_PROMPT:
	LDA TMPTXTPTRLOW
	STA DISPTXTPTRLOW
	LDA TMPTXTPTRHIGH
	STA DISPTXTPTRHIGH
	JSL DISPLAY_TEXT
	JSR a:.LOWORD(CLEAR_BLINKING_PROMPT)
	PLD
	RTL
