
UNKNOWN_C0E28F: ;$C0E28F
	REP #PROC_FLAGS::ACCUM8 | PROC_FLAGS::INDEX8 | PROC_FLAGS::CARRY
	PHD
	TDC
	ADC #$FFE8
	TCD
	LDA #$0001
	STA .LOWORD(GAME_STATE)+144
	LDA #$0000
	JSL UNKNOWN_C0404F
	STA $02
	LDA .LOWORD(GAME_STATE)+game_state::leader_direction
	STA $16
	LDA $02
	EOR #$0004
	STA $04
	LDA $16
	CMP $04
	BNE @UNKNOWN0
	STA $02
@UNKNOWN0:
	LDA $02
	CMP #$FFFF
	BNE @UNKNOWN1
	LDA .LOWORD(GAME_STATE)+game_state::leader_direction
	STA $02
@UNKNOWN1:
	LDA $02
	STA .LOWORD(GAME_STATE)+game_state::leader_direction
	LDA .LOWORD(BATTLE_SWIRL_COUNTDOWN)
	BEQ @UNKNOWN2
	LDA #$0002
	STA .LOWORD(UNKNOWN_7E9F43)
	LDA #$0001
	STA .LOWORD(BATTLE_DEBUG)
@UNKNOWN2:
	LDA $02
	JSR a:.LOWORD(UNKNOWN_C0DF22)
	LDA .LOWORD(GAME_STATE)+128
	STA $0A
	LDA .LOWORD(GAME_STATE)+game_state::leader_x_coord
	STA $0C
	LDA $9F49
	STA $06
	LDA $9F4B
	STA $08
	CLC
	LDA $06
	ADC $0A
	STA $06
	LDA $08
	ADC $0C
	STA $08
	LDA $06
	STA $9F51
	LDA $08
	STA $9F53
	LDA .LOWORD(GAME_STATE)+132
	STA $0A
	LDA .LOWORD(GAME_STATE)+game_state::leader_y_coord
	STA $0C
	LDA $9F4D
	STA $06
	LDA $9F4F
	STA $08
	CLC
	LDA $06
	ADC $0A
	STA $06
	LDA $08
	ADC $0C
	STA $08
	LDA $06
	STA $9F55
	LDA $08
	STA $9F57
	LDY .LOWORD(GAME_STATE)+game_state::current_party_members
	LDX $9F57
	LDA $9F53
	JSL NPC_COLLISION_CHECK
	CMP #$FFFF
	BEQ @UNKNOWN3
	LDA #$0002
	STA .LOWORD(UNKNOWN_7E9F43)
@UNKNOWN3:
	LDA $9F57
	STA $0E
	LDA $02
	STA $10
	LDY $9F53
	LDX .LOWORD(GAME_STATE)+game_state::leader_y_coord
	LDA .LOWORD(GAME_STATE)+game_state::leader_x_coord
	JSR a:.LOWORD(UNKNOWN_C0DED9)
	AND #$00C0
	BEQ @UNKNOWN4
	LDA #$0002
	STA .LOWORD(UNKNOWN_7E9F43)
@UNKNOWN4:
	LDA .LOWORD(UNKNOWN_7E9F43)
	CMP #$0002
	BEQ @UNKNOWN5
	LDA $9F51
	STA $06
	LDA $9F53
	STA $08
	LDA $06
	STA .LOWORD(GAME_STATE)+128
	LDA $08
	STA .LOWORD(GAME_STATE)+game_state::leader_x_coord
	LDA $9F55
	STA $06
	LDA $9F57
	STA $08
	LDA $06
	STA .LOWORD(GAME_STATE)+132
	LDA $08
	STA .LOWORD(GAME_STATE)+game_state::leader_y_coord
@UNKNOWN5:
	LDX .LOWORD(GAME_STATE)+game_state::leader_y_coord
	LDA .LOWORD(GAME_STATE)+game_state::leader_x_coord
	JSL CENTER_SCREEN
	JSR a:.LOWORD(UNKNOWN_C0E196)
	JSR a:.LOWORD(UNKNOWN_C0E254)
	LDA .LOWORD(UNKNOWN_7E9F47)
	CMP #$0009
	BCC @UNKNOWN6
	BEQ @UNKNOWN6
	LDA #$0001
	STA .LOWORD(UNKNOWN_7E9F43)
@UNKNOWN6:
	PLD
	RTL
